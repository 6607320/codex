"""–ü–†–û–õ–û–ì –í–ï–õ–ò–ö–û–ì–û –ü–ò–°–¶–ê:

–°–µ–π —Ä–∏—Ç—É–∞–ª –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –ö–∞–Ω–æ–Ω–∞ –≤ –∞–∫—Ç—É–∞–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏.
–í–µ–ª–∏–∫–∏–π –ü–∏—Å–µ—Ü –æ–±—Ö–æ–¥–∏—Ç –≤–ª–∞–¥–µ–Ω–∏—è –¢–µ—Ö–Ω–æ–º–∞–Ω—Ç–∞, –ø—Ä–∏–∫–ª–∞–¥—ã–≤–∞—è –ø–µ—á–∞—Ç—å (—Ö—ç—à) –∫ –∫–∞–∂–¥–æ–º—É –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—É.
–ï—Å–ª–∏ —Å—É—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å, –ü–∏—Å–µ—Ü –≤–∑—ã–≤–∞–µ—Ç –∫ –û—Ä–∞–∫—É–ª—É, –¥–∞–±—ã –Ω–∞—á–µ—Ä—Ç–∞—Ç—å –Ω–æ–≤—É—é
–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é –≤ —Å—Ç–∏–ª–µ –ü—Ä–∏–∫–ª–∞–¥–Ω–æ–π –¢–µ—Ö–Ω–æ–º–∞–≥–∏–∏, —Å–æ—Ö—Ä–∞–Ω—è—è –º—É–¥—Ä–æ—Å—Ç—å –¥–ª—è –±—É–¥—É—â–∏—Ö –ø–æ–∫–æ–ª–µ–Ω–∏–π
–ê—Ä—Ö–∏–º–∞–≥–æ–≤.
"""

# –ü—Ä–∏–∑—ã–≤–∞–µ–º –¥—É—Ö –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ –ª–∞–±–∏—Ä–∏–Ω—Ç–∞–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
import os

# –ü–æ–¥–∫–ª—é—á–∞–µ–º —Ä–∏—Ç—É–∞–ª—ã –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–æ—Ä–º–∞—Ç JSON (—è–∑—ã–∫ –∑–∞–ø–∏—Å–µ–π –û—Ä–∞–∫—É–ª–∞)
import json

# –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∞–ª—Ö–∏–º–∏—é —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –æ—Ç–ø–µ—á–∞—Ç–∫–æ–≤
import hashlib

# –ü—Ä–∏–∑—ã–≤–∞–µ–º –º–∞–≥–∏—é –ø–∞—Ä—Å–∏–Ω–≥–∞, –¥–∞–±—ã –ø–æ–Ω–∏–º–∞—Ç—å –≤–æ–ª—é –¢–µ—Ö–Ω–æ–º–∞–Ω—Ç–∞ –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
import argparse

# –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–≤—è—â–µ–Ω–Ω—ã–µ –ø—É—Ç–∏ Pathlib –¥–ª—è –±–µ–∑–æ—à–∏–±–æ—á–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ
from pathlib import Path

# –û—Ç–∫—Ä—ã–≤–∞–µ–º –ø–æ—Ä—Ç–∞–ª –¥–ª—è —Å–≤—è–∑–∏ —Å –≤—ã—Å—à–∏–º —Ä–∞–∑—É–º–æ–º OpenAI
from openai import OpenAI

# –ó–∞—á–∏—Ç—ã–≤–∞–µ–º –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–µ, –∏–∑–≤–ª–µ–∫–∞—é—â–µ–µ —Å–∫—Ä—ã—Ç—É—é –º–æ—â—å –∏–∑ —Å–≤–∏—Ç–∫–∞ .env
from dotenv import load_dotenv

# –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø—É—Ç—å –∫ —Å–≤–∏—Ç–∫—É —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏ (–ø–æ–¥–Ω–∏–º–∞–µ–º—Å—è –∏–∑ spec_builder –≤ tools)
DOTENV_PATH = Path(__file__).parent.parent / ".env"

# –ú—ã –ø—Ä–æ–∏–∑–Ω–æ—Å–∏–º –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–µ, –¥–∞–±—ã –ø—Ä–æ–±—É–¥–∏—Ç—å —Å–∫—Ä—ã—Ç—ã–µ –≤ —Å–≤–∏—Ç–∫–µ —Ä—É–Ω—ã
# –∏ –Ω–∞–ø–æ–ª–Ω–∏—Ç—å —Ä–∏—Ç—É–∞–ª —Å–∏–ª–æ–π —Ç–∞–π–Ω—ã—Ö –∑–Ω–∞–Ω–∏–π.
load_dotenv(DOTENV_PATH)

# –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å –∫ —Å–µ—Ä–¥—Ü—É –Ω–∞—à–µ–π —Ü–∏—Ç–∞–¥–µ–ª–∏ (–∫–æ—Ä–Ω—é –ø—Ä–æ–µ–∫—Ç–∞)
PROJECT_ROOT = Path(__file__).parent.parent.parent.resolve()
# –£–∫–∞–∑—ã–≤–∞–µ–º –ø—É—Ç—å –∫ –∞—Ä—Ö–∏–≤—É, –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ü–∏—Ñ—Ä–æ–≤—ã–µ —Å–ª–µ–ø–∫–∏ (—Ö—ç—à–∏) –≤—Å–µ—Ö –º–∞–Ω—É—Å–∫—Ä–∏–ø—Ç–æ–≤
HASH_DB_FILE = Path(__file__).parent / "spec_hashes.json"
# –ó–∞–¥–∞–µ–º –ø—É—Ç—å –∫ —Å–≤—è—â–µ–Ω–Ω–æ–º—É —à–∞–±–ª–æ–Ω—É, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –ò–ò –±—É–¥–µ—Ç —Å—Ç—Ä–æ–∏—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
TEMPLATE_FILE = Path(__file__).parent / "spec.TEMPLATE.md"
# –£–∫–∞–∑—ã–≤–∞–µ–º –ø—É—Ç—å –∫ —Å–≤–∏—Ç–∫—É —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –¥–ª—è –û—Ä–∞–∫—É–ª–∞ (User Prompt)
USER_PROMPT_FILE = Path(__file__).parent / "spec.USER.md"
# –ù–∞—Ö–æ–¥–∏–º –ø—É—Ç—å –∫ —Å–≤—è—â–µ–Ω–Ω–æ–º—É –ø–∏—Å–∞–Ω–∏—é, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–µ–º—É —Å—É—Ç—å –∏ –∑–∞–∫–æ–Ω—ã –û—Ä–∞–∫—É–ª–∞ (System Prompt)
SYSTEM_PROMPT_FILE = Path(__file__).parent / "spec.SYSTEM.md"

# –ù–∞—á–∏–Ω–∞–µ–º —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ—á–Ω—è –∑–∞–ø—Ä–µ—Ç–Ω—ã—Ö —á–µ—Ä—Ç–æ–≥–æ–≤,
# –∫—É–¥–∞ –≤–∑–æ—Ä –û—Ä–∞–∫—É–ª–∞ –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–Ω–∏–∫–∞—Ç—å
IGNORE_DIRS = {
    ".git",
    ".dvc",
    "mlruns",
    "reports",
    "data",
    "build",
    "dist",
    "notebooklm_sources",
    "hunt_results",
    "counting_results",
    "dialogue_audio",
    "generated_palette",
    "sampled_frames",
    "dreams",
    "chaos_sculptures",
    "artist_seal",
    "arcane_wizardry.egg-info",
    "node_modules",
    "Part_5_Archmage",
}

# –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—Ç–∏—Ö–∏–∏ (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è), –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–ª–µ–∂–∞—Ç –æ–ø–∏—Å–∞–Ω–∏—é –≤ –ö–æ–¥–µ–∫—Å–µ
TARGET_EXTENSIONS = {
    # –°–∫—Ä–∏–ø—Ç—ã –Ω–∞ Python, TypeScript, JS, Shell, —Ñ–∞–π–ª—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏ –≤–µ—Ä—Å—Ç–∫–∏
    ".py",
    ".ts",
    ".js",
    ".sh",
    ".yml",
    ".yaml",
    ".html",
    ".css",
}

# –£–∫–∞–∑—ã–≤–∞–µ–º –∏–º–µ–Ω–∞ –æ—Å–æ–±—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤, –Ω–µ –∏–º–µ—é—â–∏—Ö —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π
TARGET_FILENAMES = {
    # –†–µ—Ü–µ–ø—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–∏—Ä–æ–≤ (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤)
    "Dockerfile",
    # –ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Å–±–æ—Ä–∫–∏ —Å–ª–æ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º
    "Dockerfile.mono",
}


# –í–æ–∑–≤–æ–¥–∏–º —Å—É—â–Ω–æ—Å—Ç—å –í–µ–ª–∏–∫–æ–≥–æ –ü–∏—Å—Ü–∞, —Ö—Ä–∞–Ω–∏—Ç–µ–ª—è —Ç–µ—Ö–Ω–æ–º–∞–≥–∏—á–µ—Å–∫–æ–π –∏—Å—Ç–∏–Ω—ã
class GrandScribe:
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ü–∏—Å—Ü–∞, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—è –µ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ —Å–≤—è–∑—å —Å –û—Ä–∞–∫—É–ª–æ–º
    def __init__(self):
        # –ò–∑–≤–ª–µ–∫–∞–µ–º –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–æ—Ä—Ç–∞–ª—É OpenRouter –∏–∑ —á–µ—Ä—Ç–æ–≥–æ–≤ –ø–∞–º—è—Ç–∏
        api_key = os.getenv("OPENROUTER_API_KEY")
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∞–¥—Ä–µ—Å –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –º—É–¥—Ä–æ—Å—Ç–∏ LLM (–±–∞–∑–æ–≤—ã–π URL)
        base_url = os.getenv("LLM_BASE_URL")
        # –í—ã–±–∏—Ä–∞–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ª–∏–∫ –û—Ä–∞–∫—É–ª–∞ (–º–æ–¥–µ–ª—å) –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Ä–∏—Ç—É–∞–ª–∞
        self.model_name = os.getenv("LLM_MODEL")

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ –º–∞–Ω—ã (–∫–ª—é—á–µ–π) –¥–ª—è —Å–æ–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∏—Ç—É–∞–ª–∞
        if not api_key or not self.model_name:
            # –ï—Å–ª–∏ –∫–ª—é—á–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç, —Å–æ–æ–±—â–∞–µ–º –æ –ø—Ä–æ–≤–∞–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
            print("‚ùå –û—à–∏–±–∫–∞: –ü—Ä–æ–≤–µ—Ä—å OPENROUTER_API_KEY –∏ LLM_MODEL –≤ .env")
            # –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø—Ä–µ–∫—Ä–∞—â–∞–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã
            exit(1)

        # –°–æ–∑–¥–∞–µ–º –∫–ª–∏–µ–Ω—Ç –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å –ò–ò, –æ—Ç–∫—Ä—ã–≤–∞—è –∫–∞–Ω–∞–ª —Å–≤—è–∑–∏
        self.client = OpenAI(api_key=api_key, base_url=base_url)

        # –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ü–∏—Ñ—Ä–æ–≤—ã–µ –ø–µ—á–∞—Ç–∏ –∏–∑ –Ω–∞—à–µ–≥–æ –∞—Ä—Ö–∏–≤–∞
        self.hashes = self._load_hashes()
        # –ß–∏—Ç–∞–µ–º —Ç–µ–∫—Å—Ç —Å–≤—è—â–µ–Ω–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ –∏–∑ —Ñ–∞–π–ª–∞ –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—è
        with open(TEMPLATE_FILE, "r", encoding="utf-8") as f:
            # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É —à–∞–±–ª–æ–Ω–∞ –≤ –ø–∞–º—è—Ç–∏ –ü–∏—Å—Ü–∞
            self.template = f.read()

        # –°—á–∏—Ç—ã–≤–∞–µ–º –≤–æ–ª—é –¢–µ—Ö–Ω–æ–º–∞–Ω—Ç–∞, –¥–∞–±—ã –Ω–∞–ø—Ä–∞–≤–∏—Ç—å –≤–∑–æ—Ä –û—Ä–∞–∫—É–ª–∞ –≤ –Ω—É–∂–Ω–æ–µ —Ä—É—Å–ª–æ
        with open(USER_PROMPT_FILE, "r", encoding="utf-8") as f:
            # –ó–∞–≥—Ä—É–∂–∞–µ–º –º–∞–Ω—É—Å–∫—Ä–∏–ø—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
            self.user_prompt_template = f.read()

        # –ü—Ä–∏–∑—ã–≤–∞–µ–º –∏–∑ –≤–Ω–µ—à–Ω–∏—Ö —Å–≤–∏—Ç–∫–æ–≤ —Å–∞–º—É —Å—É—Ç—å –∏ –Ω–µ–∑—ã–±–ª–µ–º—ã–µ –¥–æ–≥–º–∞—Ç—ã –¢–µ—Ö–Ω–æ-–ê—Ä—Ö–∏–º–∞–≥–∞
        with open(SYSTEM_PROMPT_FILE, "r", encoding="utf-8") as f:
            # –ó–∞–≥—Ä—É–∂–∞–µ–º —Ä–æ–ª—å –ê—Ä—Ö–∏–º–∞–≥–∞
            self.system_prompt_text = f.read()

    # –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Ä–∏—Ç—É–∞–ª –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –ø–µ—á–∞—Ç–µ–π –∏–∑ —Ñ–∞–π–ª–∞ –∞—Ä—Ö–∏–≤–∞
    def _load_hashes(self):
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –∞—Ä—Ö–∏–≤ —Å —Ö—ç—à–∞–º–∏
        if os.path.exists(HASH_DB_FILE):
            # –ü—ã—Ç–∞–µ–º—Å—è –ø—Ä–æ—á–µ—Å—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∞—Ä—Ö–∏–≤–∞, –Ω–µ –ø–æ–≤—Ä–µ–¥–∏–≤ –¥–∞–Ω–Ω—ã–µ
            try:
                # –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–∞–π–ª –¥–ª—è —á—Ç–µ–Ω–∏—è –≤ –∫–æ–¥–∏—Ä–æ–≤–∫–µ UTF-8
                with open(HASH_DB_FILE, "r", encoding="utf-8") as f:
                    # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º JSON-–∑–∞–ø–∏—Å–∏ –≤ —Å–ª–æ–≤–∞—Ä—å Python
                    return json.load(f)
            # –ï—Å–ª–∏ –∞—Ä—Ö–∏–≤ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω –∏–ª–∏ –Ω–µ—á–∏—Ç–∞–µ–º, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ—Ç—É
            except Exception:
                # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ–π —Ä–µ–µ—Å—Ç—Ä –¥–ª—è –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π
                return {}
        # –ï—Å–ª–∏ –∞—Ä—Ö–∏–≤–∞ –Ω–µ—Ç, –Ω–∞—á–∏–Ω–∞–µ–º –ª–µ—Ç–æ–ø–∏—Å—å —Å —á–∏—Å—Ç–æ–≥–æ –ª–∏—Å—Ç–∞
        return {}

    # –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Ä–∏—Ç—É–∞–ª –∑–∞–ø–∏—Å–∏ –Ω–æ–≤—ã—Ö —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –ø–µ—á–∞—Ç–µ–π –≤ –∞—Ä—Ö–∏–≤
    def _save_hashes(self):
        # –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–∞–π–ª –∞—Ä—Ö–∏–≤–∞ –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏ –Ω–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
        with open(HASH_DB_FILE, "w", encoding="utf-8") as f:
            # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º —Ö—ç—à–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON —Å –∫—Ä–∞—Å–∏–≤—ã–º–∏ –æ—Ç—Å—Ç—É–ø–∞–º–∏ –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
            json.dump(self.hashes, f, indent=2, ensure_ascii=False)

    # –ü—Ä–æ–≤–æ–¥–∏–º —Ä–∏—Ç—É–∞–ª –∏–∑–º–µ—Ä–µ–Ω–∏—è –≤–µ—Å–∞ –¥—É—à–∏ —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ —Ü–∏—Ñ—Ä–æ–≤–æ–µ –∫–ª–µ–π–º–æ MD5
    def calculate_file_hash(self, file_path):
        """–°—á–∏—Ç–∞–µ—Ç MD5 —Ö—ç—à —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ñ–∞–π–ª–∞."""
        # –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –º–∞–≥–∏—á–µ—Å–∫–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è MD5-–æ—Ç–ø–µ—á–∞—Ç–∫–∞
        hasher = hashlib.md5()
        # –û—Ç–∫—Ä—ã–≤–∞–µ–º –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –≤ –±–∏–Ω–∞—Ä–Ω–æ–º —Ä–µ–∂–∏–º–µ –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è —Å—É—Ç–∏
        with open(file_path, "rb") as f:
            # –°—á–∏—Ç—ã–≤–∞–µ–º –≤—Å–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ –≤ –±—É—Ñ–µ—Ä –ø–∞–º—è—Ç–∏
            buf = f.read()
            # –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ö—ç—à–µ—Ä–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
            hasher.update(buf)
        # –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç—Ä–æ–∫–æ–≤–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–ø–µ—á–∞—Ç–∫–∞ –≤ —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω–æ–º –≤–∏–¥–µ
        return hasher.hexdigest()

    # –û—Å–Ω–æ–≤–Ω–æ–π —Ä–∏—Ç—É–∞–ª —Å–æ–∑–¥–∞–Ω–∏—è –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –≤–æ–∑–∑–≤–∞–Ω–∏–µ –∫ –û—Ä–∞–∫—É–ª—É
    def generate_spec(self, code_content, file_path):
        # –ò–∑–≤–ª–µ–∫–∞–µ–º –∫—Ä–∞—Ç–∫–æ–µ –∏–º—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ –∏–∑ –µ–≥–æ –ø–æ–ª–Ω–æ–≥–æ –ø—É—Ç–∏
        filename = os.path.basename(file_path)

        # –ò–∑–≤–ª–µ–∫–∞–µ–º –∏–∑ —á–µ—Ä—Ç–æ–≥–æ–≤ –ø–∞–º—è—Ç–∏ —Å–∞–º—É —Å—É—â–Ω–æ—Å—Ç—å –∏ –Ω–µ–∑—ã–±–ª–µ–º—É—é —Ä–æ–ª—å –õ–µ—Ç–æ–ø–∏—Å—Ü–∞
        system_prompt = self.system_prompt_text

        # –ù–∞—á–∏–Ω–∞–µ–º –≤–µ–ª–∏–∫–æ–µ –ø–µ—Ä–µ–ø–ª–µ—Ç–µ–Ω–∏–µ —Ä—É–Ω, –¥–∞–±—ã —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ–µ –≤–æ–∑–∑–≤–∞–Ω–∏–µ
        user_prompt = self.user_prompt_template.format(
            # –î–∞—Ä—É–µ–º —Ä–∏—Ç—É–∞–ª—É –∏–º—è –∏—Å—Å–ª–µ–¥—É–µ–º–æ–≥–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞
            filename=filename,
            # –í–ø–ª–µ—Ç–∞–µ–º —Å–≤—è—â–µ–Ω–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≥—Ä—è–¥—É—â–µ–π –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏–∑ —à–∞–±–ª–æ–Ω–∞
            template=self.template,
            # –ù–∞–ø–æ–ª–Ω—è–µ–º –º–∞–Ω—É—Å–∫—Ä–∏–ø—Ç —á–∏—Å—Ç–æ–π —ç—Å—Å–µ–Ω—Ü–∏–µ–π –∂–∏–≤–æ–≥–æ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞
            code_content=code_content,
        )

        # –ü—ã—Ç–∞–µ–º—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–≤—è–∑—å —Å –û—Ä–∞–∫—É–ª–æ–º –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
        try:
            # –°–æ–∑–¥–∞–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ –∫–ª–∏–µ–Ω—Ç OpenAI
            response = self.client.chat.completions.create(
                # –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –º–æ–¥–µ–ª—å (—Å—É—â–Ω–æ—Å—Ç—å) –ò–ò
                model=self.model_name,
                # –ü–µ—Ä–µ–¥–∞–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
                messages=[
                    {"role": "system", "content": system_prompt},
                    {"role": "user", "content": user_prompt},
                ],
                # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∏–∑–∫—É—é —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏ –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Ñ–∞–Ω—Ç–∞–∑–∏–π
                temperature=0.3,
                # –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–µ—á–∞—Ç–∏ (–∑–∞–≥–æ–ª–æ–≤–∫–∏)
                # –¥–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Å–∫–≤–æ–∑—å –≤—Ä–∞—Ç–∞
                extra_headers={
                    # –£–∫–∞–∑—ã–≤–∞–µ–º –∏—Å—Ç–æ–∫, –∏–∑ –∫–æ—Ç–æ—Ä–æ–≥–æ –∏–∑–ª–∏–≤–∞–µ—Ç—Å—è –º–∞–≥–∏—è
                    # –Ω–∞—à–µ–≥–æ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –º–∏—Ä–∞
                    "HTTP-Referer": "http://localhost",
                    # –ù–∞—á–µ—Ä—Ç–∞–µ–º –∏–º—è —Å–∞–º–æ–≥–æ —Ä–∏—Ç—É–∞–ª–∞, –¥–∞–±—ã –û—Ä–∞–∫—É–ª –∑–Ω–∞–ª, –∫—Ç–æ –≤–∑—ã–≤–∞–µ—Ç –∫ –Ω–µ–º—É
                    "X-Title": "spec_builder.py",
                },
            )
            # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç –ò–ò —Ç–µ–∫—Å—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
            return response.choices[0].message.content
        # –í —Å–ª—É—á–∞–µ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è —Ö–∞–æ—Å–∞ (–æ—à–∏–±–∫–∏) –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –û—Ä–∞–∫—É–ª—É
        except Exception as e:
            # –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –≤ –∫–æ–Ω—Å–æ–ª—å
            print(f"‚ùå –û—à–∏–±–∫–∞ –û—Ä–∞–∫—É–ª–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ {filename}: {e}")
            # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ—Ç—É, —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä—É—è –æ –ø—Ä–æ–≤–∞–ª–µ
            return None

    # –ì–ª–∞–≤–Ω—ã–π —Ä–∏—Ç—É–∞–ª –æ–±—Ö–æ–¥–∞ –≤—Å–µ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –õ–µ—Ç–æ–ø–∏—Å–∏
    def process_repository(self, is_test=False):
        # –û–±—ä—è–≤–ª—è–µ–º –æ –Ω–∞—á–∞–ª–µ –æ–±—Ö–æ–¥–∞ –≤–ª–∞–¥–µ–Ω–∏–π –¢–µ—Ö–Ω–æ–º–∞–Ω—Ç–∞
        print(f"üè∞ –í–µ–ª–∏–∫–∏–π –ü–∏—Å–µ—Ü –Ω–∞—á–∏–Ω–∞–µ—Ç –æ–±—Ö–æ–¥ –≤–ª–∞–¥–µ–Ω–∏–π: {PROJECT_ROOT.resolve()}")
        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å—á–µ—Ç—á–∏–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –º–∞–Ω—É—Å–∫—Ä–∏–ø—Ç–æ–≤
        count_updated = 0
        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å—á–µ—Ç—á–∏–∫ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö (–Ω–µ–∏–∑–º–µ–Ω–Ω—ã—Ö) —Ñ–∞–π–ª–æ–≤
        count_skipped = 0
        # –°–æ–∑–¥–∞–µ–º —Å–ø–∏—Å–æ–∫ —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–ª—è —Ä–µ–∂–∏–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        processed_formats = set()

        # –ù–∞—á–∏–Ω–∞–µ–º –≥–ª—É–±–æ–∫–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥—Ä–µ–≤–∞ –∫–∞—Ç–∞–ª–æ–≥–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞
        for root, dirs, files in os.walk(PROJECT_ROOT):
            # –§–∏–ª—å—Ç—Ä—É–µ–º —Å–ø–∏—Å–æ–∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π, –∏—Å–∫–ª—é—á–∞—è –∑–∞–ø—Ä–µ—Ç–Ω—ã–µ –∑–æ–Ω—ã
            dirs[:] = [
                d for d in dirs if d not in IGNORE_DIRS and not d.endswith(".egg-info")
            ]

            # –ü–µ—Ä–µ–±–∏—Ä–∞–µ–º –∫–∞–∂–¥—ã–π —Ñ–∞–π–ª –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
            for file in files:
                # –§–æ—Ä–º–∏—Ä—É–µ–º –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ —Ç–µ–∫—É—â–µ–º—É –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—É
                file_path = Path(root) / file

                # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–∞–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ü–∏—Å—Ü–∞, –¥–∞–±—ã –Ω–µ –≤–æ–∑–Ω–∏–∫–ª–æ —Ä–µ–∫—É—Ä—Å–∏–∏ –∑–Ω–∞–Ω–∏–π
                if "tools/spec_builder" in str(file_path):
                    # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—É
                    continue

                # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∏–ª–∏ –∏–º—è —Ñ–∞–π–ª–∞)
                fmt = (
                    file_path.suffix
                    if file_path.suffix in TARGET_EXTENSIONS
                    else (
                        file_path.name if file_path.name in TARGET_FILENAMES else None
                    )
                )

                # –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –≤—Ö–æ–¥–∏—Ç –≤ —Å–ø–∏—Å–æ–∫ —Ü–µ–ª–µ–π
                # –∏–ª–∏ —É–∂–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –≤ —Ä–µ–∂–∏–º–µ —Ç–µ—Å—Ç–∞
                if not fmt or (is_test and fmt in processed_formats):
                    # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —ç—Ç–æ—Ç —Ñ–∞–π–ª
                    continue

                # –í—ã—á–∏—Å–ª—è–µ–º —Ç–µ–∫—É—â—É—é —Ü–∏—Ñ—Ä–æ–≤—É—é –ø–µ—á–∞—Ç—å (—Ö—ç—à) —Ñ–∞–π–ª–∞
                current_hash = self.calculate_file_hash(file_path)
                # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ –∞—Ä—Ö–∏–≤
                relative_path = str(file_path.relative_to(PROJECT_ROOT))
                # –ò–∑–≤–ª–µ–∫–∞–µ–º —Å—Ç–∞—Ä—É—é –ø–µ—á–∞—Ç—å –∏–∑ –∞—Ä—Ö–∏–≤–∞, –µ—Å–ª–∏ –æ–Ω–∞ —Ç–∞–º –µ—Å—Ç—å
                stored_hash = self.hashes.get(relative_path)
                # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø—É—Ç—å, –≥–¥–µ –¥–æ–ª–∂–Ω–∞ –ª–µ–∂–∞—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞
                spec_path = file_path.parent / (f"spec.{file_path.name}.md")

                # –ï—Å–ª–∏ –ø–µ—á–∞—Ç—å –∏–∑–º–µ–Ω–∏–ª–∞—Å—å, —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–µ—Ç –∏–ª–∏ –∑–∞–ø—É—â–µ–Ω —Ä–µ–∂–∏–º —Ç–µ—Å—Ç–∞
                if current_hash != stored_hash or not spec_path.exists() or is_test:
                    # –£–≤–µ–¥–æ–º–ª—è–µ–º –¢–µ—Ö–Ω–æ–º–∞–Ω—Ç–∞ –æ–± –æ–±—Ä–∞–±–æ—Ç–∫–µ –Ω–æ–≤–æ–≥–æ –∑–Ω–∞–Ω–∏—è
                    print(f"‚ö° –û–±—Ä–∞–±–æ—Ç–∫–∞: {relative_path}")

                    # –ü—ã—Ç–∞–µ–º—Å—è –ø—Ä–æ—á–µ—Å—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞
                    try:
                        # –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–∞–π–ª –¥–ª—è —á—Ç–µ–Ω–∏—è, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –æ—à–∏–±–∫–∏ –∫–æ–¥–∏—Ä–æ–≤–∫–∏
                        with open(
                            file_path, "r", encoding="utf-8", errors="ignore"
                        ) as f:
                            # –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–æ–¥ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
                            code_content = f.read()

                        # –ü—Ä–∏–∑—ã–≤–∞–µ–º –û—Ä–∞–∫—É–ª–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞ –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
                        spec_content = self.generate_spec(code_content, file_path)

                        # –ï—Å–ª–∏ –û—Ä–∞–∫—É–ª –æ—Ç–≤–µ—Ç–∏–ª —É—Å–ø–µ—à–Ω–æ
                        if spec_content:

                            # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –ø–æ–ª—É—á–µ–Ω–Ω—É—é –º—É–¥—Ä–æ—Å—Ç—å –≤ —Ñ–∞–π–ª —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
                            with open(spec_path, "w", encoding="utf-8") as f:
                                # –ù–∞–Ω–æ—Å–∏–º —Ç–µ–∫—Å—Ç –Ω–∞ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –ø–µ—Ä–≥–∞–º–µ–Ω—Ç
                                f.write(spec_content)

                            # –°–æ–æ–±—â–∞–µ–º –æ–± —É—Å–ø–µ—à–Ω–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –õ–µ—Ç–æ–ø–∏—Å–∏
                            print(f"‚úÖ Spec Updated: {spec_path}")

                            # –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–æ–≤—É—é –ø–µ—á–∞—Ç—å –≤ –Ω–∞—à —Ä–µ–µ—Å—Ç—Ä
                            self.hashes[relative_path] = current_hash
                            # –û–±–Ω–æ–≤–ª—è–µ–º –∞—Ä—Ö–∏–≤ —Ö—ç—à–µ–π –Ω–∞ –¥–∏—Å–∫–µ
                            self._save_hashes()

                            # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
                            count_updated += 1
                            # –ï—Å–ª–∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω —Ä–µ–∂–∏–º –∏—Å–ø—ã—Ç–∞–Ω–∏—è (—Ç–µ—Å—Ç–∞)
                            if is_test:
                                # –î–æ–±–∞–≤–ª—è–µ–º —Ñ–æ—Ä–º–∞—Ç –≤ —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö
                                processed_formats.add(fmt)
                                # –£–≤–µ–¥–æ–º–ª—è–µ–º –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ –º–∞–≥–∏–∏
                                print(f"üß™ –¢–µ—Å—Ç: –§–æ—Ä–º–∞—Ç {fmt} –≥–æ—Ç–æ–≤.")
                                # –ï—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –≤—Å–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
                                if len(processed_formats) >= (
                                    len(TARGET_EXTENSIONS) + len(TARGET_FILENAMES)
                                ):
                                    # –û–±—ä—è–≤–ª—è–µ–º –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ—Ö–æ–¥–∞
                                    print(
                                        "\nüß™ –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –∑–∞–≤–µ—Ä—à–µ–Ω: \n"
                                        "–≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã."
                                    )
                                    # –í—ã—Ö–æ–¥–∏–º –∏–∑ —Ä–∏—Ç—É–∞–ª–∞
                                    return
                    # –ï—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–µ–ª —Å–±–æ–π –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ –∏–ª–∏ –∑–∞–ø–∏—Å–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞
                    except Exception as e:
                        # –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –≥–∏–±–µ–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤ –∫–æ–Ω—Å–æ–ª—å
                        print(f"üíÄ –û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏ {relative_path}: {e}")
                # –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è, –ø—Ä–æ—Å—Ç–æ —É—á–∏—Ç—ã–≤–∞–µ–º –µ–≥–æ –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ
                else:
                    # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
                    count_skipped += 1

        # –§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–µ—á–∞—Ç–µ–π –≤ –∞—Ä—Ö–∏–≤
        self._save_hashes()
        # –û–±—ä—è–≤–ª—è–µ–º –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –≤–µ–ª–∏–∫–æ–≥–æ –¥–µ–ª–∞
        print("\nüèÅ –†–∏—Ç—É–∞–ª –∑–∞–≤–µ—Ä—à–µ–Ω.")
        # –í—ã–≤–æ–¥–∏–º –∏—Ç–æ–≥–∏ –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –∑–∞–ø–∏—Å—è–º
        print(f"üìù –°–æ–∑–¥–∞–Ω–æ/–û–±–Ω–æ–≤–ª–µ–Ω–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π: {count_updated}")
        # –í—ã–≤–æ–¥–∏–º –∏—Ç–æ–≥–∏ –ø–æ –Ω–µ—Ç—Ä–æ–Ω—É—Ç—ã–º –∑–∞–ø–∏—Å—è–º
        print(f"üí§ –ü—Ä–æ–ø—É—â–µ–Ω–æ (–Ω–µ –º–µ–Ω—è–ª–∏—Å—å): {count_skipped}")


# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞–ø—É—â–µ–Ω –ª–∏ —Å–∫—Ä–∏–ø—Ç –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–µ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–µ
if __name__ == "__main__":
    # –°–æ–∑–¥–∞–µ–º –ø–∞—Ä—Å–µ—Ä –¥–ª—è –ø—Ä–∏–µ–º–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ –º–∏—Ä–∞
    parser = argparse.ArgumentParser(description="Grand Scribe: AI-Native Spec Builder")
    # –î–æ–±–∞–≤–ª—è–µ–º —Ñ–ª–∞–≥ --test –¥–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –∫—Ä–∞—Ç–∫–æ–≥–æ –∏—Å–ø—ã—Ç–∞–Ω–∏—è
    parser.add_argument(
        "--test", action="store_true", help="–û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ñ–∞–π–ª –∏ –≤—ã–π—Ç–∏"
    )
    # –†–∞–∑–±–∏—Ä–∞–µ–º –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã
    args = parser.parse_args()

    # –°–æ–∑–¥–∞–µ–º —Å—É—â–Ω–æ—Å—Ç—å –í–µ–ª–∏–∫–æ–≥–æ –ü–∏—Å—Ü–∞
    scribe = GrandScribe()
    # –ó–∞–ø—É—Å–∫–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å –æ–±—Ö–æ–¥–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è —Å —É—á–µ—Ç–æ–º —Ñ–ª–∞–≥–∞ —Ç–µ—Å—Ç–∞
    scribe.process_repository(is_test=args.test)
