// –ù–∞–¥–ø–∏—Å—å –Ω–∞ –ø–µ—Ä–≥–∞–º–µ–Ω—Ç–µ, –≥–ª–∞—Å—è—â–∞—è –æ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏ –Ω–∞—à–µ–≥–æ –ö—Ä–∏—Å—Ç–∞–ª–ª–∞ –ü–∞–º—è—Ç–∏.
// –ú—ã —Å–æ–∑–¥–∞–µ–º –Ω–∞—à –ö—Ä–∏—Å—Ç–∞–ª–ª –ü–∞–º—è—Ç–∏, INDEX_DATA, –≥–¥–µ –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è
// –≤—Å—è –º—É–¥—Ä–æ—Å—Ç—å –ö–æ–¥–µ–∫—Å–∞. –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –æ–Ω –ø—É—Å—Ç.
let INDEX_DATA = null;

// –≠—Ç–æ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–µ-—Å—Ç—Ä–∞–∂, —á—Ç–æ –∂–¥–µ—Ç –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è –Ω–∞—à–µ–≥–æ –º–∏—Ä–∞ (–ø–µ—Ä–≥–∞–º–µ–Ω—Ç–∞ HTML), –ø—Ä–µ–∂–¥–µ —á–µ–º –Ω–∞—á–∞—Ç—å –≥–ª–∞–≤–Ω—ã–π —Ä–∏—Ç—É–∞–ª.
document.addEventListener("DOMContentLoaded", async () => {
  // –ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º –º—ã —Ç–µ—Ä–ø–µ–ª–∏–≤–æ –≤–æ–ø—Ä–æ—à–∞–µ–º –û—Ä–∞–∫—É–ª–∞, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—É—é –∫–∞—Ä—Ç—É –º–∏—Ä–∞, –∏ –∂–¥–µ–º –µ–≥–æ –æ—Ç–≤–µ—Ç–∞.
  await loadIndex();
  // –ó–∞—Ç–µ–º –º—ã –æ–±—Ä–∞—â–∞–µ–º—Å—è –∫ –ú–∞–≥–∏—á–µ—Å–∫–æ–º—É –ö–æ–º–ø–∞—Å—É, —á—Ç–æ–±—ã –æ–Ω –æ–ø—Ä–µ–¥–µ–ª–∏–ª, –∫—É–¥–∞ –Ω–∞–ø—Ä–∞–≤–∏—Ç—å –¢–µ—Ö–Ω–æ–º–∞–Ω—Ç–∞.
  router();
}); // –ó–¥–µ—Å—å –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Ä–∏—Ç—É–∞–ª –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è –º–∏—Ä–∞.

// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –†–∏—Ç—É–∞–ª–∞ –í–æ–ø—Ä–æ—à–µ–Ω–∏—è –û—Ä–∞–∫—É–ª–∞, —á—Ç–æ —Å–≤—è–∑—ã–≤–∞–µ—Ç—Å—è —Å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º –≤—Å–µ—Ö –∑–Ω–∞–Ω–∏–π.
async function loadIndex() {
  // –ú—ã –Ω–∞—á–∏–Ω–∞–µ–º —Ä–∏—Ç—É–∞–ª —Å –∑–∞—â–∏—Ç–Ω–æ–π —Ä—É–Ω–æ–π, –≥–æ—Ç–æ–≤—ã–µ –∫ –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω—ã–º –ø–æ–º–µ—Ö–∞–º.
  try {
    // –ù–∞—à –∑–æ–≤ –∫ –û—Ä–∞–∫—É–ª—É (index.json). –ú—ã –¥–æ–±–∞–≤–ª—è–µ–º —á–∞—Å—Ç–∏—Ü—É —Ç–µ–∫—É—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, —á—Ç–æ–±—ã –≤–∏–¥–µ–Ω–∏–µ –±—ã–ª–æ —Å–≤–µ–∂–∏–º,
    // –∞ –Ω–µ –∏–∑ –∫—ç—à–∞ –¥—É—Ö–æ–≤-—Ö—Ä–∞–Ω–∏—Ç–µ–ª–µ–π.
    const response = await fetch("index.json?" + new Date().getTime());
    // –ú—ã –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –æ—Ç–≤–µ—Ç –û—Ä–∞–∫—É–ª–∞ –≤ —á–∏—Å—Ç—É—é —ç—Å—Å–µ–Ω—Ü–∏—é (JSON) –∏ —Ç–µ—Ä–ø–µ–ª–∏–≤–æ –∂–¥–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏.
    INDEX_DATA = await response.json();
    // –ï—Å–ª–∏ —Ä–∏—Ç—É–∞–ª –±—ã–ª –ø—Ä–µ—Ä–≤–∞–Ω –∏–ª–∏ –û—Ä–∞–∫—É–ª –º–æ–ª—á–∏—Ç, –∑–∞—â–∏—Ç–Ω–∞—è —Ä—É–Ω–∞ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è.
  } catch (e) {
    // –ú—ã –Ω–∞—á–µ—Ä—Ç—ã–≤–∞–µ–º –Ω–∞ —Å–∞–º–æ–º —Ç–µ–ª–µ –º–∏—Ä–∞ –ø–æ—Å–ª–∞–Ω–∏–µ –æ –Ω–µ—É–¥–∞—á–µ, —á—Ç–æ–±—ã –¢–µ—Ö–Ω–æ–º–∞–Ω—Ç –∑–Ω–∞–ª –æ –ø—Ä–æ–±–ª–µ–º–µ.
    document.body.innerHTML = "<h1>–û—à–∏–±–∫–∞: index.json –Ω–µ –Ω–∞–π–¥–µ–Ω</h1>";
  } // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –∑–∞—â–∏—Ç–Ω–æ–π —Ä—É–Ω—ã.
} // –ó–¥–µ—Å—å –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –æ–ø–∏—Å–∞–Ω–∏–µ –†–∏—Ç—É–∞–ª–∞ –í–æ–ø—Ä–æ—à–µ–Ω–∏—è –û—Ä–∞–∫—É–ª–∞.

// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ú–∞–≥–∏—á–µ—Å–∫–æ–≥–æ –ö–æ–º–ø–∞—Å–∞, —á—Ç–æ —á–∏—Ç–∞–µ—Ç –∑–Ω–∞–∫–∏ –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ –∏ —É–∫–∞–∑—ã–≤–∞–µ—Ç –ø—É—Ç—å.
function router() {
  // –ú—ã –∏–∑—É—á–∞–µ–º –ø–∏—Å—å–º–µ–Ω–∞, –æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –≤ –ø—É—Ç–∏ (URL search params), —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –Ω–∞–º–µ—Ä–µ–Ω–∏–µ –¢–µ—Ö–Ω–æ–º–∞–Ω—Ç–∞.
  const params = new URLSearchParams(window.location.search);
  // –ï—Å–ª–∏ –≤ –ø–∏—Å—å–º–µ–Ω–∞—Ö –µ—Å—Ç—å —Å–∏–≥–∏–ª 'id', –∑–Ω–∞—á–∏—Ç, –º—ã –¥–æ–ª–∂–Ω—ã –æ—Ç–∫—Ä—ã—Ç—å –≤—Ä–∞—Ç–∞ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –∫–≤–µ—Å—Ç—É.
  if (params.has("id")) {
    // –ú—ã –ø—Ä–∏–∑—ã–≤–∞–µ–º —Å—É—â–Ω–æ—Å—Ç—å —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∫–≤–µ—Å—Ç–∞ –∏ –≤–æ–ø–ª–æ—â–∞–µ–º –µ–µ, –ø–µ—Ä–µ–¥–∞–≤–∞—è –µ–≥–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Å–∏–≥–∏–ª.
    loadAndRenderQuest(params.get("id"));
    // –ï—Å–ª–∏ –∂–µ –æ—Å–æ–±—ã—Ö —Å–∏–≥–∏–ª–æ–≤ –≤ –ø—É—Ç–∏ –Ω–µ—Ç...
  } else {
    // ...–º—ã –Ω–∞—á–µ—Ä—Ç–∞–µ–º –≥–ª–∞–≤–Ω—ã–π –ó–∞–ª –ò—Å–ø—ã—Ç–∞–Ω–∏–π, –≥–¥–µ –≤–∏–¥–Ω—ã –≤—Å–µ —á–∞—Å—Ç–∏ –ö–æ–¥–µ–∫—Å–∞.
    renderCodexPage();
  } // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –ø—É—Ç–∏.
} // –ó–¥–µ—Å—å –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞ –ú–∞–≥–∏—á–µ—Å–∫–æ–≥–æ –ö–æ–º–ø–∞—Å–∞.

// –í–µ–ª–∏–∫–æ–µ –ó–∞–∫–ª–∏–Ω–∞–Ω–∏–µ –ù–∞—á–µ—Ä—Ç–∞–Ω–∏—è, —á—Ç–æ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –º—É–¥—Ä–æ—Å—Ç—å –∏–∑ –ö—Ä–∏—Å—Ç–∞–ª–ª–∞ –ü–∞–º—è—Ç–∏ –≤ –≤–∏–¥–∏–º—ã–π –ó–∞–ª –ò—Å–ø—ã—Ç–∞–Ω–∏–π.
function renderCodexPage() {
  // –ú—ã –Ω–∞—Ö–æ–¥–∏–º –í–µ–ª–∏–∫–∏–π –ê–ª—Ç–∞—Ä—å 'app', –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –Ω–∞—á–µ—Ä—Ç–∞–Ω–∏–µ.
  const app = document.getElementById("app");
  // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ä–∏—Ç—É–∞–ª –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è: —Å–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –∫–≤–µ—Å—Ç—ã –∏–∑ –ø–ª–æ—Å–∫–æ–≥–æ —Å–ø–∏—Å–∫–∞ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É, —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—É—é –ø–æ –ß–∞—Å—Ç—è–º.
  const questsByPart = INDEX_DATA.quests.reduce((acc, quest) => {
    // –ï—Å–ª–∏ –ø–æ–ª–∫–∏ –¥–ª—è —ç—Ç–æ–π –ß–∞—Å—Ç–∏ –µ—â–µ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –Ω–∞—à–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ, –º—ã —Å–æ–∑–¥–∞–µ–º –µ–µ.
    if (!acc[quest.partNumber]) acc[quest.partNumber] = [];
    // –ú—ã –∫–ª–∞–¥–µ–º —Å–≤–∏—Ç–æ–∫-–∫–≤–µ—Å—Ç –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –µ–º—É –ø–æ–ª–∫—É.
    acc[quest.partNumber].push(quest);
    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —à–∞–≥–∞ —Ä–∏—Ç—É–∞–ª–∞.
    return acc;
  }, {}); // –ù–∞—á–∏–Ω–∞–µ–º —Ä–∏—Ç—É–∞–ª —Å –ø—É—Å—Ç–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ {}.

  // –ú—ã –Ω–∞—á–∏–Ω–∞–µ–º —Å–æ–∑–¥–∞–≤–∞—Ç—å –º–∞–≥–∏—á–µ—Å–∫—É—é —Ñ–æ—Ä–º—É–ª—É (HTML-—Å—Ç—Ä–æ–∫—É), —á—Ç–æ —Å—Ç–∞–Ω–µ—Ç –æ–±–ª–∏–∫–æ–º –ó–∞–ª–∞.
  let html = `<div class="home-scroll-container fade-in">`;
  // –ú—ã –±–µ—Ä–µ–º –∫–ª—é—á–∏ (–Ω–æ–º–µ—Ä–∞ –ß–∞—Å—Ç–µ–π), –∏–∑–≤–ª–µ–∫–∞–µ–º –∏—Ö –∏–∑ –Ω–∞—à–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏...
  Object.keys(questsByPart)
    // ...–ø—Ä–∏–º–µ–Ω—è–µ–º —Ä—É–Ω–∏—á–µ—Å–∫—É—é —Ñ–æ—Ä–º—É–ª—É —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏—è, —á—Ç–æ–±—ã –ß–∞—Å—Ç–∏ —à–ª–∏ –≤ –≤–µ—Ä–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ...
    .sort((a, b) => parseInt(a) - parseInt(b))
    // ...–∏ –Ω–∞—á–∏–Ω–∞–µ–º —Ä–∏—Ç—É–∞–ª –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è, –æ–±—Ä–∞—â–∞—è —Å–≤–æ–π –≤–∑–æ—Ä –Ω–∞ –∫–∞–∂–¥—É—é –ß–∞—Å—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ.
    .forEach((partKey) => {
      // –ú—ã –∏–∑–≤–ª–µ–∫–∞–µ–º –≤—Å–µ –∫–≤–µ—Å—Ç—ã, –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—â–∏–µ —Ç–µ–∫—É—â–µ–π –ß–∞—Å—Ç–∏.
      const questsInPart = questsByPart[partKey];
      // –ì–æ—Ç–æ–≤–∏–º –º–µ—Å—Ç–æ (–ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç) –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –∫–≤–µ—Å—Ç–æ–≤ –ø–æ –°–≤–∏—Ç–∫–∞–º.
      const scrolls = {};
      // –¢–µ–ø–µ—Ä—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–≤–µ—Å—Ç–∞ –≤ —ç—Ç–æ–π –ß–∞—Å—Ç–∏...
      questsInPart.forEach((q) => {
        // ...–º—ã –ø—Ä–æ–≤–µ—Ä—è–µ–º, —Å–æ–∑–¥–∞–Ω–∞ –ª–∏ —É–∂–µ —è—á–µ–π–∫–∞ –¥–ª—è –µ–≥–æ –°–≤–∏—Ç–∫–∞. –ï—Å–ª–∏ –Ω–µ—Ç - —Å–æ–∑–¥–∞–µ–º.
        if (!scrolls[q.scrollTitle]) scrolls[q.scrollTitle] = [];
        // ...–∏ –ø–æ–º–µ—â–∞–µ–º –∫–≤–µ—Å—Ç –≤ —è—á–µ–π–∫—É, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –µ–≥–æ –°–≤–∏—Ç–∫—É.
        scrolls[q.scrollTitle].push(q);
      }); // –ó–∞–≤–µ—Ä—à–∞–µ–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–≤–µ—Å—Ç–æ–≤ –ø–æ –°–≤–∏—Ç–∫–∞–º.
      // –ú—ã –¥–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–∞—à—É –º–∞–≥–∏—á–µ—Å–∫—É—é —Ñ–æ—Ä–º—É–ª—É –Ω–∞—á–µ—Ä—Ç–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–ª—è –ß–∞—Å—Ç–∏ –∏ –µ–µ –≤–µ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫.
      html += `<div class="part-container"><h2>${questsInPart[0].partTitle}</h2>`;
      // –¢–µ–ø–µ—Ä—å –º—ã –ø–µ—Ä–µ–±–∏—Ä–∞–µ–º –∫–∞–∂–¥—ã–π —Å–æ–∑–¥–∞–Ω–Ω—ã–π –°–≤–∏—Ç–æ–∫ –≤ —ç—Ç–æ–π –ß–∞—Å—Ç–∏.
      for (const scrollTitle in scrolls) {
        // –ù–∞—á–µ—Ä—Ç—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –°–≤–∏—Ç–∫–∞, –µ–≥–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Å–æ–∑–¥–∞–µ–º —Å–µ—Ç–∫—É –¥–ª—è –ö–≤–µ—Å—Ç–æ–≤—ã—Ö –ö–∞–º–Ω–µ–π.
        html += `<div class="scroll-container"><h3>${scrollTitle}</h3><div class="quest-grid">`;
        // –ú—ã –±–µ—Ä–µ–º –≤—Å–µ –∫–≤–µ—Å—Ç—ã –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –°–≤–∏—Ç–∫–∞...
        scrolls[scrollTitle]
          // ...–∏ –≤–Ω–æ–≤—å –ø—Ä–∏–º–µ–Ω—è–µ–º —Ñ–æ—Ä–º—É–ª—É —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏—è, —á—Ç–æ–±—ã –æ–Ω–∏ —à–ª–∏ —Å—Ç—Ä–æ–≥–æ –ø–æ ID...
          .sort((a, b) => parseFloat(a.id) - parseFloat(b.id))
          // ...–ø–æ—Å–ª–µ —á–µ–≥–æ –ø–µ—Ä–µ–±–∏—Ä–∞–µ–º –∫–∞–∂–¥—ã–π –∫–≤–µ—Å—Ç –¥–ª—è –µ–≥–æ –≤–æ–ø–ª–æ—â–µ–Ω–∏—è.
          .forEach((q) => {
            // –ü—Ä–∏–º–µ–Ω—è–µ–º –º–æ–≥—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–∏–ª—ã –ö–≤–µ—Å—Ç–æ–≤–æ–≥–æ –ö–∞–º–Ω—è.
            const clickAttr =
              // –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å –∫–∞–º–Ω—è 'active' (–∞–∫—Ç–∏–≤–µ–Ω)...
              q.status === "active"
                ? // ...–º—ã –≤–ø–ª–µ—Ç–∞–µ–º –≤ –Ω–µ–≥–æ —Ä—É–Ω—É —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏, —á—Ç–æ –ø–µ—Ä–µ–Ω–µ—Å–µ—Ç –¢–µ—Ö–Ω–æ–º–∞–Ω—Ç–∞ –∫ –∏—Å–ø—ã—Ç–∞–Ω–∏—é.
                  `onclick="window.location.href='quest.html?id=${q.id}'"`
                : // ...–≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ, –∫–∞–º–µ–Ω—å –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑–º–æ–ª–≤–Ω—ã–º –∏ –ª–∏—à–µ–Ω–Ω—ã–º —Å–∏–ª—ã.
                  "";
            // –ú—ã –Ω–∞—á–∏–Ω–∞–µ–º –Ω–∞—á–µ—Ä—Ç–∞–Ω–∏–µ –ö–≤–µ—Å—Ç–æ–≤–æ–≥–æ –ö–∞–º–Ω—è, –∏—Å–ø–æ–ª—å–∑—É—è –º–∞–≥–∏—é —à–∞–±–ª–æ–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫.
            html += `
              <!-- –°–æ—Ç–≤–æ—Ä—è–µ–º –≤–Ω–µ—à–Ω–∏–π –±–ª–æ–∫ –ö–∞–º–Ω—è, –ø—Ä–∏–¥–∞–≤–∞—è –µ–º—É –∫–ª–∞—Å—Å 'quest-card' –∏ –∫–ª–∞—Å—Å –µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ (active/locked). -->
              <!-- –¢–∞–∫–∂–µ –≤–ø–ª–µ—Ç–∞–µ–º –≤ –Ω–µ–≥–æ —Ä—É–Ω—É —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏ 'onclick', –µ—Å–ª–∏ –æ–Ω–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. -->
              <div class="quest-card ${q.status}" ${clickAttr}>
                <!-- –ù–∞–Ω–æ—Å–∏–º –≥—Ä–∞–≤–∏—Ä–æ–≤–∫—É —Å –ø–æ—Ä—è–¥–∫–æ–≤—ã–º –Ω–æ–º–µ—Ä–æ–º –∫–≤–µ—Å—Ç–∞. -->
                <div class="q-id">#${q.id}</div>
                <!-- –ù–∞—á–µ—Ä—Ç—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω–æ–µ –∏–º—è –∫–≤–µ—Å—Ç–∞, –¥–µ–ª–∞—è –µ–≥–æ –∑–∞–º–µ—Ç–Ω—ã–º. -->
                <div class="q-title">${q.title}</div>
              </div>
            `; // –ó–¥–µ—Å—å –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –Ω–∞—á–µ—Ä—Ç–∞–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –ö–≤–µ—Å—Ç–æ–≤–æ–≥–æ –ö–∞–º–Ω—è.
          }); // –ó–∞–ø–µ—á–∞—Ç—ã–≤–∞–µ–º —Å–µ—Ç–∫—É –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –°–≤–∏—Ç–∫–∞.
        html += `</div></div>`;
      } // –ó–∞–≤–µ—Ä—à–∞–µ–º –ø–µ—Ä–µ–±–æ—Ä –≤—Å–µ—Ö –°–≤–∏—Ç–∫–æ–≤.
      // –ó–∞–ø–µ—á–∞—Ç—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ß–∞—Å—Ç–∏.
      html += `</div>`;
    }); // –ó–∞–≤–µ—Ä—à–∞–µ–º –ø–µ—Ä–µ–±–æ—Ä –≤—Å–µ—Ö –ß–∞—Å—Ç–µ–π –ö–æ–¥–µ–∫—Å–∞.
  // –ó–∞–ø–µ—á–∞—Ç—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ó–∞–ª–∞ –ò—Å–ø—ã—Ç–∞–Ω–∏–π.
  html += `</div>`;
  // –í–æ–ø–ª–æ—â–∞–µ–º –≤—Å—é —Å–æ–∑–¥–∞–Ω–Ω—É—é –º–∞–≥–∏—á–µ—Å–∫—É—é —Ñ–æ—Ä–º—É–ª—É –Ω–∞ –í–µ–ª–∏–∫–æ–º –ê–ª—Ç–∞—Ä–µ 'app'.
  app.innerHTML = html;
} // –ó–¥–µ—Å—å –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –í–µ–ª–∏–∫–æ–µ –ó–∞–∫–ª–∏–Ω–∞–Ω–∏–µ –ù–∞—á–µ—Ä—Ç–∞–Ω–∏—è.

// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –†–∏—Ç—É–∞–ª–∞ –ü—Ä–∏–∑—ã–≤–∞ –ö–≤–µ—Å—Ç–∞. –ú—ã –æ–±—Ä–∞—â–∞–µ–º—Å—è –∫ –∞—Ä—Ö–∏–≤–∞–º –∑–∞ —Å—É—â–Ω–æ—Å—Ç—å—é –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∏—Å–ø—ã—Ç–∞–Ω–∏—è.
async function loadAndRenderQuest(id) {
  // –°–Ω–æ–≤–∞ –Ω–∞—Ö–æ–¥–∏–º –Ω–∞—à –í–µ–ª–∏–∫–∏–π –ê–ª—Ç–∞—Ä—å 'app'.
  const app = document.getElementById("app");
  // –ü–æ–∫–∞ –∏–¥–µ—Ç –ø—Ä–∏–∑—ã–≤, –Ω–∞ –ê–ª—Ç–∞—Ä–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ç—É–º–∞–Ω –æ–∂–∏–¥–∞–Ω–∏—è, —Å–∫—Ä—ã–≤–∞—é—â–∏–π –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –≤–∏–¥–µ–Ω–∏—è.
  app.innerHTML = "<h2>–ó–∞–≥—Ä—É–∑–∫–∞...</h2>";
  // –ù–∞—á–∏–Ω–∞–µ–º —Ä–∏—Ç—É–∞–ª —Å –∑–∞—â–∏—Ç–Ω–æ–π —Ä—É–Ω–æ–π –æ—Ç —Å–±–æ–µ–≤.
  try {
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–æ–≤ –∫ –∞—Ä—Ö–∏–≤—É –∑–∞ –Ω—É–∂–Ω—ã–º —Å–≤–∏—Ç–∫–æ–º –∫–≤–µ—Å—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É—è —á–∞—Å—Ç–∏—Ü—É –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è —á–∏—Å—Ç–æ—Ç—ã –≤–∏–¥–µ–Ω–∏—è.
    const response = await fetch(`quests/quest_${id}.json?` + new Date().getTime());
    // –ï—Å–ª–∏ –¥—É—Ö–∏ –∞—Ä—Ö–∏–≤–∞ –Ω–µ –æ—Ç–≤–µ—á–∞—é—Ç –∏–ª–∏ —Å–≤–∏—Ç–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω, —Ä–∏—Ç—É–∞–ª –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π.
    if (!response.ok) throw new Error("File not found");
    // –ú—ã –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –≤ —á–∏—Å—Ç—É—é —ç—Å—Å–µ–Ω—Ü–∏—é –∫–≤–µ—Å—Ç–∞ –∏ –∂–¥–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.
    const questData = await response.json();
    // –í–æ–ø–ª–æ—â–∞–µ–º –ø–æ–ª—É—á–µ–Ω–Ω—É—é —ç—Å—Å–µ–Ω—Ü–∏—é –≤ –≤–∏–¥–µ –•—Ä–∞–º–∞ –ó–Ω–∞–Ω–∏–π –Ω–∞ –Ω–∞—à–µ–º –ê–ª—Ç–∞—Ä–µ.
    renderQuestView(questData);
    // –ï—Å–ª–∏ —Ä–∏—Ç—É–∞–ª –ø—Ä–∏–∑—ã–≤–∞ –±—ã–ª –ø—Ä–µ—Ä–≤–∞–Ω...
  } catch (e) {
    // ...–Ω–∞ –ê–ª—Ç–∞—Ä–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∞–¥–ø–∏—Å—å –æ–± –æ—à–∏–±–∫–µ –ø—Ä–∏–∑—ã–≤–∞.
    app.innerHTML = "<h2>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–≤–µ—Å—Ç–∞</h2>";
  } // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –∑–∞—â–∏—Ç–Ω–æ–π —Ä—É–Ω—ã.
} // –ó–¥–µ—Å—å –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –†–∏—Ç—É–∞–ª –ü—Ä–∏–∑—ã–≤–∞ –ö–≤–µ—Å—Ç–∞.

// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ó–∞–∫–ª–∏–Ω–∞–Ω–∏—è –í–æ–ø–ª–æ—â–µ–Ω–∏—è –•—Ä–∞–º–∞ –ó–Ω–∞–Ω–∏–π (–ê–≤—Ç–æ-—Ä–µ–∂–∏–º).
function renderQuestView(quest) {
  // –ú—ã –Ω–∞—Ö–æ–¥–∏–º –í–µ–ª–∏–∫–∏–π –ê–ª—Ç–∞—Ä—å 'app' –¥–ª—è –≤–æ–ø–ª–æ—â–µ–Ω–∏—è.
  const app = document.getElementById("app");
  // –ú—ã —Å–æ–∑–¥–∞–µ–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–ª–∞–Ω –•—Ä–∞–º–∞ –∫–∞–∫ –µ–¥–∏–Ω—É—é –º–∞–≥–∏—á–µ—Å–∫—É—é —Ñ–æ—Ä–º—É–ª—É.
  app.innerHTML = `
    <!-- –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –•—Ä–∞–º–∞, –ø—Ä–æ—è–≤–ª—è—é—â–∏–π—Å—è —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º –ø–ª–∞–≤–Ω–æ–≥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è. -->
    <div class="quest-layout fade-in">

        <!-- –õ–µ–≤–∞—è –ö–æ–ª–æ–Ω–Ω–∞: –•—Ä–∞–Ω–∏–ª–∏—â–µ –õ–µ–≥–µ–Ω–¥—ã. -->
        <div class="col col-legend">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–æ–ª–æ–Ω–Ω—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —Ä—É–Ω—É —Å–≤–∏—Ç–∫–∞. -->
            <div class="col-header">üìú –õ–ï–ì–ï–ù–î–ê</div>
            <!-- –û–±–ª–∞—Å—Ç—å –¥–ª—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏, –≥–¥–µ –∂–∏–≤–µ—Ç —Å–∞–º —Ç–µ–∫—Å—Ç –õ–µ–≥–µ–Ω–¥—ã. -->
            <div class="scroll-content markdown-body">
                <!-- –ì–ª–∞–≤–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∫–≤–µ—Å—Ç–∞ —Å –µ–≥–æ ID –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ–º. -->
                <h2>${quest.id} ${quest.title}</h2>
                <!-- –ù–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ–µ –≤–æ–ø–ª–æ—â–µ–Ω–∏–µ HTML-–∫–æ–¥–∞ –õ–µ–≥–µ–Ω–¥—ã. -->
                ${quest.legend}
            </div>
        </div>

        <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ö–æ–ª–æ–Ω–Ω–∞: –ê–ª—Ç–∞—Ä—å –ê–≤—Ç–æ-–¢–µ—Ä–º–∏–Ω–∞–ª–∞. -->
        <div class="col col-terminal">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–æ–ª–æ–Ω–Ω—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —Ä—É–Ω—É —Ç–µ—Ä–º–∏–Ω–∞–ª–∞. -->
            <div class="col-header">üíª –ê–í–¢–û-–¢–ï–†–ú–ò–ù–ê–õ</div>
            <!-- –û–∫–Ω–æ –ü—Ä–æ—Ä–∏—Ü–∞–Ω–∏—è, –≥–¥–µ –±—É–¥—É—Ç —è–≤–ª—è—Ç—å—Å—è –≤–∏–¥–µ–Ω–∏—è. -->
            <div class="terminal-window" id="term-window">
                <!-- –û–±–ª–∞—Å—Ç—å –¥–ª—è –≤—ã–≤–æ–¥–∞ –ª–µ—Ç–æ–ø–∏—Å–∏ —Ä–∏—Ç—É–∞–ª–∞. -->
                <div id="term-output">
                    <!-- –ù–∞—á–∞–ª—å–Ω–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–∏—Å—Ç–µ–º—ã. -->
                    <div class="sys-msg">Codex OS v2.0 Auto-Pilot loaded...</div>
                    <!-- –£–∫–∞–∑–∞–Ω–∏–µ —Ü–µ–ª–∏ —Ä–∏—Ç—É–∞–ª–∞ ‚Äî —Ç–µ–∫—É—â–µ–≥–æ –∫–≤–µ—Å—Ç–∞. -->
                    <div class="sys-msg">Target: Quest ${quest.id}</div>
                    <!-- –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –æ—Ç—Å—Ç—É–ø–∞. -->
                    <br>
                </div>
                <!-- –ê–∫—Ç–∏–≤–Ω–∞—è —Å—Ç—Ä–æ–∫–∞, –≥–¥–µ –±—É–¥–µ—Ç –∏–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤–≤–æ–¥. -->
                <div class="input-line" id="active-input-line">
                    <!-- –ü—Ä–∏–≥–ª–∞—à–∞—é—â–∏–π —Å–∏–≥–∏–ª —Ç–µ—Ä–º–∏–Ω–∞–ª–∞. -->
                    <span class="prompt">mage@codex:~$</span>
                    <!-- –î–∏—Å–ø–ª–µ–π, –≥–¥–µ –±—É–¥–µ—Ç –ø–µ—á–∞—Ç–∞—Ç—å—Å—è –∫–æ–º–∞–Ω–¥–∞. -->
                    <span id="term-input-display"></span>
                    <!-- –ü—É–ª—å—Å–∏—Ä—É—é—â–∏–π –∫—Ä–∏—Å—Ç–∞–ª–ª-–∫—É—Ä—Å–æ—Ä, –∑–Ω–∞–∫ –æ–∂–∏–¥–∞–Ω–∏—è. -->
                    <span class="cursor" style="animation: blink 1s infinite">‚ñà</span>
                </div>
            </div>
        </div>

        <!-- –ü—Ä–∞–≤–∞—è –ö–æ–ª–æ–Ω–Ω–∞: –•—Ä–∞–Ω–∏–ª–∏—â–µ –ú–∞–Ω–∏—Ñ–µ—Å—Ç–∞. -->
        <div class="col col-manifest">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–æ–ª–æ–Ω–Ω—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —Ä—É–Ω—É –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞. -->
            <div class="col-header">üì¶ –ú–ê–ù–ò–§–ï–°–¢</div>
            <!-- –û–±–ª–∞—Å—Ç—å –¥–ª—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏, –≥–¥–µ –∂–∏–≤–µ—Ç —Å–∞–º —Ç–µ–∫—Å—Ç –ú–∞–Ω–∏—Ñ–µ—Å—Ç–∞. -->
            <div class="scroll-content markdown-body">
                <!-- –ù–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ–µ –≤–æ–ø–ª–æ—â–µ–Ω–∏–µ HTML-–∫–æ–¥–∞ –ú–∞–Ω–∏—Ñ–µ—Å—Ç–∞. -->
                ${quest.manifest}
            </div>
        </div>

    </div>`;

  // –ú—ã –Ω–∞—Ö–æ–¥–∏–º –≤—Å–µ –ø—É—Ç–µ–≤–æ–¥–Ω—ã–µ –≥–ª–∏—Ñ—ã (—Å—Å—ã–ª–∫–∏) –≤ —Å–≤—è—â–µ–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–∞—Ö.
  const links = app.querySelectorAll(".markdown-body a");
  // –ú—ã –Ω–∞—á–∏–Ω–∞–µ–º —Ä–∏—Ç—É–∞–ª –∏–Ω—Å–ø–µ–∫—Ü–∏–∏, –ø—Ä–æ–≤–µ—Ä—è—è –∫–∞–∂–¥—ã–π –Ω–∞–π–¥–µ–Ω–Ω—ã–π –≥–ª–∏—Ñ.
  links.forEach((link) => {
    // –ï—Å–ª–∏ –≥–ª–∏—Ñ –≤–µ–¥–µ—Ç –≤–æ –≤–Ω–µ—à–Ω–∏–π –º–∏—Ä (–µ–≥–æ –ø—É—Ç—å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 'http')...
    if (link.href.startsWith("http")) {
      // ...–º—ã –Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ–º –Ω–∞ –Ω–µ–≥–æ —á–∞—Ä—ã, —á—Ç–æ–±—ã –æ–Ω –æ—Ç–∫—Ä—ã–≤–∞–ª –ø–æ—Ä—Ç–∞–ª –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ.
      link.target = "_blank";
      // ...–∏ –¥–æ–±–∞–≤–ª—è–µ–º –∑–∞—â–∏—Ç–Ω—É—é —Ä—É–Ω—É –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —ç—Ç–æ–≥–æ –ø–æ—Ä—Ç–∞–ª–∞.
      link.rel = "noopener noreferrer";
    }
  });

  // –ú—ã –ø—Ä–∏–∑—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω—ã–π —Ä–∏—Ç—É–∞–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–º—É–ª—è—Ü–∏–∏.
  runAutoScenario(quest);
}

// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –†–∏—Ç—É–∞–ª–∞ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ò—Å–ø–æ–ª–Ω–µ–Ω–∏—è –°—Ü–µ–Ω–∞—Ä–∏—è.
async function runAutoScenario(quest) {
  // –ú—ã –Ω–∞—Ö–æ–¥–∏–º –æ–±–ª–∞—Å—Ç—å –¥–ª—è –≤—ã–≤–æ–¥–∞ –≤–∏–¥–µ–Ω–∏–π.
  const output = document.getElementById("term-output");
  // –ú—ã –Ω–∞—Ö–æ–¥–∏–º –¥–∏—Å–ø–ª–µ–π, –≥–¥–µ –±—É–¥—É—Ç –ø–µ—á–∞—Ç–∞—Ç—å—Å—è –∫–æ–º–∞–Ω–¥—ã.
  const inputDisplay = document.getElementById("term-input-display");
  // –ú—ã –Ω–∞—Ö–æ–¥–∏–º —Å–∞–º–æ –û–∫–Ω–æ –ü—Ä–æ—Ä–∏—Ü–∞–Ω–∏—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π.
  const win = document.getElementById("term-window");
  // –ú—ã –Ω–∞—Ö–æ–¥–∏–º –∞–∫—Ç–∏–≤–Ω—É—é —Å—Ç—Ä–æ–∫—É –≤–≤–æ–¥–∞, —á—Ç–æ–±—ã —É–ø—Ä–∞–≤–ª—è—Ç—å –µ–µ –≤–∏–¥–∏–º–æ—Å—Ç—å—é.
  const activeLine = document.getElementById("active-input-line");

  // "–°—Ç—Ä–∞–∂-–ü—Ä–æ–≤–µ—Ä–∫–∞": –µ—Å–ª–∏ —Å–≤–∏—Ç–æ–∫ —Å—Ü–µ–Ω–∞—Ä–∏—è –ø—É—Å—Ç, —Ä–∏—Ç—É–∞–ª –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è.
  if (!quest.scenario || quest.scenario.length === 0) {
    // –ú—ã —Å–æ–æ–±—â–∞–µ–º –ú–∞–≥—É –æ –ø—Ä–æ–±–ª–µ–º–µ.
    output.innerHTML += `<div class="sys-msg" style="color:red">–°—Ü–µ–Ω–∞—Ä–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω.</div>`;
    // –ú—ã –ø—Ä–µ—Ä—ã–≤–∞–µ–º —Ä–∏—Ç—É–∞–ª.
    return;
  }

  // –ú—ã –¥–µ–ª–∞–µ–º –¥—Ä–∞–º–∞—Ç–∏—á–µ—Å–∫—É—é –ø–∞—É–∑—É –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –º–∞–≥–∏–∏.
  await new Promise((r) => setTimeout(r, 1000));

  // –ú—ã –Ω–∞—á–∏–Ω–∞–µ–º –º–∞–≥–∏—á–µ—Å–∫–∏–π –∫—Ä—É–≥, –ø—Ä–æ—Ö–æ–¥—è –ø–æ –∫–∞–∂–¥–æ–º—É —à–∞–≥—É —Å—Ü–µ–Ω–∞—Ä–∏—è.
  for (const step of quest.scenario) {
    // –ú—ã –∏–∑–≤–ª–µ–∫–∞–µ–º –°–ª–æ–≤–æ –°–∏–ª—ã –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —à–∞–≥–∞.
    const command = step.command;
    // –ú—ã –Ω–∞—á–∏–Ω–∞–µ–º —Ä–∏—Ç—É–∞–ª "–°–∞–º–æ–ø–∏—à—É—â–∏—Ö –†—É–Ω" –¥–ª—è –Ω–∞—á–µ—Ä—Ç–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã.
    for (let i = 0; i < command.length; i++) {
      // –ú—ã –¥–æ–±–∞–≤–ª—è–µ–º —Å–ª–µ–¥—É—é—â—É—é —Ä—É–Ω—É (—Å–∏–º–≤–æ–ª) –Ω–∞ –¥–∏—Å–ø–ª–µ–π.
      inputDisplay.textContent += command.charAt(i);
      // –ú—ã —Å–æ–≤–µ—Ä—à–∞–µ–º –∫—Ä–∞—Ç–∫—É—é, —Å–ª—É—á–∞–π–Ω—É—é –ø–∞—É–∑—É –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–≥–æ –Ω–∞–±–æ—Ä–∞.
      await new Promise((r) => setTimeout(r, 30 + Math.random() * 50));
    }

    // –ú—ã –¥–µ–ª–∞–µ–º –ø–∞—É–∑—É, —Å–ª–æ–≤–Ω–æ –ú–∞–≥ –∑–∞–¥—É–º–∞–ª—Å—è –ø–µ—Ä–µ–¥ –Ω–∞–∂–∞—Ç–∏–µ–º Enter.
    await new Promise((r) => setTimeout(r, 600));

    // –ú—ã —Å–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∑–∞–ø–∏—Å–∏ –ø—Ä–æ–∏–∑–Ω–µ—Å–µ–Ω–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã –≤ –ª–µ—Ç–æ–ø–∏—Å—å.
    const historyLine = document.createElement("div");
    // –ú—ã –≤–ø–∏—Å—ã–≤–∞–µ–º –≤ –Ω–µ–≥–æ —Å–∏–≥–∏–ª-–ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –∏ —Å–∞–º—É –∫–æ–º–∞–Ω–¥—É.
    historyLine.innerHTML = `<span class="prompt">mage@codex:~$</span> ${command}`;
    // –ú—ã –¥–æ–±–∞–≤–ª—è–µ–º —ç—Ç—É –∑–∞–ø–∏—Å—å –≤ –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–µ–Ω–∏–π.
    output.appendChild(historyLine);

    // –ú—ã –æ—á–∏—â–∞–µ–º –¥–∏—Å–ø–ª–µ–π, –≥–æ—Ç–æ–≤—è –µ–≥–æ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è.
    inputDisplay.textContent = "";

    // –ú—ã –≤—Ä–µ–º–µ–Ω–Ω–æ –¥–µ–ª–∞–µ–º —Å—Ç—Ä–æ–∫—É –≤–≤–æ–¥–∞ –Ω–µ–≤–∏–¥–∏–º–æ–π, –∏–º–∏—Ç–∏—Ä—É—è –∑–∞–Ω—è—Ç–æ—Å—Ç—å —Ç–µ—Ä–º–∏–Ω–∞–ª–∞.
    activeLine.style.visibility = "hidden";

    // –ú—ã –¥–µ–ª–∞–µ–º –ø–∞—É–∑—É, –∏–º–∏—Ç–∏—Ä—É—è –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã.
    await new Promise((r) => setTimeout(r, 500));

    // "–°—Ç—Ä–∞–∂-–ü—Ä–æ–≤–µ—Ä–∫–∞": –µ—Å–ª–∏ –¥–ª—è —ç—Ç–æ–≥–æ —à–∞–≥–∞ –µ—Å—Ç—å –æ—Ç–≤–µ—Ç...
    if (step.output) {
      // ...–º—ã –∑–∞–ø—É—Å–∫–∞–µ–º —Ä–∏—Ç—É–∞–ª "–°–∞–º–æ–ø–∏—à—É—â–∏–µ –†—É–Ω—ã" –¥–ª—è –≤—ã–≤–æ–¥–∞ –æ—Ç–≤–µ—Ç–∞.
      await typewriterEffect(output, step.output, win);
    }

    // –ú—ã –¥–æ–±–∞–≤–ª—è–µ–º –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è.
    output.innerHTML += `<br>`;
    // –ú—ã –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –û–∫–Ω–æ –ü—Ä–æ—Ä–∏—Ü–∞–Ω–∏—è –≤–Ω–∏–∑.
    win.scrollTop = win.scrollHeight;

    // –ú—ã —Å–Ω–æ–≤–∞ –¥–µ–ª–∞–µ–º —Å—Ç—Ä–æ–∫—É –≤–≤–æ–¥–∞ –≤–∏–¥–∏–º–æ–π, –ø–æ–∫–∞–∑—ã–≤–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Å–ª–µ–¥—É—é—â–µ–π –∫–æ–º–∞–Ω–¥–µ.
    activeLine.style.visibility = "visible";

    // –ú—ã –¥–µ–ª–∞–µ–º –ø–∞—É–∑—É, —á—Ç–æ–±—ã –ú–∞–≥ –º–æ–≥ –æ—Å–º—ã—Å–ª–∏—Ç—å —É–≤–∏–¥–µ–Ω–Ω–æ–µ.
    await new Promise((r) => setTimeout(r, 1000));
  }

  // –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ –º—ã —Å–∫—Ä—ã–≤–∞–µ–º —Å—Ç—Ä–æ–∫—É –≤–≤–æ–¥–∞ –Ω–∞–≤—Å–µ–≥–¥–∞.
  activeLine.style.display = "none";
  // –ú—ã –ø—Ä–∏–∑—ã–≤–∞–µ–º –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–µ "–û—Ç–∫—Ä—ã—Ç–∏–µ –ü—É—Ç–∏" –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∫–≤–µ—Å—Ç—É.
  showNextButton(quest, output);
  // –ú—ã —Ñ–∏–Ω–∞–ª—å–Ω–æ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –û–∫–Ω–æ –ü—Ä–æ—Ä–∏—Ü–∞–Ω–∏—è –≤–Ω–∏–∑.
  win.scrollTop = win.scrollHeight;
}

// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è "–°–∞–º–æ–ø–∏—à—É—â–∏–µ –†—É–Ω—ã" –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞ –º–∞–≥–∏—á–µ—Å–∫–æ–≥–æ –Ω–∞—á–µ—Ä—Ç–∞–Ω–∏—è.
async function typewriterEffect(container, text, scrollContainer) {
  // –ú—ã —Ä–∞–∑–¥–µ–ª—è–µ–º –≤—Å–µ –ø—Ä–æ—Ä–æ—á–µ—Å—Ç–≤–æ (—Ç–µ–∫—Å—Ç) –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏, —á—Ç–æ–±—ã –Ω–∞—á–µ—Ä—Ç–∞—Ç—å –∏—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ.
  const lines = Array.isArray(text) ? text : text.split("\n");
  // –ú—ã –Ω–∞—á–∏–Ω–∞–µ–º —Ä–∏—Ç—É–∞–ª –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏ –ø—Ä–æ—Ä–æ—á–µ—Å—Ç–≤–∞.
  for (const line of lines) {
    // –ú—ã —Å–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–∞–∂–¥–æ–π –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –≤–∏–¥–µ–Ω–∏—è.
    let lineDiv = document.createElement("div");
    // –ú—ã –ø—Ä–∏–¥–∞–µ–º –µ–º—É –æ–±–ª–∏–∫ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –Ω–∞—à–µ–π –∫–Ω–∏–≥–∏ —Å—Ç–∏–ª–µ–π.
    lineDiv.className = "sys-msg";
    // –ú—ã –¥–æ–±–∞–≤–ª—è–µ–º —ç—Ç–æ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ –û–∫–Ω–æ –ü—Ä–æ—Ä–∏—Ü–∞–Ω–∏—è.
    container.appendChild(lineDiv);

    // –ú—ã –Ω–∞—á–∏–Ω–∞–µ–º –Ω–∞—á–µ—Ä—Ç–∞–Ω–∏–µ —Ä—É–Ω, –ø–æ –æ–¥–Ω–æ–π –∑–∞ —Ä–∞–∑, –¥–ª—è —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–æ–∫–∏.
    for (let i = 0; i < line.length; i++) {
      // –ú—ã –¥–æ–±–∞–≤–ª—è–µ–º —Å–ª–µ–¥—É—é—â—É—é —Ä—É–Ω—É (—Å–∏–º–≤–æ–ª) –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å—Ç—Ä–æ–∫–∏.
      lineDiv.innerHTML += line.charAt(i);
      // –ú—ã –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –¥–µ—Ä–∂–∏–º –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–∞—á–µ—Ä—Ç–∞–Ω–Ω—É—é —Ä—É–Ω—É –≤ –ø–æ–ª–µ –∑—Ä–µ–Ω–∏—è, –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞—è –û–∫–Ω–æ.
      scrollContainer.scrollTop = scrollContainer.scrollHeight;
      // –ú—ã —Å–æ–≤–µ—Ä—à–∞–µ–º –∫—Ä–∞—Ç–∫—É—é –º–∞–≥–∏—á–µ—Å–∫—É—é –ø–∞—É–∑—É (5 –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥) –º–µ–∂–¥—É –Ω–∞—á–µ—Ä—Ç–∞–Ω–∏–µ–º —Ä—É–Ω.
      await new Promise((resolve) => setTimeout(resolve, 5));
    } // –ó–∞–≤–µ—Ä—à–∞–µ–º –Ω–∞—á–µ—Ä—Ç–∞–Ω–∏–µ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏.
  } // –ó–∞–≤–µ—Ä—à–∞–µ–º –Ω–∞—á–µ—Ä—Ç–∞–Ω–∏–µ –≤—Å–µ—Ö —Å—Ç—Ä–æ–∫ –ø—Ä–æ—Ä–æ—á–µ—Å—Ç–≤–∞.
} // –ó–¥–µ—Å—å –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–µ "–°–∞–º–æ–ø–∏—à—É—â–∏–µ –†—É–Ω—ã".

// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è "–û—Ç–∫—Ä—ã—Ç–∏–µ –ü—É—Ç–∏", —á—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –ø–æ—Ä—Ç–∞–ª –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∏—Å–ø—ã—Ç–∞–Ω–∏—é.
function showNextButton(quest, outputContainer) {
  // –ú—ã —Å–æ–∑–¥–∞–µ–º –∫–æ–ø–∏—é –ø–æ–ª–Ω–æ–π –ª–µ—Ç–æ–ø–∏—Å–∏ –≤—Å–µ—Ö –∫–≤–µ—Å—Ç–æ–≤ –∏ —Å–æ—Ä—Ç–∏—Ä—É–µ–º –µ–µ –ø–æ ID, —á—Ç–æ–±—ã –ø—É—Ç—å –±—ã–ª —è—Å–µ–Ω.
  const sortedQuests = [...INDEX_DATA.quests].sort(
    (a, b) => parseFloat(a.id) - parseFloat(b.id),
  );
  // –ú—ã –Ω–∞—Ö–æ–¥–∏–º –º–µ—Å—Ç–æ (–∏–Ω–¥–µ–∫—Å) —Ç–µ–∫—É—â–µ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–≥–æ –∫–≤–µ—Å—Ç–∞ –≤ —ç—Ç–æ–π —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–æ–π –ª–µ—Ç–æ–ø–∏—Å–∏.
  const currentIndex = sortedQuests.findIndex((q) => q.id === quest.id);

  // –ú—ã –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤–µ—Ç–≤–∏ —Å—É–¥—å–±—ã: –µ—Å–ª–∏ –∫–≤–µ—Å—Ç –Ω–∞–π–¥–µ–Ω –∏ –æ–Ω –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–º –≤ –ª–µ—Ç–æ–ø–∏—Å–∏...
  if (currentIndex !== -1 && currentIndex < sortedQuests.length - 1) {
    // ...–º—ã –æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Å–ª–µ–¥—É—é—â–∏–π –∫–≤–µ—Å—Ç –Ω–∞ –ø—É—Ç–∏.
    const nextQuest = sortedQuests[currentIndex + 1];
    // ...–∏ –º—ã —Å–æ—Ç–≤–æ—Ä—è–µ–º –≤ –û–∫–Ω–µ –ü—Ä–æ—Ä–∏—Ü–∞–Ω–∏—è —Å–∏—è—é—â–∏–π –ø–æ—Ä—Ç–∞–ª-–∫–Ω–æ–ø–∫—É,
    // –≤–µ–¥—É—â–∏–π –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∏—Å–ø—ã—Ç–∞–Ω–∏—é.
    outputContainer.innerHTML += `
      <!-- –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä-–ø–æ—Å—Ç–∞–º–µ–Ω—Ç –¥–ª—è –∫–Ω–æ–ø–∫–∏, —á—Ç–æ–±—ã –≤—ã—Ä–æ–≤–Ω—è—Ç—å –µ–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É
           –∏ –∑–∞–¥–∞—Ç—å –º–∞–≥–∏—á–µ—Å–∫–∏–µ –æ—Ç—Å—Ç—É–ø—ã. -->
      <div style="text-align: center; margin: 25px 0 15px 0;">
        <!-- –°–æ—Ç–≤–æ—Ä—è–µ–º —Å–∞–º –ø—É—Ç–µ–≤–æ–¥–Ω—ã–π –≥–ª–∏—Ñ (—Å—Å—ã–ª–∫—É-–∫–Ω–æ–ø–∫—É). -->
        <!-- –†—É–Ω–∞ 'href' —É–∫–∞–∑—ã–≤–∞–µ—Ç –ø—É—Ç—å –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∫–≤–µ—Å—Ç—É, –∏—Å–ø–æ–ª—å–∑—É—è –µ–≥–æ ID. -->
        <!-- –†—É–Ω–∞ 'class' –ø—Ä–∏–¥–∞–µ—Ç –µ–º—É –æ–±–ª–∏–∫ —Å–∏—è—é—â–µ–≥–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ 'btn-magic'. -->
        <a href="quest.html?id=${nextQuest.id}" class="btn-magic">
          <!-- –ù–∞—á–µ—Ä—Ç—ã–≤–∞–µ–º –Ω–∞ –∫–Ω–æ–ø–∫–µ –ø—Ä–∏–∑—ã–≤ –∫ –¥–µ–π—Å—Ç–≤–∏—é, —É–∫–∞–∑—ã–≤–∞—è –Ω–æ–º–µ—Ä —Å–ª–µ–¥—É—é—â–µ–≥–æ –∏—Å–ø—ã—Ç–∞–Ω–∏—è. -->
          –ö —Å–ª–µ–¥—É—é—â–µ–º—É –∫–≤–µ—Å—Ç—É: #${nextQuest.id} ‚Üí
        </a>
      </div>`; // –ó–¥–µ—Å—å –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Å–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ –ø–æ—Ä—Ç–∞–ª–∞.
    // –ï—Å–ª–∏ –∂–µ —ç—Ç–æ –±—ã–ª –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–≤–µ—Å—Ç...
  } else {
    // ...–º—ã —è–≤–ª—è–µ–º –≤ –û–∫–Ω–µ –ü—Ä–æ—Ä–∏—Ü–∞–Ω–∏—è –ø–æ–±–µ–¥–æ–Ω–æ—Å–Ω–æ–µ —Å–∏—è–Ω–∏–µ,
    // –∑–Ω–∞–º–µ–Ω—É—é—â–µ–µ –≤–µ–ª–∏–∫–∏–π —Ç—Ä–∏—É–º—Ñ –¢–µ—Ö–Ω–æ–º–∞–Ω—Ç–∞.
    outputContainer.innerHTML += `
      <!-- –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä-–ø—å–µ–¥–µ—Å—Ç–∞–ª –¥–ª—è —Ç—Ä–∏—É–º—Ñ–∞–ª—å–Ω–æ–≥–æ –ø–æ—Å–ª–∞–Ω–∏—è. -->
      <!-- –†—É–Ω–∞ 'class' –ø—Ä–∏–¥–∞–µ—Ç –µ–º—É –æ–±–ª–∏–∫ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è ('success-msg'). -->
      <!-- –†—É–Ω—ã —Å—Ç–∏–ª—è –≤—ã—Ä–∞–≤–Ω–∏–≤–∞—é—Ç –µ–≥–æ –ø–æ —Ü–µ–Ω—Ç—Ä—É –∏ –¥–æ–±–∞–≤–ª—è—é—Ç –æ—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É. -->
      <div class="success-msg" style="text-align:center; margin-top: 20px;">
        <!-- –ù–∞—á–µ—Ä—Ç—ã–≤–∞–µ–º —Å–∞–º–æ –ø–æ—Å–ª–∞–Ω–∏–µ, –æ–±—Ä–∞–º–ª–µ–Ω–Ω–æ–µ —Å–∏—è—é—â–∏–º–∏ –≥–ª–∏—Ñ–∞–º–∏. -->
        ‚ú® –í—ã –æ—Å–≤–æ–∏–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–≤–∏—Ç–æ–∫! ‚ú®
      </div>`; // –ó–¥–µ—Å—å –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Ä–∏—Ç—É–∞–ª —Ç—Ä–∏—É–º—Ñ–∞.
  } // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –≤–µ—Ç–≤–∏ —Å—É–¥—å–±—ã.
} // –ó–¥–µ—Å—å –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–µ "–û—Ç–∫—Ä—ã—Ç–∏–µ –ü—É—Ç–∏".
