// –ù–∞–¥–ø–∏—Å—å –Ω–∞ –ø–µ—Ä–≥–∞–º–µ–Ω—Ç–µ, –≥–ª–∞—Å—è—â–∞—è –æ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏ –Ω–∞—à–µ–≥–æ –ö—Ä–∏—Å—Ç–∞–ª–ª–∞ –ü–∞–º—è—Ç–∏.
// –ú—ã —Å–æ–∑–¥–∞–µ–º –Ω–∞—à –ö—Ä–∏—Å—Ç–∞–ª–ª –ü–∞–º—è—Ç–∏, INDEX_DATA, –≥–¥–µ –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è
// –≤—Å—è –º—É–¥—Ä–æ—Å—Ç—å –ö–æ–¥–µ–∫—Å–∞. –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –æ–Ω –ø—É—Å—Ç.
let INDEX_DATA = null;
// –≠—Ç–æ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–µ-—Å—Ç—Ä–∞–∂, —á—Ç–æ –∂–¥–µ—Ç –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è –Ω–∞—à–µ–≥–æ –º–∏—Ä–∞ (–ø–µ—Ä–≥–∞–º–µ–Ω—Ç–∞ HTML), –ø—Ä–µ–∂–¥–µ —á–µ–º –Ω–∞—á–∞—Ç—å –≥–ª–∞–≤–Ω—ã–π —Ä–∏—Ç—É–∞–ª.
document.addEventListener("DOMContentLoaded", async () => {
  // –ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º –º—ã —Ç–µ—Ä–ø–µ–ª–∏–≤–æ –≤–æ–ø—Ä–æ—à–∞–µ–º –û—Ä–∞–∫—É–ª–∞, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—É—é –∫–∞—Ä—Ç—É –º–∏—Ä–∞, –∏ –∂–¥–µ–º –µ–≥–æ –æ—Ç–≤–µ—Ç–∞.
  await loadIndex();
  // –ó–∞—Ç–µ–º –º—ã –æ–±—Ä–∞—â–∞–µ–º—Å—è –∫ –ú–∞–≥–∏—á–µ—Å–∫–æ–º—É –ö–æ–º–ø–∞—Å—É, —á—Ç–æ–±—ã –æ–Ω –æ–ø—Ä–µ–¥–µ–ª–∏–ª, –∫—É–¥–∞ –Ω–∞–ø—Ä–∞–≤–∏—Ç—å –¢–µ—Ö–Ω–æ–º–∞–Ω—Ç–∞.
  router();
}); // –ó–¥–µ—Å—å –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Ä–∏—Ç—É–∞–ª –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è –º–∏—Ä–∞.
// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –†–∏—Ç—É–∞–ª–∞ –í–æ–ø—Ä–æ—à–µ–Ω–∏—è –û—Ä–∞–∫—É–ª–∞, —á—Ç–æ —Å–≤—è–∑—ã–≤–∞–µ—Ç—Å—è —Å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º –≤—Å–µ—Ö –∑–Ω–∞–Ω–∏–π.
async function loadIndex() {
  // –ú—ã –Ω–∞—á–∏–Ω–∞–µ–º —Ä–∏—Ç—É–∞–ª —Å –∑–∞—â–∏—Ç–Ω–æ–π —Ä—É–Ω–æ–π, –≥–æ—Ç–æ–≤—ã–µ –∫ –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω—ã–º –ø–æ–º–µ—Ö–∞–º.
  try {
    // –ù–∞—à –∑–æ–≤ –∫ –û—Ä–∞–∫—É–ª—É (index.json). –ú—ã –¥–æ–±–∞–≤–ª—è–µ–º —á–∞—Å—Ç–∏—Ü—É —Ç–µ–∫—É—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, —á—Ç–æ–±—ã –≤–∏–¥–µ–Ω–∏–µ –±—ã–ª–æ —Å–≤–µ–∂–∏–º,
    // –∞ –Ω–µ –∏–∑ –∫—ç—à–∞ –¥—É—Ö–æ–≤-—Ö—Ä–∞–Ω–∏—Ç–µ–ª–µ–π.
    const response = await fetch("index.json?" + new Date().getTime());
    // –ú—ã –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –æ—Ç–≤–µ—Ç –û—Ä–∞–∫—É–ª–∞ –≤ —á–∏—Å—Ç—É—é —ç—Å—Å–µ–Ω—Ü–∏—é (JSON) –∏ —Ç–µ—Ä–ø–µ–ª–∏–≤–æ –∂–¥–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏.
    INDEX_DATA = await response.json();
    // –ï—Å–ª–∏ —Ä–∏—Ç—É–∞–ª –±—ã–ª –ø—Ä–µ—Ä–≤–∞–Ω –∏–ª–∏ –û—Ä–∞–∫—É–ª –º–æ–ª—á–∏—Ç, –∑–∞—â–∏—Ç–Ω–∞—è —Ä—É–Ω–∞ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è.
  } catch (e) {
    // –ú—ã –≤–∑—ã–≤–∞–µ–º –∫ –°–æ–∫—Ä—ã—Ç–æ–º—É –ó–Ω–∞–∫—É –û—à–∏–±–∫–∏, —á—Ç–æ –∂–¥–µ—Ç —Å–≤–æ–µ–≥–æ —á–∞—Å–∞ –≤ —á–µ—Ä—Ç–æ–≥–∞—Ö –ø–µ—Ä–≥–∞–º–µ–Ω—Ç–∞.
    const errorBlock = document.getElementById("error-message");
    // –ò–∑–≤–ª–µ–∫–∞–µ–º –∏–∑ –ó–Ω–∞–∫–∞ –µ–≥–æ —Å–µ—Ä–¥—Ü–µ (–∑–∞–≥–æ–ª–æ–≤–æ–∫) –∏ –Ω–∞–Ω–æ—Å–∏–º –Ω–∞ –Ω–µ–≥–æ —á–∏—Å—Ç—É—é —ç—Å—Å–µ–Ω—Ü–∏—é –≤–µ—Å—Ç–∏ –æ –±–µ–¥–µ.
    errorBlock.querySelector(".error-text").textContent =
      "–û—à–∏–±–∫–∞: index.json –Ω–µ –Ω–∞–π–¥–µ–Ω";
    // –ü—Ä–æ–∏–∑–Ω–æ—Å–∏–º –°–ª–æ–≤–æ –ü—Ä–æ—è–≤–ª–µ–Ω–∏—è, –¥–∞–±—ã –°–∫–æ—Ä–±–Ω—ã–π –ó–Ω–∞–∫ —Å—Ç–∞–ª —è–≤–µ–Ω –≤ –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω–æ–º –ø–ª–∞–Ω–µ.
    errorBlock.style.display = "block";
    // –ù–∞–∫–ª–∞–¥—ã–≤–∞–µ–º –≤—É–∞–ª—å –∑–∞–±–≤–µ–Ω–∏—è –Ω–∞ –í–µ–ª–∏–∫–∏–π –ê–ª—Ç–∞—Ä—å 'app', –∏–±–æ –æ–Ω –ª–∏—à–µ–Ω –∏—Å–∫—Ä—ã –∂–∏–∑–Ω–∏.
    document.getElementById("app").style.display = "none";
  } // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –∑–∞—â–∏—Ç–Ω–æ–π —Ä—É–Ω—ã.
} // –ó–¥–µ—Å—å –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –æ–ø–∏—Å–∞–Ω–∏–µ –†–∏—Ç—É–∞–ª–∞ –í–æ–ø—Ä–æ—à–µ–Ω–∏—è –û—Ä–∞–∫—É–ª–∞.
// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ú–∞–≥–∏—á–µ—Å–∫–æ–≥–æ –ö–æ–º–ø–∞—Å–∞, —á—Ç–æ —á–∏—Ç–∞–µ—Ç –∑–Ω–∞–∫–∏ –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ –∏ —É–∫–∞–∑—ã–≤–∞–µ—Ç –ø—É—Ç—å.
function router() {
  // –ú—ã –∏–∑—É—á–∞–µ–º –ø–∏—Å—å–º–µ–Ω–∞, –æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –≤ –ø—É—Ç–∏ (URL search params), —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –Ω–∞–º–µ—Ä–µ–Ω–∏–µ –¢–µ—Ö–Ω–æ–º–∞–Ω—Ç–∞.
  const params = new URLSearchParams(window.location.search);
  // –ï—Å–ª–∏ –≤ –ø–∏—Å—å–º–µ–Ω–∞—Ö –µ—Å—Ç—å —Å–∏–≥–∏–ª 'id', –∑–Ω–∞—á–∏—Ç, –º—ã –¥–æ–ª–∂–Ω—ã –æ—Ç–∫—Ä—ã—Ç—å –≤—Ä–∞—Ç–∞ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –∫–≤–µ—Å—Ç—É.
  if (params.has("id")) {
    // –ú—ã –ø—Ä–∏–∑—ã–≤–∞–µ–º —Å—É—â–Ω–æ—Å—Ç—å —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∫–≤–µ—Å—Ç–∞ –∏ –≤–æ–ø–ª–æ—â–∞–µ–º –µ–µ, –ø–µ—Ä–µ–¥–∞–≤–∞—è –µ–≥–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Å–∏–≥–∏–ª.
    loadAndRenderQuest(params.get("id"));
    // –ï—Å–ª–∏ –∂–µ –æ—Å–æ–±—ã—Ö —Å–∏–≥–∏–ª–æ–≤ –≤ –ø—É—Ç–∏ –Ω–µ—Ç...
  } else {
    // ...–º—ã –Ω–∞—á–µ—Ä—Ç–∞–µ–º –≥–ª–∞–≤–Ω—ã–π –ó–∞–ª –ò—Å–ø—ã—Ç–∞–Ω–∏–π, –≥–¥–µ –≤–∏–¥–Ω—ã –≤—Å–µ —á–∞—Å—Ç–∏ –ö–æ–¥–µ–∫—Å–∞.
    renderCodexPage();
  } // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –ø—É—Ç–∏.
} // –ó–¥–µ—Å—å –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞ –ú–∞–≥–∏—á–µ—Å–∫–æ–≥–æ –ö–æ–º–ø–∞—Å–∞.
// –í–µ–ª–∏–∫–æ–µ –ó–∞–∫–ª–∏–Ω–∞–Ω–∏–µ –ù–∞—á–µ—Ä—Ç–∞–Ω–∏—è, –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–Ω–æ–µ –Ω–∞ —á–∏—Å—Ç—ã—Ö –æ–±—ä–µ–∫—Ç–∞—Ö –±–µ–∑ –æ—à–∏–±–æ–∫.
function renderCodexPage() {
  // –ú—ã –Ω–∞—Ö–æ–¥–∏–º –í–µ–ª–∏–∫–∏–π –ê–ª—Ç–∞—Ä—å 'app', –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –Ω–∞—á–µ—Ä—Ç–∞–Ω–∏–µ.
  const app = document.getElementById("app");
  // –ú—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–∞–µ–º –ê–ª—Ç–∞—Ä—å, —á—Ç–æ–±—ã –æ–±—ä–µ–∫—Ç—ã –Ω–µ –Ω–∞–∫–ª–∞–¥—ã–≤–∞–ª–∏—Å—å –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞.
  app.innerHTML = "";
  // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –∫–≤–µ—Å—Ç—ã –∏–∑ –ø–ª–æ—Å–∫–æ–≥–æ —Å–ø–∏—Å–∫–∞ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É, —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—É—é –ø–æ –ß–∞—Å—Ç—è–º.
  const questsByPart = INDEX_DATA.quests.reduce((acc, quest) => {
    // –ï—Å–ª–∏ –ø–æ–ª–∫–∏ –¥–ª—è —ç—Ç–æ–π –ß–∞—Å—Ç–∏ –µ—â–µ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –º—ã —Å–æ–∑–¥–∞–µ–º –µ–µ.
    if (!acc[quest.partNumber]) acc[quest.partNumber] = [];
    // –ú—ã –∫–ª–∞–¥–µ–º —Å–≤–∏—Ç–æ–∫-–∫–≤–µ—Å—Ç –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –µ–º—É –ø–æ–ª–∫—É.
    acc[quest.partNumber].push(quest);
    return acc;
  }, {});
  // –ú—ã —Å–æ–∑–¥–∞–µ–º –≥–ª–∞–≤–Ω—ã–π –∂–∏–≤–æ–π –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ó–∞–ª–∞, –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–∞–∑–∞–≤—à–∏—Å—å –æ—Ç —Ç–µ–≥–æ–≤.
  const container = document.createElement("div");
  // –ú—ã –Ω–∞–¥–µ–ª—è–µ–º –µ–≥–æ —Å–∏–≥–∏–ª–∞–º–∏ (–∫–ª–∞—Å—Å–∞–º–∏) –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ —Å–≤–æ–π—Å—Ç–≤–∞ –æ–±—ä–µ–∫—Ç–∞.
  container.className = "home-scroll-container fade-in";
  // –ú—ã –±–µ—Ä–µ–º –∫–ª—é—á–∏ (–Ω–æ–º–µ—Ä–∞ –ß–∞—Å—Ç–µ–π) –∏ —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–µ–º –∏—Ö –ø–æ –ø–æ—Ä—è–¥–∫—É.
  Object.keys(questsByPart)
    .sort((a, b) => parseInt(a) - parseInt(b))
    .forEach((partKey) => {
      // –ò–∑–≤–ª–µ–∫–∞–µ–º –≤—Å–µ –∫–≤–µ—Å—Ç—ã —Ç–µ–∫—É—â–µ–π –ß–∞—Å—Ç–∏.
      const questsInPart = questsByPart[partKey];
      // –°–æ–∑–¥–∞–µ–º —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π —É–∑–µ–ª –¥–ª—è –ß–∞—Å—Ç–∏ –ö–æ–¥–µ–∫—Å–∞.
      const partDiv = document.createElement("div");
      // –î–∞–µ–º —É–∑–ª—É –∫–ª–∞—Å—Å, —á—Ç–æ–±—ã CSS-—á–∞—Ä—ã —É–∑–Ω–∞–ª–∏ –µ–≥–æ.
      partDiv.className = "part-container";
      // –í–æ–∑–¥–≤–∏–≥–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –ß–∞—Å—Ç–∏ –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç.
      const h2 = document.createElement("h2");
      // –ù–∞–Ω–æ—Å–∏–º –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–µ–∫—Å—Ç –Ω–∞–∑–≤–∞–Ω–∏—è –ß–∞—Å—Ç–∏.
      h2.textContent = questsInPart[0].partTitle;
      // –ö—Ä–µ–ø–∏–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∫ –ß–∞—Å—Ç–∏, –∞ –ß–∞—Å—Ç—å ‚Äî –∫ –≥–ª–∞–≤–Ω–æ–º—É –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—É.
      partDiv.appendChild(h2);
      container.appendChild(partDiv);
      // –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –ø—É—Å—Ç–æ–π –ª–∞—Ä–µ—Ü, –≥–¥–µ –∫–ª—é—á–∞–º–∏ —Å—Ç–∞–Ω—É—Ç –∏–º–µ–Ω–∞ –°–≤–∏—Ç–∫–æ–≤, –∞ —Å–æ–¥–µ—Ä–∂–∏–º—ã–º ‚Äî —Å–ø–∏—Å–∫–∏ –∏—Å–ø—ã—Ç–∞–Ω–∏–π.
      const scrolls = {};
      // –ù–∞—á–∏–Ω–∞–µ–º –æ–±—Ö–æ–¥ –≤—Å–µ—Ö –∫–≤–µ—Å—Ç–æ–≤, –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—â–∏—Ö —Ç–µ–∫—É—â–µ–π –ß–∞—Å—Ç–∏ –ö–æ–¥–µ–∫—Å–∞.
      questsInPart.forEach((q) => {
        // –ï—Å–ª–∏ –≤ –ª–∞—Ä—Ü–µ –µ—â–µ –Ω–µ—Ç –ø–æ–ª–∫–∏ –¥–ª—è –°–≤–∏—Ç–∫–∞ —Å —Ç–∞–∫–∏–º –∏–º–µ–Ω–µ–º ‚Äî –º—ã —Å–æ–∑–¥–∞–µ–º –µ—ë –∫–∞–∫ –Ω–æ–≤—ã–π –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫.
        if (!scrolls[q.scrollTitle]) scrolls[q.scrollTitle] = [];
        // –ü–æ–º–µ—â–∞–µ–º —Ç–µ–∫—É—â–∏–π –∫–≤–µ—Å—Ç –Ω–∞ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—É—é –µ–º—É –ø–æ–ª–∫—É –≤–Ω—É—Ç—Ä–∏ –ª–∞—Ä—Ü–∞ –°–≤–∏—Ç–∫–æ–≤.
        scrolls[q.scrollTitle].push(q);
        // –ó–∞–≤–µ—Ä—à–∞–µ–º –≤–µ–ª–∏–∫–∏–π —Ü–∏–∫–ª —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–≤–µ—Å—Ç–æ–≤ –ø–æ –∏—Ö –∏–º–µ–Ω–∞–º.
      });
      // –ü–µ—Ä–µ–±–∏—Ä–∞–µ–º –∫–∞–∂–¥—ã–π —Å–æ–∑–¥–∞–Ω–Ω—ã–π –°–≤–∏—Ç–æ–∫ –≤ —ç—Ç–æ–π –ß–∞—Å—Ç–∏.
      for (const scrollTitle in scrolls) {
        // –°–æ–∑–¥–∞–µ–º —É–∑–µ–ª –¥–ª—è –°–≤–∏—Ç–∫–∞.
        const scrollDiv = document.createElement("div");
        // –ù–∞–¥–µ–ª—è–µ–º –µ–≥–æ –∫–ª–∞—Å—Å–æ–º 'scroll-container'.
        scrollDiv.className = "scroll-container";
        // –°–æ–∑–¥–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –°–≤–∏—Ç–∫–∞ –∏ –≤–ø–∏—Å—ã–≤–∞–µ–º –µ–≥–æ –∏–º—è.
        const h3 = document.createElement("h3");
        h3.textContent = scrollTitle;
        // –°–æ–∑–¥–∞–µ–º –°–µ—Ç–∫—É (grid), –≥–¥–µ –±—É–¥—É—Ç –ª–µ–∂–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏.
        const gridDiv = document.createElement("div");
        gridDiv.className = "quest-grid";
        // –°–æ–±–∏—Ä–∞–µ–º –∏–µ—Ä–∞—Ä—Ö–∏—é: –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Å–µ—Ç–∫—É –≤ —Å–≤–∏—Ç–æ–∫, —Å–≤–∏—Ç–æ–∫ ‚Äî –≤ —á–∞—Å—Ç—å.
        scrollDiv.append(h3, gridDiv);
        partDiv.appendChild(scrollDiv);
        // –°–æ—Ä—Ç–∏—Ä—É–µ–º –∫–≤–µ—Å—Ç—ã –∏ –ø—Ä–µ–≤—Ä–∞—â–∞–µ–º –∫–∞–∂–¥—ã–π –≤ –∂–∏–≤–æ–π –æ–±—ä–µ–∫—Ç –∫–∞—Ä—Ç–æ—á–∫–∏.
        scrolls[scrollTitle]
          .sort((a, b) => parseFloat(a.id) - parseFloat(b.id))
          .forEach((q) => {
            // –°–æ–∑–¥–∞–µ–º —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π —É–∑–µ–ª –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–≤–µ—Å—Ç–∞.
            const card = document.createElement("div");
            // –ù–∞–∑–Ω–∞—á–∞–µ–º –∫–ª–∞—Å—Å—ã –∫–∞—Ä—Ç–æ—á–∫–∏ –∏ –µ—ë —Å—Ç–∞—Ç—É—Å (active/locked).
            card.className = "quest-card " + q.status;
            // –ï—Å–ª–∏ –∫–≤–µ—Å—Ç –∞–∫—Ç–∏–≤–µ–Ω, –≤–µ—à–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞–ø—Ä—è–º—É—é –Ω–∞ –æ–±—ä–µ–∫—Ç.
            if (q.status === "active") {
              // –ú—ã –≤–¥—ã—Ö–∞–µ–º –≤ –∫–∞—Ä—Ç–æ—á–∫—É –∏—Å–∫—Ä—É –¥–µ–π—Å—Ç–≤–∏—è, —á—Ç–æ–±—ã –ø—Ä–∏ –∫–ª–∏–∫–µ –æ–Ω–∞
              // –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞–ª–∞ –ø–æ—Ä—Ç–∞–ª –∫ –∫–≤–µ—Å—Ç—É —Å –Ω—É–∂–Ω—ã–º ID.
              card.onclick = () => {
                window.location.href = "quest.html?id=" + q.id;
              };
            }
            // –°–æ–∑–¥–∞–µ–º —É–∑–µ–ª –¥–ª—è –Ω–æ–º–µ—Ä–∞ –∫–≤–µ—Å—Ç–∞ –∏ –≤—Å—Ç–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç.
            const qId = document.createElement("div");
            qId.className = "q-id";
            qId.textContent = "–ö–≤–µ—Å—Ç " + q.id;
            // –°–æ–∑–¥–∞–µ–º —É–∑–µ–ª –¥–ª—è –Ω–∞–∑–≤–∞–Ω–∏—è –∫–≤–µ—Å—Ç–∞ –∏ –≤—Å—Ç–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç.
            const qTitle = document.createElement("div");
            qTitle.className = "q-title";
            qTitle.textContent = q.title;
            // –°–∫–ª–∞–¥—ã–≤–∞–µ–º –Ω–æ–º–µ—Ä –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤–Ω—É—Ç—Ä—å –∫–∞—Ä—Ç–æ—á–∫–∏, –∞ –∫–∞—Ä—Ç–æ—á–∫—É ‚Äî –≤ —Å–µ—Ç–∫—É.
            card.append(qId, qTitle);
            gridDiv.appendChild(card);
          });
      }
    });
  // –í–æ–ø–ª–æ—â–∞–µ–º –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–±—Ä–∞–Ω–Ω—ã–π –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞ –ê–ª—Ç–∞—Ä–µ 'app'.
  app.appendChild(container);
} // –ó–¥–µ—Å—å –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –í–µ–ª–∏–∫–æ–µ –ó–∞–∫–ª–∏–Ω–∞–Ω–∏–µ –ù–∞—á–µ—Ä—Ç–∞–Ω–∏—è.
// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –†–∏—Ç—É–∞–ª–∞ –ü—Ä–∏–∑—ã–≤–∞ –ö–≤–µ—Å—Ç–∞. –ú—ã –æ–±—Ä–∞—â–∞–µ–º—Å—è –∫ –∞—Ä—Ö–∏–≤–∞–º –∑–∞ —Å—É—â–Ω–æ—Å—Ç—å—é –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∏—Å–ø—ã—Ç–∞–Ω–∏—è.
async function loadAndRenderQuest(id) {
  // –°–Ω–æ–≤–∞ –Ω–∞—Ö–æ–¥–∏–º –Ω–∞—à –í–µ–ª–∏–∫–∏–π –ê–ª—Ç–∞—Ä—å 'app'.
  const app = document.getElementById("app");
  // –ú—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–∞–µ–º –ê–ª—Ç–∞—Ä—å 'app', —É–±–∏—Ä–∞—è –≤—Å–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –≤–∏–¥–µ–Ω–∏—è.
  app.innerHTML = "";
  // –ú—ã —Å–æ–∑–¥–∞–µ–º –∂–∏–≤–æ–π —É–∑–µ–ª –∑–∞–≥–æ–ª–æ–≤–∫–∞ –¥–ª—è —Ç—É–º–∞–Ω–∞ –æ–∂–∏–¥–∞–Ω–∏—è.
  const loadingH2 = document.createElement("h2");
  // –ú—ã –≤–¥—ã—Ö–∞–µ–º —Ç–µ–∫—Å—Ç –æ–∂–∏–¥–∞–Ω–∏—è –≤ –∑–∞–≥–æ–ª–æ–≤–æ–∫, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—è HTML-—Ç–µ–≥–∏.
  loadingH2.textContent = "–ó–∞–≥—Ä—É–∑–∫–∞...";
  // –ú—ã –ø–æ–º–µ—â–∞–µ–º —ç—Ç–æ—Ç –æ–±—ä–µ–∫—Ç –Ω–∞ –ê–ª—Ç–∞—Ä—å, —á—Ç–æ–±—ã –¢–µ—Ö–Ω–æ–º–∞–Ω—Ç –≤–∏–¥–µ–ª –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–∏–∑—ã–≤–∞.
  app.appendChild(loadingH2);
  // –ù–∞—á–∏–Ω–∞–µ–º —Ä–∏—Ç—É–∞–ª —Å –∑–∞—â–∏—Ç–Ω–æ–π —Ä—É–Ω–æ–π –æ—Ç —Å–±–æ–µ–≤.
  try {
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–æ–≤ –∫ –∞—Ä—Ö–∏–≤—É –∑–∞ –Ω—É–∂–Ω—ã–º —Å–≤–∏—Ç–∫–æ–º –∫–≤–µ—Å—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É—è —á–∞—Å—Ç–∏—Ü—É –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è —á–∏—Å—Ç–æ—Ç—ã –≤–∏–¥–µ–Ω–∏—è.
    const response = await fetch(`quests/quest_${id}.json?` + new Date().getTime());
    // –ï—Å–ª–∏ –¥—É—Ö–∏ –∞—Ä—Ö–∏–≤–∞ –Ω–µ –æ—Ç–≤–µ—á–∞—é—Ç –∏–ª–∏ —Å–≤–∏—Ç–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω, —Ä–∏—Ç—É–∞–ª –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π.
    if (!response.ok) throw new Error("File not found");
    // –ú—ã –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –≤ —á–∏—Å—Ç—É—é —ç—Å—Å–µ–Ω—Ü–∏—é –∫–≤–µ—Å—Ç–∞ –∏ –∂–¥–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.
    const questData = await response.json();
    // –í–æ–ø–ª–æ—â–∞–µ–º –ø–æ–ª—É—á–µ–Ω–Ω—É—é —ç—Å—Å–µ–Ω—Ü–∏—é –≤ –≤–∏–¥–µ –•—Ä–∞–º–∞ –ó–Ω–∞–Ω–∏–π –Ω–∞ –Ω–∞—à–µ–º –ê–ª—Ç–∞—Ä–µ.
    renderQuestView(questData);
    // –ï—Å–ª–∏ —Ä–∏—Ç—É–∞–ª –ø—Ä–∏–∑—ã–≤–∞ –±—ã–ª –ø—Ä–µ—Ä–≤–∞–Ω...
  } catch (e) {
    // –ú—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–∞–µ–º –ê–ª—Ç–∞—Ä—å 'app', –¥–∞–±—ã —Å—Ç–∞—Ä—ã–µ –≤–∏–¥–µ–Ω–∏—è –Ω–µ –º–µ—à–∞–ª–∏ –ó–Ω–∞–∫—É –û—à–∏–±–∫–∏.
    app.innerHTML = "";
    // –ú—ã —Å–æ—Ç–≤–æ—Ä—è–µ–º –∂–∏–≤–æ–π —É–∑–µ–ª –∑–∞–≥–æ–ª–æ–≤–∫–∞ –¥–ª—è –≤–µ—Å—Ç–∏ –æ –Ω–µ—É–¥–∞—á–Ω–æ–º –ø—Ä–∏–∑—ã–≤–µ.
    const errorH2 = document.createElement("h2");
    // –ú—ã –Ω–∞–Ω–æ—Å–∏–º –Ω–∞ –Ω–µ–≥–æ –ø–∏—Å—å–º–µ–Ω–∞ —Å–∫–æ—Ä–±–∏ —á–µ—Ä–µ–∑ —á–∏—Å—Ç—É—é —Ç–µ–∫—Å—Ç–æ–≤—É—é —ç—Å—Å–µ–Ω—Ü–∏—é.
    errorH2.textContent = "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–≤–µ—Å—Ç–∞";
    // –ú—ã –∑–∞–∫—Ä–µ–ø–ª—è–µ–º —ç—Ç–æ—Ç —É–∑–µ–ª –Ω–∞ –ê–ª—Ç–∞—Ä–µ, –æ–±—ä—è–≤–ª—è—è –æ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–∏ —Ä–∏—Ç—É–∞–ª–∞.
    app.appendChild(errorH2);
  } // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –∑–∞—â–∏—Ç–Ω–æ–π —Ä—É–Ω—ã.
} // –ó–¥–µ—Å—å –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –†–∏—Ç—É–∞–ª –ü—Ä–∏–∑—ã–≤–∞ –ö–≤–µ—Å—Ç–∞.
// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ó–∞–∫–ª–∏–Ω–∞–Ω–∏—è –í–æ–ø–ª–æ—â–µ–Ω–∏—è –•—Ä–∞–º–∞ –ó–Ω–∞–Ω–∏–π (–ê–≤—Ç–æ-—Ä–µ–∂–∏–º).
function renderQuestView(quest) {
  // –ú—ã –Ω–∞—Ö–æ–¥–∏–º –í–µ–ª–∏–∫–∏–π –ê–ª—Ç–∞—Ä—å 'app' –¥–ª—è –≤–æ–ø–ª–æ—â–µ–Ω–∏—è.
  const app = document.getElementById("app");
  // –ú—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–∞–µ–º –ê–ª—Ç–∞—Ä—å –ø–µ—Ä–µ–¥ –≤–æ–∑–≤–µ–¥–µ–Ω–∏–µ–º –•—Ä–∞–º–∞.
  app.innerHTML = "";
  // –°–æ–∑–¥–∞–µ–º –≥–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–∞–∫–µ—Ç–∞ —Å —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è.
  const layout = document.createElement("div");
  // –ù–∞–¥–µ–ª—è–µ–º –µ–≥–æ —Å–∏–≥–∏–ª–∞–º–∏ (–∫–ª–∞—Å—Å–∞–º–∏) –¥–ª—è —Å–≤—è–∑–∏ —Å CSS.
  layout.className = "quest-layout fade-in";
  // --- –ö–û–õ–û–ù–ù–ê 1: –õ–ï–ì–ï–ù–î–ê ---
  const colLegend = document.createElement("div");
  colLegend.className = "col col-legend";
  // –°–æ–∑–¥–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∫–æ–ª–æ–Ω–Ω—ã –∏ –Ω–∞–ø–æ–ª–Ω—è–µ–º –µ–≥–æ —Ç–µ–∫—Å—Ç–æ–º.
  const headerLegend = document.createElement("div");
  headerLegend.className = "col-header";
  headerLegend.textContent = "üìú –õ–ï–ì–ï–ù–î–ê";
  // –°–æ–∑–¥–∞–µ–º –æ–±–ª–∞—Å—Ç—å —Å–∫—Ä–æ–ª–ª–∞ –¥–ª—è —Ç–µ–∫—Å—Ç–∞ –õ–µ–≥–µ–Ω–¥—ã.
  const scrollLegend = document.createElement("div");
  scrollLegend.className = "scroll-content markdown-body";
  // –í–æ–∑–¥–≤–∏–≥–∞–µ–º –≥–ª–∞–≤–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∫–≤–µ—Å—Ç–∞.
  const h2 = document.createElement("h2");
  h2.textContent = `${quest.id} ${quest.title}`;
  // –í–∫–ª–∞–¥—ã–≤–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Å–∞–º–æ —Ç–µ–ª–æ –õ–µ–≥–µ–Ω–¥—ã (–∑–¥–µ—Å—å innerHTML –¥–æ–ø—É—Å—Ç–∏–º, —Ç–∞–∫ –∫–∞–∫ –¥–∞–Ω–Ω—ã–µ –∏–∑ JSON).
  scrollLegend.appendChild(h2);
  // –ú—ã —Å–æ—Ç–≤–æ—Ä—è–µ–º —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π —Å–æ—Å—É–¥ (–±–ª–æ–∫ div), –∫–æ—Ç–æ—Ä—ã–π —Å—Ç–∞–Ω–µ—Ç –≤–º–µ—Å—Ç–∏–ª–∏—â–µ–º –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –∫–≤–µ—Å—Ç–∞.
  const legendBody = document.createElement("div");
  // –ù–∞–ø–æ–ª–Ω—è–µ–º —Å–æ—Å—É–¥ —ç—Å—Å–µ–Ω—Ü–∏–µ–π –ª–µ–≥–µ–Ω–¥—ã –∏ —Å—Ä–∞–∑—É –≤—à–∏–≤–∞–µ–º –µ–≥–æ –≤ —Ç–µ–ª–æ –°–≤–∏—Ç–∫–∞ –ü—Ä–æ–∫—Ä—É—Ç–∫–∏.
  legendBody.innerHTML = quest.legend;
  scrollLegend.appendChild(legendBody);
  // –°–æ–±–∏—Ä–∞–µ–º –∫–æ–ª–æ–Ω–Ω—É –õ–µ–≥–µ–Ω–¥—ã.
  colLegend.append(headerLegend, scrollLegend);
  // --- –ö–û–õ–û–ù–ù–ê 2: –¢–ï–†–ú–ò–ù–ê–õ ---
  const colTerminal = document.createElement("div");
  // –ú—ã –Ω–∞—Ä–µ–∫–∞–µ–º –∫–æ–ª–æ–Ω–Ω—É –∏–º–µ–Ω–∞–º–∏ –°–∏–ª—ã, —á—Ç–æ–±—ã CSS-—á–∞—Ä—ã —É–∑–Ω–∞–ª–∏ –µ—ë –∏ –Ω–∞–¥–µ–ª–∏–ª–∏ –æ–±–ª–∏–∫–æ–º –ë–µ–∑–¥–Ω—ã.
  colTerminal.className = "col col-terminal";
  // –ú—ã —Å–æ—Ç–≤–æ—Ä—è–µ–º –∏–∑ –ø—É—Å—Ç–æ—Ç—ã —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π —É–∑–µ–ª –¥–ª—è –ö–∞–ø–∏—Ç–µ–ª–∏ (–∑–∞–≥–æ–ª–æ–≤–∫–∞) —Ç–µ—Ä–º–∏–Ω–∞–ª–∞.
  const headerTerminal = document.createElement("div");
  // –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –ö–∞–ø–∏—Ç–µ–ª–∏ –µ—ë —Å–∏–≥–∏–ª –∏ –Ω–∞–Ω–æ—Å–∏–º –Ω–µ–∑—ã–±–ª–µ–º—ã–µ —Ä—É–Ω—ã –Ω–∞–∑–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ —Ç–µ–∫—Å—Ç–æ–≤—É—é —ç—Å—Å–µ–Ω—Ü–∏—é.
  headerTerminal.className = "col-header";
  headerTerminal.textContent = "üíª –ê–í–¢–û-–¢–ï–†–ú–ò–ù–ê–õ";
  // –°–æ–∑–¥–∞–µ–º –û–∫–Ω–æ –ü—Ä–æ—Ä–∏—Ü–∞–Ω–∏—è (Terminal Window).
  const termWin = document.createElement("div");
  // –ù–∞–¥–µ–ª—è–µ–º –û–∫–Ω–æ —Å–∏–≥–∏–ª–æ–º –∫–ª–∞—Å—Å–∞ –¥–ª—è —Å–≤—è–∑–∏ —Å–æ –°–≤–∏—Ç–∫–æ–º –°—Ç–∏–ª–µ–π –∏
  // –¥–∞—Ä—É–µ–º –µ–º—É —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –ò—Å—Ç–∏–Ω–Ω–æ–µ –ò–º—è (ID) –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤ –∞—Å—Ç—Ä–∞–ª–µ.
  termWin.className = "terminal-window";
  termWin.id = "term-window";
  // –ú–µ—Å—Ç–æ –¥–ª—è –≤—ã–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞.
  const termOutput = document.createElement("div");
  // –ù–∞–∑–Ω–∞—á–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–æ—Å—É–¥—É –≤—ã–≤–æ–¥–∞,
  // —á—Ç–æ–±—ã –û—Ä–∞–∫—É–ª –∑–Ω–∞–ª, –∫—É–¥–∞ –Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ—Ç–æ–∫ —Å–≤–æ–∏—Ö –ø—Ä–æ—Ä–∏—Ü–∞–Ω–∏–π.
  termOutput.id = "term-output";
  // –°–æ–∑–¥–∞–µ–º –∞–∫—Ç–∏–≤–Ω—É—é —Å—Ç—Ä–æ–∫—É –≤–≤–æ–¥–∞ (Active Input Line).
  const activeLine = document.createElement("div");
  // –ú—ã –Ω–∞–¥–µ–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é —Å—Ç—Ä–æ–∫—É —Å–∏–≥–∏–ª–æ–º –∫–ª–∞—Å—Å–∞ –∏
  // —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –ò—Å—Ç–∏–Ω–Ω—ã–º –ò–º–µ–Ω–µ–º –¥–ª—è —Å–≤—è–∑–∏ —Å –∞—Å—Ç—Ä–∞–ª–æ–º —Å—Ç–∏–ª–µ–π –∏ –ø–æ–∏—Å–∫–∞ –≤ –∫–æ–¥–µ.
  activeLine.className = "input-line";
  activeLine.id = "active-input-line";
  // –ú—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–∞–µ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫–∏ –æ—Ç –ø—Ä–∏–∑—Ä–∞–∫–æ–≤ —Å—Ç–∞—Ä–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ.
  activeLine.innerHTML = "";
  // –ú—ã —Å–æ—Ç–≤–æ—Ä—è–µ–º —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π —É–∑–µ–ª –¥–ª—è –ø—É—Ç–µ–≤–æ–¥–Ω–æ–≥–æ –∑–Ω–∞–∫–∞ (–ø—Ä–æ–º–ø—Ç–∞).
  const pSpan = document.createElement("span");
  // –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –∑–Ω–∞–∫—É –∫–ª–∞—Å—Å 'prompt', —á—Ç–æ–±—ã –æ–Ω –≤—Å–ø—ã—Ö–Ω—É–ª –º–∞–≥–∏—á–µ—Å–∫–∏–º –ø—É—Ä–ø—É—Ä–æ–º.
  pSpan.className = "prompt";
  // –ù–∞–Ω–æ—Å–∏–º –Ω–∞ –∑–Ω–∞–∫ –Ω–µ–∑—ã–±–ª–µ–º—ã–µ —Ä—É–Ω—ã –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –∫ –¥–µ–π—Å—Ç–≤–∏—é.
  pSpan.textContent = "magus@codex:~$ ";
  // –°–æ–∑–¥–∞–µ–º —É–∑–µ–ª, –∫–æ—Ç–æ—Ä—ã–π —Å—Ç–∞–Ω–µ—Ç –∑–µ—Ä–∫–∞–ª–æ–º –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–≤–æ–¥–∏–º—ã—Ö –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π.
  const iDisplay = document.createElement("span");
  // –î–∞—Ä—É–µ–º –µ–º—É ID, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É —Å–∫—Ä–∏–ø—Ç –±—É–¥–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å –µ–≥–æ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞.
  iDisplay.id = "term-input-display";
  // –ú—ã –≤–æ–ø–ª–æ—â–∞–µ–º –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω—É—é —Ñ–æ—Ä–º—É –¥–ª—è –º–∏–≥–∞—é—â–µ–≥–æ –∫—É—Ä—Å–æ—Ä–∞.
  const cur = document.createElement("span");
  // –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –∫—É—Ä—Å–æ—Ä—É –µ–≥–æ –∫–ª–∞—Å—Å–æ–≤–æ–µ –∏–º—è.
  cur.className = "cursor";
  // –ú—ã –≤–¥—ã—Ö–∞–µ–º –∂–∏–∑–Ω—å –≤ –∫—É—Ä—Å–æ—Ä, –∑–∞—Å—Ç–∞–≤–ª—è—è –µ–≥–æ –≤–µ—á–Ω–æ –ø—É–ª—å—Å–∏—Ä–æ–≤–∞—Ç—å –≤ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–º —Ü–∏–∫–ª–µ.
  cur.style.animation = "blink 1s infinite";
  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –≤–∏–∑—É–∞–ª—å–Ω—ã–π –æ–±–ª–∏–∫ –∫—É—Ä—Å–æ—Ä–∞ –≤ –≤–∏–¥–µ —Å–≤—è—â–µ–Ω–Ω–æ–≥–æ –º–æ–Ω–æ–ª–∏—Ç–∞.
  cur.textContent = "‚ñà";
  // –ú—ã –æ–±—ä–µ–¥–∏–Ω—è–µ–º –ø—Ä–æ–º–ø—Ç, –æ–±–ª–∞—Å—Ç—å –≤–≤–æ–¥–∞ –∏ –∫—É—Ä—Å–æ—Ä –≤ –µ–¥–∏–Ω–æ–µ —Ü–µ–ª–æ–µ –≤–Ω—É—Ç—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–π —Å—Ç—Ä–æ–∫–∏.
  activeLine.append(pSpan, iDisplay, cur);
  // –°–æ–±–∏—Ä–∞–µ–º –¢–µ—Ä–º–∏–Ω–∞–ª.
  termWin.append(termOutput, activeLine);
  // –ú—ã –æ–±—ä–µ–¥–∏–Ω—è–µ–º –∫–∞–ø–∏—Ç–µ–ª—å (–∑–∞–≥–æ–ª–æ–≤–æ–∫) –∏ —Å–∞–º–æ –æ–∫–Ω–æ –ø—Ä–æ—Ä–∏—Ü–∞–Ω–∏–π –≤ –µ–¥–∏–Ω—ã–π —Å—Ç–æ–ª–ø –¢–µ—Ä–º–∏–Ω–∞–ª–∞,
  // –∑–∞–≤–µ—Ä—à–∞—è –µ–≥–æ –≤–æ–ø–ª–æ—â–µ–Ω–∏–µ –≤ –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω–æ–º –ø–ª–∞–Ω–µ.
  colTerminal.append(headerTerminal, termWin);
  // --- –ö–û–õ–û–ù–ù–ê 3: –ú–ê–ù–ò–§–ï–°–¢ ---
  const colManifest = document.createElement("div");
  // –ù–∞–¥–µ–ª—è–µ–º —Ç—Ä–µ—Ç—å—é –∫–æ–ª–æ–Ω–Ω—É –∏–º–µ–Ω–∞–º–∏ –°–∏–ª—ã, —á—Ç–æ–±—ã CSS-—á–∞—Ä—ã –æ–±–ª–∞—á–∏–ª–∏ –µ—ë –≤ —Ñ–æ—Ä–º—É –ú–∞–Ω–∏—Ñ–µ—Å—Ç–∞.
  colManifest.className = "col col-manifest";
  // –ò–∑–≤–ª–µ–∫–∞–µ–º –∏–∑ –ø—É—Å—Ç–æ—Ç—ã –Ω–æ–≤—ã–π —É–∑–µ–ª –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ö–∞–ø–∏—Ç–µ–ª–∏ (–∑–∞–≥–æ–ª–æ–≤–∫–∞) –ú–∞–Ω–∏—Ñ–µ—Å—Ç–∞.
  const headerManifest = document.createElement("div");
  // –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –ö–∞–ø–∏—Ç–µ–ª–∏ –µ—ë —Å–∏–≥–∏–ª –∏ –Ω–∞–Ω–æ—Å–∏–º –Ω–µ–∑—ã–±–ª–µ–º–æ–µ –∏–º—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ —á–µ—Ä–µ–∑ —Ç–µ–∫—Å—Ç–æ–≤—É—é —ç—Å—Å–µ–Ω—Ü–∏—é.
  headerManifest.className = "col-header";
  headerManifest.textContent = "üì¶ –ú–ê–ù–ò–§–ï–°–¢";
  // –°–æ—Ç–≤–æ—Ä—è–µ–º —Å–æ—Å—É–¥ –°–≤–∏—Ç–∫–∞, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è —Ç–∞–π–Ω—ã–µ –∑–Ω–∞–Ω–∏—è –∏ —Ü–µ–ª–∏ –∏—Å–ø—ã—Ç–∞–Ω–∏—è.
  const scrollManifest = document.createElement("div");
  // –û–∫—É—Ç—ã–≤–∞–µ–º –°–≤–∏—Ç–æ–∫ —á–∞—Ä–∞–º–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –∏ –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –µ–≥–æ –∫ –ø—Ä–∏–Ω—è—Ç–∏—é Markdown-—Ä—É–Ω.
  scrollManifest.className = "scroll-content markdown-body";
  // –í–∫–ª–∞–¥—ã–≤–∞–µ–º —Ç–µ–ª–æ –ú–∞–Ω–∏—Ñ–µ—Å—Ç–∞.
  const manifestBody = document.createElement("div");
  // –ù–∞–ø–æ–ª–Ω—è–µ–º —Ç–µ–ª–æ –ú–∞–Ω–∏—Ñ–µ—Å—Ç–∞ —Å–≤—è—â–µ–Ω–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º –∏ –≤—à–∏–≤–∞–µ–º –µ–≥–æ –≤ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º—ã–π —Å–≤–∏—Ç–æ–∫.
  manifestBody.innerHTML = quest.manifest;
  scrollManifest.appendChild(manifestBody);
  // –°–æ–µ–¥–∏–Ω—è–µ–º –≤–æ–µ–¥–∏–Ω–æ –∫–∞–ø–∏—Ç–µ–ª—å –∏ —Å–≤–∏—Ç–æ–∫, –∑–∞–≤–µ—Ä—à–∞—è –≤–æ–∑–≤–µ–¥–µ–Ω–∏–µ —Ç—Ä–µ—Ç—å–µ–π –∫–æ–ª–æ–Ω–Ω—ã ‚Äî —Å—Ç–æ–ª–ø–∞ –ú–∞–Ω–∏—Ñ–µ—Å—Ç–∞.
  colManifest.append(headerManifest, scrollManifest);
  // --- –§–ò–ù–ê–õ–¨–ù–û–ï –í–û–ü–õ–û–©–ï–ù–ò–ï ---
  // –û–±—ä–µ–¥–∏–Ω—è–µ–º –≤—Å–µ –∫–æ–ª–æ–Ω–Ω—ã –≤ –≥–ª–∞–≤–Ω–æ–º –º–∞–∫–µ—Ç–µ –∏ –∫—Ä–µ–ø–∏–º –∫ –ê–ª—Ç–∞—Ä—é.
  layout.append(colLegend, colTerminal, colManifest);
  // –ú—ã –≤–æ–∑–Ω–æ—Å–∏–º –≥–æ—Ç–æ–≤—É—é –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –Ω–∞ –í–µ–ª–∏–∫–∏–π –ê–ª—Ç–∞—Ä—å,
  // —è–≤–ª—è—è —Ç—Ä–∏–ø—Ç–∏—Ö –∫–≤–µ—Å—Ç–∞ –≤–æ –≤—Å–µ–π –µ–≥–æ –ø–æ–ª–Ω–æ—Ç–µ –≤–∑–æ—Ä—É –¢–µ—Ö–Ω–æ–º–∞–Ω—Ç–∞.
  app.appendChild(layout);
  // –ú—ã –Ω–∞—Ö–æ–¥–∏–º –≤—Å–µ –ø—É—Ç–µ–≤–æ–¥–Ω—ã–µ –≥–ª–∏—Ñ—ã (—Å—Å—ã–ª–∫–∏) –≤ —Å–≤—è—â–µ–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–∞—Ö.
  const links = app.querySelectorAll(".markdown-body a");
  // –ú—ã –Ω–∞—á–∏–Ω–∞–µ–º —Ä–∏—Ç—É–∞–ª –∏–Ω—Å–ø–µ–∫—Ü–∏–∏, –ø—Ä–æ–≤–µ—Ä—è—è –∫–∞–∂–¥—ã–π –Ω–∞–π–¥–µ–Ω–Ω—ã–π –≥–ª–∏—Ñ.
  links.forEach((link) => {
    // –ï—Å–ª–∏ –≥–ª–∏—Ñ –≤–µ–¥–µ—Ç –≤–æ –≤–Ω–µ—à–Ω–∏–π –º–∏—Ä (–µ–≥–æ –ø—É—Ç—å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 'http')...
    if (link.href.startsWith("http")) {
      // ...–º—ã –Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ–º –Ω–∞ –Ω–µ–≥–æ —á–∞—Ä—ã, —á—Ç–æ–±—ã –æ–Ω –æ—Ç–∫—Ä—ã–≤–∞–ª –ø–æ—Ä—Ç–∞–ª –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ.
      link.target = "_blank";
      // ...–∏ –¥–æ–±–∞–≤–ª—è–µ–º –∑–∞—â–∏—Ç–Ω—É—é —Ä—É–Ω—É –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —ç—Ç–æ–≥–æ –ø–æ—Ä—Ç–∞–ª–∞.
      link.rel = "noopener noreferrer";
    }
  });
  // –ú—ã –ø—Ä–∏–∑—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω—ã–π —Ä–∏—Ç—É–∞–ª —Å–∏–º—É–ª—è—Ü–∏–∏.
  renderStaticTerminal(quest);
}
// –ú—ã –Ω–∞—á–∏–Ω–∞–µ–º –æ–±—Ä—è–¥ –≤–æ–ø–ª–æ—â–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞, –æ–±—Ä–∞—â–∞—è—Å—å –∫ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–º –¥–∞–Ω–Ω—ã–º –∫–≤–µ—Å—Ç–∞.
function renderStaticTerminal(quest) {
  // –ú—ã –Ω–∞—Ö–æ–¥–∏–º –≤ –∞—Å—Ç—Ä–∞–ª–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —É—Å—Ç—å–µ –≤—ã–≤–æ–¥–∞, –≥–¥–µ –ø—Ä–æ—è–≤—è—Ç—Å—è —Å–ª–æ–≤–∞ –û—Ä–∞–∫—É–ª–∞.
  const output = document.getElementById("term-output");
  // –ú—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Å–≤—è–∑—å —Å –∞–∫—Ç–∏–≤–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π, –≥–¥–µ –º–∞–≥ —Ç–≤–æ—Ä–∏—Ç —Å–≤–æ–∏ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è.
  const activeLine = document.getElementById("active-input-line");
  // –ú—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–æ–Ω—Ç–∞–∫—Ç —Å —Å–∞–º–∏–º –û–∫–Ω–æ–º –ë–µ–∑–¥–Ω—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –µ–≥–æ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏.
  const win = document.getElementById("term-window");
  // –ú—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–∞–µ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –≤—ã–≤–æ–¥–∞ –æ—Ç —Ç–µ–Ω–µ–π –ø—Ä–æ—à–ª—ã—Ö —Å–µ—Å—Å–∏–π.
  output.innerHTML = ""; // –ß–∏—Å—Ç–∏–º –ø–æ–ª–µ
  // –ú—ã –≤–æ–ø—Ä–æ—à–∞–µ–º –û—Ä–∞–∫—É–ª–∞: —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Å—Ü–µ–Ω–∞—Ä–∏–π –¥–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø—ã—Ç–∞–Ω–∏—è –∏–ª–∏ –≤ –¥–∞–Ω–Ω—ã—Ö –ø—É—Å—Ç–æ—Ç–∞?
  if (!quest.scenario || quest.scenario.length === 0) {
    // –ï—Å–ª–∏ —Å—Ü–µ–Ω–∞—Ä–∏–π —Å–æ–∫—Ä—ã—Ç, –º—ã —Å–æ–∑–¥–∞–µ–º —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π —É–∑–µ–ª –¥–ª—è –≤–µ—Å—Ç–Ω–∏–∫–∞ –Ω–µ—É–¥–∞—á–∏.
    const err = document.createElement("div");
    // –ú—ã –æ–±–ª–∞—á–∞–µ–º –≤–µ—Å—Ç–Ω–∏–∫–∞ –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –æ–¥–µ–∂–¥—ã –∏ –æ–∫—Ä–∞—à–∏–≤–∞–µ–º –µ–≥–æ —Å–ª–æ–≤–∞ –≤ —Ü–≤–µ—Ç —è—Ä–æ—Å—Ç–∏ (–∫—Ä–∞—Å–Ω—ã–π).
    err.className = "sys-msg";
    err.style.color = "red";
    // –ú—ã –Ω–∞–Ω–æ—Å–∏–º –Ω–∞ —É–∑–µ–ª —Å—É—Ä–æ–≤–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –ø—Ä–æ–ø–∞–∂–µ –¥–∞–Ω–Ω—ã—Ö.
    err.textContent = "–°—Ü–µ–Ω–∞—Ä–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω.";
    // –ú—ã –≤—ã–≤–æ–¥–∏–º —ç—Ç–æ –∑–Ω–∞–º–µ–Ω–∏–µ –≤ –ø–æ–ª–µ –∑—Ä–µ–Ω–∏—è –¢–µ—Ö–Ω–æ–º–∞–Ω—Ç–∞.
    output.appendChild(err);
    // –ú—ã —Å–∫—Ä—ã–≤–∞–µ–º –∞–∫—Ç–∏–≤–Ω—É—é —Å—Ç—Ä–æ–∫—É –≤–≤–æ–¥–∞, –∏–±–æ –±–µ–∑ —Å—Ü–µ–Ω–∞—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏—è –Ω–µ –∏–º–µ—é—Ç —Å–º—ã—Å–ª–∞.
    activeLine.style.display = "none";
    // –ú—ã –ø—Ä–µ—Ä—ã–≤–∞–µ–º —Ä–∏—Ç—É–∞–ª, –Ω–µ –∏–º–µ—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–≤–∏–≥–∞—Ç—å—Å—è –¥–∞–ª—å—à–µ.
    return;
  }
  // –ú—ã —Å–æ–∑–¥–∞–µ–º –≤–µ—Å—Ç–Ω–∏–∫–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è, –≤–æ–∑–≤–µ—â–∞—é—â–µ–≥–æ –æ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–∏ –ê–≤—Ç–æ–ø–∏–ª–æ—Ç–∞ –ö–æ–¥–µ–∫—Å–∞.
  const welcome = document.createElement("div");
  // –û–±–ª–∞—á–∞–µ–º –≤–µ—Å—Ç–Ω–∏–∫–∞ –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –æ–¥–µ–∂–¥—ã –∏ –Ω–∞–Ω–æ—Å–∏–º —Ä—É–Ω—ã –≤–µ—Ä—Å–∏–∏ –û–°.
  welcome.className = "sys-msg";
  welcome.textContent = "Codex OS v3.0 Auto-Pilot loaded...";
  // –ü–æ–º–µ—â–∞–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –≤ —É—Å—Ç—å–µ –≤—ã–≤–æ–¥–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞.
  output.appendChild(welcome);
  // –ú—ã –Ω–∞—á–∏–Ω–∞–µ–º –≤–µ–ª–∏–∫–æ–µ —à–µ—Å—Ç–≤–∏–µ –ø–æ —ç—Ç–∞–ø–∞–º —Å—Ü–µ–Ω–∞—Ä–∏—è, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ –≤ –ø–∞–º—è—Ç–∏ –∫–≤–µ—Å—Ç–∞.
  quest.scenario.forEach((step) => {
    // –°–æ—Ç–≤–æ—Ä—è–µ–º —Å–æ—Å—É–¥ –¥–ª—è —Å—Ç—Ä–æ–∫–∏ –∫–æ–º–∞–Ω–¥—ã, –∏–º–∏—Ç–∏—Ä—É—é—â–µ–π –¥–µ–π—Å—Ç–≤–∏—è –º–∞–≥–∞.
    const cmdLine = document.createElement("div");
    // –°–æ–∑–¥–∞–µ–º —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π —É–∑–µ–ª –¥–ª—è –∑–Ω–∞–∫–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è (–ø—Ä–æ–º–ø—Ç–∞).
    const pSpan = document.createElement("span");
    // –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –∑–Ω–∞–∫—É –µ–≥–æ –∫–ª–∞—Å—Å–æ–≤—ã–π —Å–∏–≥–∏–ª 'prompt'.
    pSpan.className = "prompt";
    // –ù–∞–Ω–æ—Å–∏–º –Ω–∞ –∑–Ω–∞–∫ –Ω–µ–∑—ã–±–ª–µ–º—ã–π —Ç–µ–∫—Å—Ç –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –∫ –¥–µ–π—Å—Ç–≤–∏—é.
    pSpan.textContent = "magus@codex:~$ ";
    // –°–æ–µ–¥–∏–Ω—è–µ–º –∑–Ω–∞–∫ –ø—Ä–æ–º–ø—Ç–∞ –∏ —Ç–µ–∫—Å—Ç –∫–æ–º–∞–Ω–¥—ã –≤ –µ–¥–∏–Ω—ã–π –ø–æ—Ç–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è.
    cmdLine.append(pSpan, step.command);
    // –Ø–≤–ª—è–µ–º —Å—Ç—Ä–æ–∫—É –∫–æ–º–∞–Ω–¥—ã –≤–∑–æ—Ä—É –¢–µ—Ö–Ω–æ–º–∞–Ω—Ç–∞ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ.
    output.appendChild(cmdLine);
    // –ï—Å–ª–∏ –û—Ä–∞–∫—É–ª —Å–æ—Ö—Ä–∞–Ω–∏–ª –≤ –ø–∞–º—è—Ç–∏ –æ—Ç–≤–µ—Ç –Ω–∞ —ç—Ç—É –∫–æ–º–∞–Ω–¥—É, –º—ã –ø—Ä–∏—Å—Ç—É–ø–∞–µ–º –∫ –µ–≥–æ –ø—Ä–æ—è–≤–ª–µ–Ω–∏—é.
    if (step.output) {
      // –°–æ–∑–¥–∞–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–π –±–ª–æ–∫ –¥–ª—è –≤—ã–≤–æ–¥–∞ —ç—Å—Å–µ–Ω—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞.
      const outBlock = document.createElement("div");
      // –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –µ–º—É —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è.
      outBlock.className = "sys-msg";
      // –°–æ—Ç–≤–æ—Ä—è–µ–º —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥—Ä–µ–≤–Ω–∏—Ö —Ä—É–Ω (—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è).
      const pre = document.createElement("pre");
      // –°–æ–∑–¥–∞–µ–º —É–∑–µ–ª –¥–ª—è —á–∏—Å—Ç–æ–≥–æ –∫–æ–¥–∞, –∑–∞—â–∏—â–µ–Ω–Ω–æ–≥–æ –æ—Ç –∏—Å–∫–∞–∂–µ–Ω–∏–π.
      const code = document.createElement("code");
      // –ü–µ—Ä–µ–Ω–æ—Å–∏–º —Ç–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞ –∏–∑ —Å—Ü–µ–Ω–∞—Ä–∏—è –≤ —Å–µ—Ä–¥—Ü–µ –∫–æ–¥–∞.
      code.textContent = step.output;
      // –í–∫–ª–∞–¥—ã–≤–∞–µ–º –∫–æ–¥ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç–∞.
      pre.appendChild(code);
      // –ü–æ–º–µ—â–∞–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤ –æ–±—â–∏–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –±–ª–æ–∫ –æ—Ç–≤–µ—Ç–∞.
      outBlock.appendChild(pre);
      // –Ø–≤–ª—è–µ–º –≥–æ—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç –≤ –ø–æ–ª–µ –∑—Ä–µ–Ω–∏—è –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ.
      output.appendChild(outBlock);
    }
  });
  // –ú—ã —Å–∫—Ä—ã–≤–∞–µ–º –∞–∫—Ç–∏–≤–Ω—É—é —Å—Ç—Ä–æ–∫—É –≤–≤–æ–¥–∞, –∑–∞–≤–µ—Ä—à–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é.
  activeLine.style.display = "none";
  // –ü—Ä–∏–∑—ã–≤–∞–µ–º —Ä–∏—Ç—É–∞–ª —Å–æ—Ç–≤–æ—Ä–µ–Ω–∏—è –ü—É—Ç–µ–≤–æ–¥–Ω–æ–π –ö–Ω–æ–ø–∫–∏ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∏—Å–ø—ã—Ç–∞–Ω–∏—é.
  showNextButton(quest, output);
  // –ú—ã –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –û–∫–Ω–æ –ë–µ–∑–¥–Ω—ã –¥–æ —Å–∞–º–æ–≥–æ –Ω–∏–∑–∞, —á—Ç–æ–±—ã —è–≤–∏—Ç—å –ú–∞–≥—É –ø–æ—Å–ª–µ–¥–Ω–∏–µ –æ—Ç–∫—Ä–æ–≤–µ–Ω–∏—è.
  win.scrollTop = win.scrollHeight;
}
// –ù–∞—á–∞–ª–æ —Ä–∏—Ç—É–∞–ª–∞ —Å–æ—Ç–≤–æ—Ä–µ–Ω–∏—è –ü—É—Ç–µ–≤–æ–¥–Ω–æ–π –ö–Ω–æ–ø–∫–∏, —Å–≤—è–∑—ã–≤–∞—é—â–µ–≥–æ —Ç–µ–∫—É—â–∏–π –∫–≤–µ—Å—Ç —Å –±—É–¥—É—â–∏–º.
function showNextButton(quest, outputContainer) {
  // –ú—ã —Å–æ–∑–¥–∞–µ–º —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–æ–µ –∑–µ—Ä–∫–∞–ª–æ –≤—Å–µ—Ö –∫–≤–µ—Å—Ç–æ–≤, —Ä–∞—Å—Å—Ç–∞–≤–ª—è—è –∏—Ö –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é ID.
  const sortedQuests = [...INDEX_DATA.quests].sort(
    (a, b) => parseFloat(a.id) - parseFloat(b.id),
  );
  // –ò—â–µ–º –ø–æ–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –∏—Å–ø—ã—Ç–∞–Ω–∏—è –≤ –æ–±—â–µ–º —Å—Ç—Ä–æ—é –°–≤–∏—Ç–∫–æ–≤.
  const currentIndex = sortedQuests.findIndex((q) => q.id === quest.id);
  // –ï—Å–ª–∏ –ø—É—Ç—å –Ω–µ –æ–∫–æ–Ω—á–µ–Ω –∏ –≤–ø–µ—Ä–µ–¥–∏ –µ—Å—Ç—å –µ—â–µ –Ω–µ–∏–∑–≤–µ–¥–∞–Ω–Ω—ã–µ –∫–≤–µ—Å—Ç—ã...
  if (currentIndex !== -1 && currentIndex < sortedQuests.length - 1) {
    // –ú—ã –ø—Ä–æ–∑—Ä–µ–≤–∞–µ–º —Å—É—Ç—å —Å–ª–µ–¥—É—é—â–µ–≥–æ –∏—Å–ø—ã—Ç–∞–Ω–∏—è –≤ —Å–ø–∏—Å–∫–µ.
    const nextQuest = sortedQuests[currentIndex + 1];
    // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä-–ª–∞—Ä–µ—Ü –¥–ª—è –±—É–¥—É—â–µ–π –∫–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞.
    const btnBox = document.createElement("div");
    // –ù–∞–¥–µ–ª—è–µ–º –ª–∞—Ä–µ—Ü –∫–ª–∞—Å—Å–æ–º –¥–ª—è —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ.
    btnBox.className = "next-btn-container";
    // –°–æ–∑–¥–∞–µ–º –º–∞–≥–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—Ç–∞–ª-—Å—Å—ã–ª–∫—É –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è.
    const nextBtn = document.createElement("a");
    // –í—ã–∫–æ–≤—ã–≤–∞–µ–º –∞–¥—Ä–µ—Å –ø–æ—Ä—Ç–∞–ª–∞, –∏—Å–ø–æ–ª—å–∑—É—è —Å–∏–≥–∏–ª (ID) —Å–ª–µ–¥—É—é—â–µ–≥–æ –∫–≤–µ—Å—Ç–∞.
    nextBtn.href = "quest.html?id=" + nextQuest.id;
    // –û–±–ª–∞—á–∞–µ–º —Å—Å—ã–ª–∫—É –≤ –æ–¥–µ–∂–¥—ã –º–∞–≥–∏—á–µ—Å–∫–æ–π –∫–Ω–æ–ø–∫–∏.
    nextBtn.className = "btn-magic";
    // –ù–∞–Ω–æ—Å–∏–º –Ω–∞ –∫–Ω–æ–ø–∫—É —Ç–µ–∫—Å—Ç —Å –Ω–æ–º–µ—Ä–æ–º –≥—Ä—è–¥—É—â–µ–≥–æ –∏—Å–ø—ã—Ç–∞–Ω–∏—è.
    nextBtn.textContent = "–ö–≤–µ—Å—Ç " + nextQuest.id + " ‚Üí";
    // –ü–æ–º–µ—â–∞–µ–º –≥–æ—Ç–æ–≤—É—é –∫–Ω–æ–ø–∫—É –≤ –µ—ë –ª–∞—Ä–µ—Ü.
    btnBox.appendChild(nextBtn);
    // –í—ã–≤–æ–¥–∏–º –ª–∞—Ä–µ—Ü —Å –∫–Ω–æ–ø–∫–æ–π –≤ —Ñ–∏–Ω–∞–ª—å–Ω—É—é —á–∞—Å—Ç—å —Ç–µ—Ä–º–∏–Ω–∞–ª–∞.
    outputContainer.appendChild(btnBox);
  } else {
    // –ï—Å–ª–∏ –∂–µ —ç—Ç–æ –±—ã–ª –ø–æ—Å–ª–µ–¥–Ω–∏–π –°–≤–∏—Ç–æ–∫ –≤ –õ–µ—Ç–æ–ø–∏—Å–∏, –º—ã —Å–æ–∑–¥–∞–µ–º –≤–µ—Å—Ç–Ω–∏–∫–∞ —Ç—Ä–∏—É–º—Ñ–∞.
    const winMsg = document.createElement("div");
    // –û–±–ª–∞—á–∞–µ–º –≤–µ—Å—Ç–Ω–∏–∫–∞ –≤ –æ–¥–µ–∂–¥—ã —É—Å–ø–µ—Ö–∞.
    winMsg.className = "success-msg";
    // –ù–∞–Ω–æ—Å–∏–º —Ä—É–Ω—ã –≤—ã—Å—à–µ–≥–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è.
    winMsg.textContent = "‚ú® –í—ã –æ—Å–≤–æ–∏–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–≤–∏—Ç–æ–∫! ‚ú®";
    // –Ø–≤–ª—è–µ–º –≤–µ—Å—Ç–Ω–∏–∫–∞ —Ç—Ä–∏—É–º—Ñ–∞ –¢–µ—Ö–Ω–æ–º–∞–Ω—Ç—É.
    outputContainer.appendChild(winMsg);
  }
}
