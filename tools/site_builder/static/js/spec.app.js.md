# app.js Specification

## 1. Meta Information

- **Domain:** Scripting
- **Complexity:** Medium
- **Language:** TypeScript
- **Frameworks:** DOM API, Fetch API
- **Context:** Independent Artifact

## 2. Goal & Purpose (–¶–µ–ª—å –∏ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ)

–û–ø–∏—à–∏ –±–∏–∑–Ω–µ—Å-–∑–∞–¥–∞—á—É –∫—Ä–∞—Ç–∫–æ. –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç –º–æ–¥—É–ª—å?

–ñ–∏–≤–æ–π –†–∏—Ç—É–∞–ª –ö–æ–¥–µ–∫—Å–∞ –Ω–∞ –≤–µ–±-–ø–ª–∞–Ω–µ. –≠—Ç–æ—Ç —Ñ–∞–π–ª —É–ø—Ä–∞–≤–ª—è–µ—Ç –æ–¥–Ω–∏–º –Ω–∞—à–∏–º –ö—Ä–∏—Å—Ç–∞–ª–ª–æ–º –ü–∞–º—è—Ç–∏ INDEX_DATA –∏ –µ–≥–æ —Å–æ—Å—É–¥–∞–º–∏ –≤ –ó–∞–ª–µ –ò—Å–ø—ã—Ç–∞–Ω–∏–π. –û–Ω –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∑–∞–≥—Ä—É–∑–∫—É –∫–∞—Ä—Ç—ã –∑–Ω–∞–Ω–∏–π –∏–∑ index.json, –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫—É –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —á–∞—Å—Ç–∏ –ö–æ–¥–µ–∫—Å–∞ –∫–∞–∫ —Å–≤–∏—Ç–∫–æ–≤ –∏ —Å–≤–∏—Ç–∫–æ–≤ –∫–∞–∫ –∫–≤–µ—Å—Ç–æ–≤, –∞ —Ç–∞–∫–∂–µ –∑–∞ –ø—Ä–∏–∑—ã–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–≤–∏—Ç–∫–∞ –∫–≤–µ—Å—Ç–∞ –ø–æ –∑–∞–ø—Ä–æ—Å—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –í —Å–ª—É—á–∞–µ —É–¥–∞—á–∏ ‚Äî —Å–æ–∑–¥–∞—é—Ç—Å—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–∞—Ä—Ç—ã, –ª–µ–≥–µ–Ω–¥—ã –∏ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –æ–∫–Ω–µ –±—Ä–∞—É–∑–µ—Ä–∞; –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ ‚Äî –≤—ã–≤–æ–¥–∏—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –∏ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≥–ª–∞–≤–Ω—ã–π –∞–ª—Ç–∞—Ä—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## 3. Interface Contract (–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω—ã–π –ö–æ–Ω—Ç—Ä–∞–∫—Ç)

### 3.1. Inputs (–í—Ö–æ–¥—ã)

Source: URL_PARAMS

Format: JSON-like –¥–∞–Ω–Ω—ã–µ, –ø–æ–ª—É—á–∞–µ–º—ã–µ –ø–æ —Å–µ—Ç–∏ –∏ –∏–∑ –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

Schema (TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã)

InputData:
id?: string
indexData?: IndexData
questData?: QuestDetail

IndexData:
quests: QuestSummary[]

QuestSummary:
id: string
partNumber: string
partTitle: string
scrollTitle: string
status: string
title: string
manifest: string
// –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ–ø–æ–∑–Ω–∞—é—Ç—Å—è –¥–∞–ª—å—à–µ –∫–æ–¥–æ–º

QuestDetail:
id: string
title: string
legend: string
manifest: string
scenario: Array<{
command: string
output?: string
}>

### 3.2. Outputs (–í—ã—Ö–æ–¥—ã)

Destination: STDOUT

Format: JSON | Text (—á–µ—Ä–µ–∑ DOM-–æ–∫–Ω–∞, –Ω–æ –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è—Ö –≤—ã—Å—Ç—É–ø–∞–µ—Ç –∫–∞–∫ –≤—ã–≤–æ–¥ –Ω–∞ —ç–∫—Ä–∞–Ω)

Success Criteria: boolean flag –∏ —Å–æ–æ–±—â–µ–Ω–∏–µ

OutputResult:
success: boolean
message?: string
renderedQuestId?: string
nextStepHint?: string

## 4. Implementation Details (The Source DNA / –ò—Å—Ö–æ–¥–Ω—ã–π –ö–æ–¥)

### 4.1. Algorithmic Logic (–î–ª—è –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ –∫–æ–¥–∞)

1. –ü–æ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –í–µ–ª–∏–∫–∞—è –ó–∞—â–∏—Ç–∞ DOMContentLoaded –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è INDEX_DATA –∫–∞–∫ –ø—É—Å—Ç–æ–π —á–µ—Ä—Ç–æ–≥.
2. –ó–∞–≥–æ–≤–æ—Ä–∞–µ–º –∫ –û—Ä–∞–∫—É–ª—É –∏ –≤—ã–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –ò–Ω–¥–µ–∫—Å–∞: –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å –∫ index.json —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–∏, —á—Ç–æ–±—ã –¥—É—Ö–∏ –∫—ç—à–∞ –æ—Å–≤–µ–∂–∏–ª–∏—Å—å.
3. –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –æ—Ç–≤–µ—Ç –û—Ä–∞–∫—É–ª–∞ –≤ —á–∏—Å—Ç—É—é —ç—Å—Å–µ–Ω—Ü–∏—é JSON –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ INDEX_DATA. –í —Å–ª—É—á–∞–µ –Ω–µ—É–¥–∞—á–∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –∑–∞—â–∏—Ç–Ω—É—é –•–∞–æ—Å-—Ä—É–Ω—É, –≤—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –û—à–∏–±–∫–µ –∏ —Å–∫—Ä—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω—ã–π –ê–ª—Ç–∞—Ä—å app.
4. –ó–∞—Ç–µ–º –ø—Ä–∏–∑—ã–≤–∞–µ–º –ú–∞–≥–∏—á–µ—Å–∫–∏–π –ö–æ–º–ø–∞—Å router, –∫–æ—Ç–æ—Ä—ã–π —á–∏—Ç–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É—Ç–∏ —á–µ—Ä–µ–∑ URLSearchParams –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –µ—Å–ª–∏ –≤ –ø—É—Ç–∏ –µ—Å—Ç—å id ‚Äî –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–≤–µ—Å—Ç–∞ loadAndRenderQuest, –∏–Ω–∞—á–µ ‚Äî —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –ì–ª–∞–≤–Ω—ã–π –ó–∞–ª Codex renderCodexPage.
5. renderCodexPage —Å–æ–±–∏—Ä–∞–µ—Ç –≤—Å–µ –∫–≤–µ—Å—Ç—ã –∏–∑ INDEX_DATA –∏ –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç –∏—Ö –ø–æ –ß–∞—Å—Ç—è–º –ö–æ–¥–µ–∫—Å–∞. –î–ª—è –∫–∞–∂–¥–æ–π –ß–∞—Å—Ç–∏ —Å–æ–∑–¥–∞—ë—Ç —Å–µ–∫—Ü–∏—é —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º –ß–∞—Å—Ç–∏ –∏ –ª–∞—Ä—Ü–∞–º–∏ –°–≤–∏—Ç–∫–æ–≤, –≤–Ω—É—Ç—Ä–∏ –∫–æ—Ç–æ—Ä—ã—Ö —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è –°–≤–∏—Ç–∫–∏ –∏ –ö–∞—Ä—Ç—ã –∫–≤–µ—Å—Ç–æ–≤ –≤ –≤–∏–¥–µ –∫–∞—Ä—Ç–æ—á–µ–∫. –ê–∫—Ç–∏–≤–Ω—ã–µ –∫–≤–µ—Å—Ç—ã –ø–æ–ª—É—á–∞—é—Ç –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ—Å—Ç—å –∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç quest.html?id=<id>.
6. loadAndRenderQuest(id) —á–∏—Å—Ç–∏—Ç –ê–ª—Ç–∞—Ä—å app, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–¥–ø–∏—Å—å –∑–∞–≥—Ä—É–∑–∫–∏, –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª quests/quest\_<id>.json —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–∏. –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ —Å—É—â–Ω–æ—Å—Ç—å QuestDetail –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è renderQuestView; –Ω–µ—É–¥–∞—á–∞ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –æ—á–∏—Å—Ç–∫–µ –∞–ª—Ç–∞—Ä—è –∏ –≤—ã–≤–æ–¥—É –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–≤–µ—Å—Ç–∞.
7. renderQuestView —Å–æ–∑–¥–∞–µ—Ç —Ç—Ä–µ—Ö–∫–æ–ª–æ–Ω–æ—á–Ω—ã–π –º–∞–∫–µ—Ç: –õ–µ–≥–µ–Ω–¥–∞, –ê–≤—Ç–æ-—Ç–µ—Ä–º–∏–Ω–∞–ª –∏ –ú–∞–Ω–∏—Ñ–µ—Å—Ç. –í –¢–µ—Ä–º–∏–Ω–∞–ª–µ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –æ–∫–Ω–æ –ø—Ä–æ—Ä–∏—Ü–∞–Ω–∏—è –∏ –∞–∫—Ç–∏–≤–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –≤–≤–æ–¥–∞, –∞ —Ç–µ–ª–æ –ª–µ–≥–µ–Ω–¥—ã –∏ –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ –∫–≤–µ—Å—Ç–∞. –í –∫–æ–Ω—Ü–µ –∞–∫—Ç–∏–≤–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è, –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å—Ü–µ–Ω–∞—Ä–∏–π —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ —á–µ—Ä–µ–∑ renderStaticTerminal –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∫–≤–µ—Å—Ç—É.
8. renderStaticTerminal –≤—ã–≤–æ–¥–∏—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –ê–≤—Ç–æ-–ü–∏–ª–æ—Ç–∞, –∑–∞—Ç–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –ø–µ—á–∞—Ç–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã –∏–∑ quest.scenario. –î–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã –≤—ã–≤–æ–¥–∏—Ç—Å—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ magus@codex:~$ –∏ —Å–∞–º–∞ –∫–æ–º–∞–Ω–¥–∞; –µ—Å–ª–∏ –µ—Å—Ç—å –æ—Ç–≤–µ—Ç step.output ‚Äî —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –±–ª–æ–∫ —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∫–æ–¥–∞ –∏ –≤—ã–≤–æ–¥–∏—Ç—Å—è –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª. –ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –ø—Ä–æ–≥–æ–Ω–∞ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –≤–≤–æ–¥–∞, –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ next, –Ω–∞ –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∫–≤–µ—Å—Ç—É –∏–ª–∏ –≤—ã–≤–µ—Å—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ–∫–æ–Ω—á–∞–Ω–∏–∏.
9. showNextButton –≤—ã—á–∏—Å–ª—è–µ—Ç –ø–æ—Ä—è–¥–∫–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å —Ç–µ–∫—É—â–µ–≥–æ –∫–≤–µ—Å—Ç–∞ —Å—Ä–µ–¥–∏ –≤—Å–µ—Ö –∫–≤–µ—Å—Ç–æ–≤ INDEX_DATA.quests, —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–µ—Ç –∏—Ö –ø–æ id, –∏ –µ—Å–ª–∏ –≤–ø–µ—Ä–µ–¥–∏ –µ—Å—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –∫–≤–µ—Å—Ç ‚Äî —Å–æ–∑–¥–∞—ë—Ç—Å—è –∫–Ω–æ–ø–∫–∞-—Å—Å—ã–ª–∫–∞ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∫–≤–µ—Å—Ç—É. –ï—Å–ª–∏ –∂–µ —Ç–µ–∫—É—â–∏–π –∫–≤–µ—Å—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π ‚Äî –≤—ã–≤–æ–¥–∏—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏.
10. –í–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏ –∫–ª–∏–∫–æ–≤ –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º –∫–æ–ª–æ–Ω–Ω, –ø–µ—Ä–µ–∫–ª—é—á–∞—é—â–∏—Ö –≤–∏–¥ –Ω–∞ –õ–µ–≥–µ–Ω–¥—É, –¢–µ—Ä–º–∏–Ω–∞–ª –∏–ª–∏ –ú–∞–Ω–∏—Ñ–µ—Å—Ç, –∞ —Ç–∞–∫–∂–µ –≤–Ω–µ—à–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –ø—Ä–∏–≤–æ–¥—è—Ç—Å—è –≤ –Ω–æ–≤–æ–µ –æ–∫–Ω–æ —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é.

### 4.2. Declarative Content (–î–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –∏ –¥–∞–Ω–Ω—ã—Ö)

Inventory (–ú–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤)

- üè∞ INDEX_DATA —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Å—É–Ω–¥—É–∫ –∑–Ω–∞–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç —Å–≤–∏—Ç–∫–∏ –∫–æ–¥–µ–∫—Å–∞ –∏ –∏—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ index.json.
- üõ°Ô∏è app –≥–ª–∞–≤–Ω—ã–π –∞–ª—Ç–∞—Ä—å DOM —Å id app, –∫—É–¥–∞ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—é—Ç—Å—è –≤—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω—ã–µ —Å—Ü–µ–Ω—ã.
- üè∞ quest*data –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–≤–∏—Ç–æ–∫ –∫–≤–µ—Å—Ç–∞, –∑–∞–≥—Ä—É–∂–∞–µ–º—ã–π –∏–∑ quests/quest*<id>.json –∏ –ø—Ä–∏–º–µ–Ω—è–µ–º—ã–π –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–≤–µ—Å—Ç–∞.
- üõ°Ô∏è quest cards –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–≤–µ—Å—Ç–æ–≤ –≤–Ω—É—Ç—Ä–∏ –∑–∞–ª–∞ Codex, –∫–∞–∂–¥–∞—è –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Å–µ—Ç id, title –∏ —Å—Ç–∞—Ç—É—Å.
- üè∞ legendary column –õ–µ–≥–µ–Ω–¥—ã, terminal column –ê–≤—Ç–æ-—Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –∏ manifest column –ú–∞–Ω–∏—Ñ–µ—Å—Ç–∞, –∫–∞–∂–¥—ã–π —Å–æ —Å–≤–æ–∏–º–∏ –ø–æ–¥–ø–æ–∑–∏—Ü–∏—è–º–∏, –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ –∏ —Å–æ–¥–µ—Ä–∂–∏–º—ã–º.
- üõ°Ô∏è terminal window –∏ –∞–∫—Ç–∏–≤–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –≤–≤–æ–¥–∞ —Å –ø—Ä–æ–º–ø—Ç–æ–º magus@codex:~$ –∏ –º–∏–≥–∞—é—â–∏–º –∫—É—Ä—Å–æ—Ä–æ–º.
- üè∞ index.json –∏ quest\_<id>.json —Ñ–∞–π–ª—ã –∫–∞–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∞—Ä—Ö–∏–≤–∞ –∑–Ω–∞–Ω–∏–π, –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø–æ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º –ø—É—Ç—è–º.
- üõ°Ô∏è error-message —ç–ª–µ–º–µ–Ω—Ç, –∫—É–¥–∞ –ø–æ–º–µ—à–∞–µ—Ç—Å—è —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö –∑–∞–≥—Ä—É–∑–∫–∏ index.json.
- üè∞ quest.html –∏ quest\_<id>.json –∫–∞–∫ —É–∑–ª—ã –ø–æ—Ä—Ç–∞–ª–æ–≤ –¥–ª—è –ø—Ä–∏–∑—ã–≤–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–≤–µ—Å—Ç–∞.

## 5. Structural Decomposition (–î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã)

- –§—É–Ω–∫—Ü–∏–∏ –∏ –∫–ª–∞—Å—Å—ã
  - loadIndex: –∑–∞–≥—Ä—É–∑–∫–∞ INDEX_DATA –∏–∑ index.json —Å –∑–∞—â–∏—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫.
  - router: —á—Ç–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø—É—Ç–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É –∫–≤–µ—Å—Ç–∞ –∏–ª–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞.
  - renderCodexPage: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≥–ª–∞–≤–Ω–æ–≥–æ –ó–∞–ª–∞ Codex —Å —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ–º —á–∞—Å—Ç–µ–π, —Å–≤–∏—Ç–∫–æ–≤ –∏ –∫–∞—Ä—Ç–æ—á–µ–∫ –∫–≤–µ—Å—Ç–æ–≤.
  - loadAndRenderQuest: –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–≤–µ—Å—Ç–∞ –∏ –≤—ã–∑–æ–≤ –µ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è.
  - renderQuestView: –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Ç—Ä–µ—Ö–∫–æ–ª–æ–Ω–æ—á–Ω–æ–≥–æ –º–∞–∫–µ—Ç–∞ —Å –ª–µ–≥–µ–Ω–¥–æ–π, —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–º –∏ –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–º.
  - renderStaticTerminal: —ç–º—É–ª—è—Ü–∏—è —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ —á–µ—Ä–µ–∑ —Å—Ü–µ–Ω–∞—Ä–∏–π –∫–≤–µ—Å—Ç–∞.
  - showNextButton: —Å–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∫–≤–µ—Å—Ç—É –∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ.
- –ö–æ–Ω—Ñ–∏–≥–∏ –∏ –¥–∞–Ω–Ω—ã–µ
  - index.json –∏ quest\_<id>.json –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö –æ –∫–≤–µ—Å—Ç–∞—Ö.
  - –°—Ç—Ä—É–∫—Ç—É—Ä—ã INDEX_DATA –∏ QuestDetail, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤–Ω—É—Ç—Ä–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∞.

## 6. System Context & Constraints (–°–∏—Å—Ç–µ–º–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)

### 6.1. Technical Constraints

- **Performance:** —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã –±—Ä–∞—É–∑–µ—Ä–æ–º; –∑–∞–≥—Ä—É–∑–∫–∏ –∏–Ω–¥–µ–∫—Å–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–≤–µ—Å—Ç–æ–≤ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —Å –æ–±–Ω–æ–≤–ª—è–µ–º—ã–º–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏ –¥–ª—è —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –∫ –∫—ç—à—É.
- **Concurrency:** –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Å—Ç–∏–ª—å (async/await) –¥–ª—è —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ä–∏—Ç—É–∞–ª–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è.
- **Dependencies:** –Ω–µ—Ç –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∫—Ä–æ–º–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö Web API: Fetch, DOM, URLSearchParams.

### 6.2. Prohibited Actions (Negative Constraints)

- –ù–ï —Ö—Ä–∞–Ω–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ –≤ –∫–æ–¥–µ –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Ö.
- –ù–ï –≤—ã–≤–æ–¥–∏—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–Ω-—Å—Ä–µ–¥–µ —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Å–æ–ª—å –∏–ª–∏ –Ω–∞ —ç–∫—Ä–∞–Ω.
- –ù–ï –≤—ã–ø–æ–ª–Ω—è—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Å–µ—Ç–µ–≤—ã–µ –≤—ã–∑–æ–≤—ã –≤ –≥–ª–∞–≤–Ω–æ–º —Ü–∏–∫–ª–µ; –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å.
- –ù–ï —É–ø–∞–∫–æ–≤—ã–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (.yaml, .json) –≤–Ω—É—Ç—Ä—å —Å–∫—Ä–∏–ø—Ç–æ–≤ –±–µ–∑ —è–≤–Ω–æ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.
- –ù–ï –º–µ–Ω—è—Ç—å –≤–µ—Ä—Å–∏–∏ –∏–ª–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ –∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞–º –≤–æ –≤—Ä–µ–º—è —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏.
- –ù–ï –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥; –≤—Å–µ –ª–æ–≥–∏–∫—É —Å–ª–µ–¥—É–µ—Ç –æ–ø–∏—Å—ã–≤–∞—Ç—å —Å–ª–æ–≤–∞–º–∏ –∏ –≤ —Ä–∞–º–∫–∞—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤.

## 7. Verification & Testing (–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è)

### –ì—Ä–µ—Å—Å—ë–Ω 1: –£—Å–ø–µ—à–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–≤–µ—Å—Ç–∞

Feature: Quest rendering flow
Scenario: Successful quest rendering
Given INDEX_DATA –∑–∞–≥—Ä—É–∂–µ–Ω –∏–∑ index.json
When –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ –∞–∫—Ç–∏–≤–Ω–æ–º—É –∫–≤–µ—Å—Ç—É —Å id —Ä–∞–≤–Ω—ã–º 10
Then –Ω–∞ —ç–∫—Ä–∞–Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–≤–µ—Å—Ç–∞ 10 —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º –∏ –¥–∞–Ω–Ω—ã–º–∏ –ª–µ–≥–µ–Ω–¥—ã –∏ –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞
And –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≤–∏–¥–Ω—ã —à–∞–≥–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è quest.scenario
And –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∫–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∫–≤–µ—Å—Ç—É

### –ì—Ä–µ—Å—Å—ë–Ω 2: –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–≤–µ—Å—Ç–∞

Scenario: Quest load failure
Given –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∫–≤–µ—Å—Ç —Å id –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–º —Ñ–∞–π–ª–æ–º
When –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–µ —É–¥–∞–ª–∞—Å—å
Then –≤ –ê–ª—Ç–∞—Ä–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–≤–µ—Å—Ç–∞"
And –∞–∫—Ç–∏–≤–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –≤–≤–æ–¥–∞ —Å–∫—Ä—ã—Ç–∞

–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –≤–Ω–µ–¥—Ä–µ–Ω–∏—é: –∞—Ä—Ç–µ—Ñ–∞–∫—Ç app.js –æ–ø–∏—Å–∞–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –≤ —Ñ–æ—Ä–º–µ, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –º–∞–≥–∏—á–µ—Å–∫–æ–º—É –∫–æ–¥–µ–∫—Å—É –ê—Ä—Ö–∏–º–∞–≥–∞.
