# style.css Specification

## 1. Meta Information

- **Domain:** Scripting
- **Complexity:** Medium
- **Language:** TypeScript
- **Frameworks:** PostCSS, Autoprefixer, CSSNano
- **Context:** Independent Artifact

## 2. Goal & Purpose (Цель и Назначение)

Легенда о Скрижали Ночного Ритуала: стиль style.css служит артефактом визуального заклинания для веб-интерфейса, превращая обычный интерфейс в глухой свод ночной глубины Night Owl. Он устанавливает темную палитру, эстетику панелей, текста и акцентов, обеспечивает единый стиль навигации, карточек квестов и терминала. Это ритуал оформления, который делает интерфейс читаемым и гармоничным при адаптивном размещении элементов и плавных эффектов.

## 3. Interface Contract (Интерфейсный Контракт)

### 3.1. Inputs (Входы)

- **Source:** STDIN
- **Format:** Text
- **Schema:**

```ts
interface InputData {
  source: string; // CSS текст или путь к стилю
  tokens?: Record<string, string>; // дополнительные абсолютно не жестко закрепленные токены
  mode?: "build" | "validate"; // режим работы артефакта
}
```

### 3.2. Outputs (Выходы)

- **Destination:** File
- **Format:** CSS
- **Success Criteria:** File Created
- **Schema:**

```ts
interface OutputResult {
  path: string;
  success: boolean;
  message?: string;
}
```

## 4. Implementation Details (The Source DNA / Исходный Код)

### 4.1. Algorithmic Logic (Для исполняемого кода)

1. Загрузить входной CSS из поля source и разобрать эфир токенов, если таковые переданы в tokens.
2. Привязать каждую переменную корня к реальной палитре: сетка цветов и контрастов для фона, панелей, текста, акцентов и границ.
3. Проверить наличие основных узлов интерфейса: корневые переменные :root, стили body, навигации, карточек квестов, колонн и терминала.
4. Привязать динамические эффекты: наведение на карточки, плавные переходы, эффект левитации, затемнение печати, адаптивность под ширину экрана.
5. Убедиться, что структура сеток Quest Grid, колонки и терминара корректно выстраиваются в гибкой иерархии.
6. Встроить защиту от перегревания макета на мобильных устройствах через медиа-запрос max-width: 768px, адаптивные сигналы для кнопок и сигилов.
7. Записать финальный CSS в destination path, вернуть OutputResult с путем и статусом выполнения.
8. При отсутствии критических ошибок поместить в ленту сообщений статус успеха; при возникновении хаотических несогласованностей — вернуть описание проблемы и fallback-значения.

### 4.2. Declarative Content (Для конфигураций и данных)

Скрижаль содержит следующие базовые данные конфигурации в виде цветов и стилей, которые применяются повсеместно без явного дублирования кода:

- Эссенция Ночной Глубины — --bg: #011627
- Эссенция Темных Вод — --panel-bg: #0b253a
- Эссенция Звездной Пыли — --text: #d6deeb
- Эссенция Биолюминесценции (Мятный) — --accent: #7fdbca
- Эссенция Рифа — --border: #1d3b53
- Эссенция Бездны — --term-bg: #011423
- Эссенция Магического Потока — --term-green: #7fdbca

Эти эфиры внедряются в корень :root и распространяются на body, nav, карточки, колоны и терминал, создавая единый темный ландшафт и мягкую звездообразную читаемость.

## 5. Structural Decomposition (Декомпозиция структуры)

- :root — базовые переменные палитры и глобальные константы.
- body — общий контекст страницы: шрифты, размер, межстрочное расстояние, флекс-структура.
- nav — панель навигации с панель-цветом и рамкой, подпись медальона.
- .nav-content — внутреннее пространство навигации, выравнивание и отступы.
- nav a — стили ссылок: цвет, без подчеркивания, размер.
- nav a:hover — эффект свечения при наведении.
- .nav-title — центрирование титула и подписи.
- .home-scroll-container / .home-content — обрамление основного контента, максимальная ширина и отступы.
- .part-container / .part-container:first-child — секции содержимого с внешним отступом.
- .part-container h2 — заголовок секции с отделительной линией.
- .scroll-container / .scroll-container h3 — заголовки и контекст групп квестов.
- .quest-grid — гибкая мозаику квестов (cards).
- .quest-card — карточка квеста, глифы UI, переходы и курсор.
- .quest-card.locked — призрачная блокировка элемента.
- .q-id / .q-title — идентификатор и заголовок квеста.
- .quest-layout / .col — архитектура трех колонн, гибкая сетка и границы между колоннами.
- .col-header — заголовок каждой колонки, фон и отделительная граница.
- .scroll-content / .markdown-body — стиль содержимого и текущее оформление текста.
- .col-terminal / .terminal-window — оформление терминала и его псевдо-элементы, имитирующие CRT-скан и мониторы.
- .input-line / .sys-msg / .success-msg / .prompt / .btn-magic — элементы ввода, сообщений и кнопки.
- Медиа-зона: адаптивные стили под max-width 768px.
- Прочие мелкие элементы: коды, ссылки, изображения, заголовки и т. д., вплетены в рамки стиля.

## 6. System Context & Constraints (Системный контекст и Ограничения)

### 6.1. Technical Constraints

- **Performance:** Оптимизировано под современные браузеры; стиль рассчитан на плавные анимации и гибкую верстку без тяжёлых вычислений.
- **Concurrency:** Не применяется концепция активного конкурентного выполнения; все стили применяются синхронно браузером.
- **Dependencies:** Зависят от поддержки CSS переменных и базовых возможностей flex/grid; внешний фреймворк не обязателен, но может применяться на стадии сборки (PostCSS, Autoprefixer, CSSNano).

### 6.2. Prohibited Actions (Negative Constraints)

- DO NOT вставлять секреты или чувствительные данные в CSS.
- DO NOT выводить сырые данные в консоль в продакшн версии.
- DO NOT загружать внешние шрифты или ресурсы без запасного варианта (fallback).
- DO NOT полагаться на сетевые запросы внутри стиля; стиль должен быть автономным и предсказуемым.
- DO NOT изменять версии или пути конфигураций во время реконструкции.
- DO NOT использовать сторонние изображения без резервной локальной копии или встроенных SVG.

## 7. Verification & Testing (Верификация)

### 1) Гхеркин-сценарий: Успешное применение темы

Функционал: стиль style.css загружается и применяется, формируя темный ландшафт Night Owl на веб-странице.
Given стиль.css доступен и содержимое валидно
When стиль применяется к документу
Then фон документа должен соответствовать #011627, текст должен использовать цвет #d6deeb, акцент должен быть #7fdbca

### 2) Гхеркин-сценарий: Отсутствие обязательных переменных приводит к падению в fallback

Функционал: стиль загружается с неполным набором корневых переменных.
Given корневые переменные отсутствуют или частично заданы
When стиль применяется
Then браузер использует fallback-значения и страница остаётся читаемой с минимально допустимым оформлением, избегая падения или краша.

Искусство завершено. Каждый элемент артефакта вплетён в ткань Кодекса: ночной стиль, текста и света, хранит баланс между хаосом и порядком в мире интерфейсов.
