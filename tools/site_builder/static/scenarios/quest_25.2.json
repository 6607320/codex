{
  "_meta": {
    "input_hash": "78f9622aa55f0b47e67b39f7f61ab0ad"
  },
  "scenario": [
    {
      "command": "docker build . -f Dockerfile.mono -t codex/golem-25-2-monolith",
      "output": "#1 [internal] load build definition from Dockerfile.mono\n#1 transferring dockerfile: 248B done\n#1 DONE 0.0s\n#2 [internal] load .dockerignore\n#2 transferring context: 2B done\n#2 DONE 0.0s\n#3 [internal] load metadata for docker.io/library/python:3.10\n#3 DONE 1.8s\n#4 [internal] load build context\n#4 transferring context: 5.12kB done\n#4 DONE 0.1s\n#5 [1/5] FROM docker.io/library/python:3.10\n#5 DONE 0.0s\n#6 [2/5] WORKDIR /app\n#6 DONE 0.1s\n#7 [3/5] COPY requirements.txt .\n#7 DONE 0.0s\n#8 [4/5] RUN pip install --no-cache-dir -r requirements.txt\n#8 2.3 Collecting fastapi\n#8 2.3   Downloading fastapi-0.104.1-py3-none-any.whl (91 kB)\n#8 8.5     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 91.0/91.0 kB 3.2 MB/s eta 0:00:00\n#8 8.7 Collecting uvicorn[standard]\n#8 8.7   Downloading uvicorn-0.24.0-py3-none-any.whl (59 kB)\n#8 9.1 Collecting redis>=4.0.0\n#8 9.1   Downloading redis-5.0.1-py3-none-any.whl (259 kB)\n#8 12.4 Installing collected packages: starlette, pydantic-core, ...\n#8 15.2 Successfully installed fastapi-0.104.1 redis-5.0.1 uvicorn-0.24.0 ...\n#8 DONE 15.2s\n#9 [5/5] COPY . .\n#9 DONE 0.1s\n#10 exporting to image\n#10 exporting layers done\n#10 writing image sha256:def456789abcdef123456789abcdef123456789abcdef123456 done\n#10 naming to docker.io/library/codex/golem-25-2-monolith done\n#10 DONE 0.3s"
    },
    {
      "command": "docker build . -t codex/golem-25-2-optimized",
      "output": "#1 [internal] load build definition from Dockerfile\n#1 transferring dockerfile: 1024B done\n#1 DONE 0.0s\n#2 [internal] load .dockerignore\n#2 transferring context: 2B done\n#2 DONE 0.0s\n#3 [internal] load metadata for docker.io/library/python:3.10,python:3.10-slim\n#3 DONE 2.1s\n#4 [internal] load build context\n#4 transferring context: 5.12kB done\n#4 DONE 0.0s\n#5 [builder 1/4] FROM docker.io/library/python:3.10\n#5 DONE 0.0s\n#6 [builder 2/4] WORKDIR /app\n#6 DONE 0.1s\n#7 [builder 3/4] COPY requirements.txt .\n#7 DONE 0.0s\n#8 [builder 4/4] RUN pip install --no-cache-dir -r requirements.txt\n#8 1.9 Collecting fastapi\n#8 1.9   Downloading fastapi-0.104.1-py3-none-any.whl (91 kB)\n#8 4.2     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 91.0/91.0 kB 2.8 MB/s eta 0:00:00\n#8 4.5 Collecting uvicorn[standard]\n#8 4.5   Downloading uvicorn-0.24.0-py3-none-any.whl (59 kB)\n#8 4.8 Collecting redis>=4.0.0\n#8 4.8   Downloading redis-5.0.1-py3-none-any.whl (259 kB)\n#8 7.3 Installing collected packages: ...\n#8 9.8 Successfully installed fastapi-0.104.1 redis-5.0.1 uvicorn-0.24.0 ...\n#8 DONE 9.8s\n#9 [2/5] FROM docker.io/library/python:3.10-slim\n#9 DONE 0.0s\n#10 [3/5] WORKDIR /app\n#10 DONE 0.1s\n#11 [4/5] COPY --from=builder /usr/local/lib/python3.10/site-packages /usr/local/lib/python3.10/site-packages\n#11 DONE 1.2s\n#12 [5/5] COPY . .\n#12 DONE 0.0s\n#13 exporting to image\n#13 exporting layers 3 done\n#13 writing image sha256:abc123456789abcdef123456789abcdef123 done\n#13 naming to docker.io/library/codex/golem-25-2-optimized done\n#13 DONE 0.4s"
    },
    {
      "command": "docker images | grep \"golem-25-2\"",
      "output": "codex/golem-25-2-optimized   latest    abc123456789   30 seconds ago   281MB\ncodex/golem-25-2-monolith     latest    def456789abc    2 minutes ago    1.23GB",
      "is_final": true
    }
  ]
}
