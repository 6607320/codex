{
  "_meta": {
    "input_hash": "d58ac83546458906b55c48ddea5c8431"
  },
  "scenario": [
    {
      "command": "gcloud services enable artifactregistry.googleapis.com run.googleapis.com",
      "output": "Enabled [artifactregistry.googleapis.com, run.googleapis.com].",
      "is_final": false
    },
    {
      "command": "gcloud artifacts repositories create mystic-repo --repository-format=docker --location=europe-west1",
      "output": "Successfully created repository [mystic-repo] at [europe-west1-docker.pkg.dev/my-project-id/mystic-repo].",
      "is_final": false
    },
    {
      "command": "gcloud auth configure-docker europe-west1-docker.pkg.dev",
      "output": "Successfully configured Docker client to use container registry europe-west1-docker.pkg.dev/my-project-id/mystic-repo.",
      "is_final": false
    },
    {
      "command": "cd Part_4_Engineering/Scroll_28/Quest_2",
      "output": "Now in directory: /home/user/Part_4_Engineering/Scroll_28/Quest_2",
      "is_final": false
    },
    {
      "command": "PROJECT_ID=$(gcloud config get-value project)",
      "output": "Set PROJECT_ID=123456789",
      "is_final": false
    },
    {
      "command": "docker build -t europe-west1-docker.pkg.dev/123456789/mystic-repo/amulet:v1 .",
      "output": "Successfully built image: europe-west1-docker.pkg.dev/123456789/mystic-repo/amulet:v1",
      "is_final": false
    },
    {
      "command": "docker push europe-west1-docker.pkg.dev/123456789/mystic-repo/amulet:v1",
      "output": "The upload has completed successfully",
      "is_final": false
    },
    {
      "command": "gcloud run deploy speaking-amulet --image=europe-west1-docker.pkg.dev/123456789/mystic-repo/amulet:v1 --memory=2Gi --region=europe-west1 --allow-unauthenticated",
      "output": "Waiting for build to complete... service/(...snip...) created (service=speaking-amulet-\nxyzxyz/run.googleapis.com/apps/speaking-amulet-xyzxyz-in-europe-west1-0001)..\nhttps://speaking-amulet-xyzxyz.run.app/docs",
      "is_final": true
    }
  ]
}
