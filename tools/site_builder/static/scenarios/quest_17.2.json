{
  "_meta": {
    "input_hash": "27741d13fedabcb70c4fdca8c2b6d9c2"
  },
  "scenario": [
    {
      "command": "docker build -t codex/amulet-17-2-leviathan .",
      "output": "Sending build context to Docker daemon  12.56kB\nStep 1/7 : FROM pytorch/pytorch:2.1.0-cuda11.8-cudnn8-runtime\n ---> a1b2c3d4e5f6\nStep 2/7 : WORKDIR /app\n ---> b2c3d4e5f6a7\nStep 3/7 : COPY libraries.list .\n ---> c3d4e5f6a7b8\nStep 4/7 : RUN pip install --no-cache-dir -r libraries.list\n ---> d4e5f6a7b8c9\nStep 5/7 : COPY main.py .\n ---> e5f6a7b8c9d0\nStep 6/7 : EXPOSE 8000\n ---> f6a7b8c9d0e1\nStep 7/7 : CMD [\"uvicorn\", \"main:app\", \"--host\", \"0.0.0.0\", \"--port\", \"8000\"]\n ---> 0a1b2c3d4e5f\nSuccessfully built 0a1b2c3d4e5f\nSuccessfully tagged codex/amulet-17-2-leviathan:latest",
      "is_final": false
    },
    {
      "command": "docker run -p 8000:8000 --gpus all codex/amulet-17-2-leviathan",
      "output": "GPU support flag --gpus is deprecated and will be removed in a future release.\nContainer amulet-leviathan started\nAttaching to amulet-leviathan\namulet-leviathan | Призываю 'Духа Эмоций' для нашего амулета...\namulet-leviathan | 'Дух Эмоций' готов к работе.\nINFO:     Started server process [1]\nINFO:     Waiting for application startup.\nINFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)\n",
      "is_final": false
    },
    {
      "command": "curl -s http://127.0.0.1:8000/docs",
      "output": "<html>Swagger UI placeholder for OpenAPI docs at /docs</html>",
      "is_final": false
    },
    {
      "command": "curl -s -X POST -H \\\"Content-Type: application/json\\\" -d '{\\\"text\\\":\\\"I am happy\\\"}' http://127.0.0.1:8000/analyze",
      "output": "{\"result\": {\"label\": \"POSITIVE\", \"score\": 0.92}}",
      "is_final": true
    }
  ]
}
