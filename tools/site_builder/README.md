# **Инструменты Архитектора: Генератор Цифрового Гримуара**

Этот каталог содержит все необходимые заклинания и артефакты для сборки, тестирования и поддержания твоего личного **Цифрового Гримуара** — статического сайта-портфолио.

**Важно:** Все ритуалы в этой инструкции исполняются из **корневой папки проекта** (`codex`).

---

## **Ритуал 1: Локальное Пробуждение (Запуск для Просмотра)**

Этот ритуал позволяет тебе увидеть Гримуар на своей машине.

```bash
# Эта команда сразу переходит в нужную папку и запускает сервер
python -m http.server 8000 --directory tools/site_builder/static
```

После этого открой в браузере адрес `http://localhost:8000`.

---

## **Ритуал 2: Великая Пересборка (Обновление после Изменений)**

Этот ритуал нужно проводить **каждый раз**, когда ты внес изменения в исходные материалы Кодекса (например, поправил код в квесте или текст в `CODEX.md`).

#### **Шаг 2.1: Призыв AI-Летописца (Обновление Сценариев)**

Этот шаг обновляет симуляции терминала на основе твоих изменений в коде.

1.  **Подготовка (единоразово после форка):**
    - Создай аккаунт на [OpenRouter.ai](https://openrouter.ai/) и получи API ключ.
    - **Важно:** Чтобы использовать бесплатные модели, тебе потребуется "активировать кошелек", пополнив баланс на минимальную сумму (обычно $5). Деньги за модели с суффиксом `:free` списываться не будут.
    - Создай файл `tools/site_builder/.env` и вставь в него свой ключ: `OPENROUTER_API_KEY="sk-or-..."`.
    - Установи необходимые гримуары:
      ```bash
      pip install openai python-dotenv
      ```

2.  **Запуск AI-генератора:**
    ```bash
    python tools/site_builder/ai_openrouter.py
    ```

#### **Шаг 2.2: Запуск Генератора Сайта**

Этот шаг собирает обновленные сценарии и тексты в готовый сайт.

```bash
python tools/site_builder/generate.py
```

После этого твой локальный сайт (`http://localhost:8000`) будет содержать все последние изменения.

---

## **(Опционально) Ритуал 3: Разведка Новых Духов**

Со временем список бесплатных моделей на OpenRouter может измениться. Если `ai_openrouter.py` выдает ошибку, что модель не найдена, используй этот ритуал, чтобы найти актуальную бесплатную модель.

1.  **Запусти скрипт-разведчик:**
    ```bash
    python tools/site_builder/check_models.py
    ```
2.  **Выбери замену:** В полученном списке найди подходящую модель с суффиксом `:free` и большим контекстным окном.
3.  **Обнови заклинание:** Открой `ai_openrouter.py` и измени значение переменной `MODEL_ID` на новую модель.

---

## **Ритуал 4: Публикация в Великую Летопись (GitHub Pages)**

Мы будем использовать **"Ритуал Перемещения Артефактов"** — специальный **GitHub Action**, который автоматически опубликует твой сайт, **не засоряя корень проекта**.

**Твои действия:**

1.  **Убедись, что все работает локально** после "Великой Пересборки".
2.  Зафиксируй все изменения (включая обновленные `scenario.json` и файлы в `static/`) и отправь их в свой репозиторий.

    ```bash
    git add .
    git commit -m "feat: Обновил содержание Гримуара"
    git push
    ```

3.  **Активируй магию GitHub Pages (единоразово):**
    - Перейди в настройки своего репозитория: `Settings` -> `Pages`.
    - В разделе `Build and deployment` выбери:
      - **Source:** `GitHub Actions`.
    - Готово. Кодекс уже содержит правильное заклинание в `.github/workflows/deploy-pages.yml`.

После `git push` "Магический Страж" автоматически пробудится, соберет твой сайт из папки `static/` и опубликует его. Ссылка на твой Гримуар появится в настройках GitHub Pages через несколько минут.
