# find_paradox.py Specification

## 1. Meta Information

- **Domain:** Scripting
- **Complexity:** Low
- **Language:** Python
- **Frameworks:** Python Standard Library: json
- **Context:** ../AGENTS.md

## 2. Goal & Purpose (–¶–µ–ª—å –∏ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ)

–õ–µ–≥–µ–Ω–¥–∞: –≠—Ç–æ—Ç –†–∏—Ç—É–∞–ª –ø–æ –∏–º–µ–Ω–∏ find_paradox.py —Å–ª—É–∂–∏—Ç –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–º –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º –¥–ª—è –∞—É–¥–∏—Ç–∞ –õ–µ—Ç–æ–ø–∏—Å–∏, —Ö—Ä–∞–Ω–∏–º–æ–π –≤ —Å–∫—Ä–∏–∂–∞–ª—è—Ö manifest.json. –ï–≥–æ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ ‚Äî –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–¥–æ–∫—Å—ã –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏ —Ñ–∞–π–ª–æ–≤ –≤ —Ä–∞–∑–Ω—ã—Ö PDF —Ç–æ–º–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, part_1.pdf –∏ living_chronicle.pdf), —á—Ç–æ–±—ã –≤—ã–¥–µ–ª–∏—Ç—å –∏–¥–µ–∞–ª—å–Ω—ã–µ –∫–∞–Ω–¥–∏–¥–∞—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –û—Ä–∞–∫—É–ª–∞-–ê—Ä—Ö–∏–≤–∞—Ä–∏—É—Å–∞ —Ä–∞–∑—Ä–µ—à–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –≤–µ—Ä—Å–∏–π –∏ –æ—Ç–¥–µ–ª—è—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∑–Ω–∞–Ω–∏—è –æ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö.

## 3. Interface Contract (–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω—ã–π –ö–æ–Ω—Ç—Ä–∞–∫—Ç)

### 3.1. Inputs (–í—Ö–æ–¥—ã)

- **Source:** CLI Args | STDIN | API Request | Kafka Topic | Smart Contract Call
- **Format:** JSON | Text | Binary | Stream
- **Schema:**
  interface InputData {
  chunks: {
  file: string;
  sources: string[];
  }[];
  }

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –í —Ä–µ–∞–ª—å–Ω–æ–º –∫–æ–¥–µ –õ–µ—Ç–æ–ø–∏—Å—å —á–∏—Ç–∞–µ—Ç—Å—è –∏–∑ —Ñ–∞–π–ª–∞ manifest.json –∏ —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ JSON. –ì–ª–∞–≤–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ —á—Ç–µ–Ω–∏—é —ç—Ç–æ–π –°–∫—Ä–∏–∂–∞–ª–∏.

### 3.2. Outputs (–í—ã—Ö–æ–¥—ã)

- **Destination:** STDOUT
- **Format:** Text
- **Success Criteria:** Exit Code 0
- **Schema:**
  interface OutputResult {
  paradoxFiles: string[]; // —Ñ–∞–π–ª—ã, —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≤ –æ–±–µ–∏—Ö –≤–µ—Ä—Å–∏—è—Ö
  messages: string[]; // —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –ª–æ–≥–∏ —Ä–∏—Ç—É–∞–ª–∞
  status: "OK" | "ERROR"; // —Å—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∏—Ç—É–∞–ª–∞
  }

## 4. Implementation Details (The Source DNA / –ò—Å—Ö–æ–¥–Ω—ã–π –ö–æ–¥)

### 4.1. Algorithmic Logic (–î–ª—è –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ –∫–æ–¥–∞)

–†–∏—Ç—É–∞–ª –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Ç–æ—Ä–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞. –ó–∞—Ç–µ–º –æ–Ω –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –°–∫—Ä–∏–∂–∞–ª–∏ manifest.json –∏ –ø—ã—Ç–∞–µ—Ç—Å—è –ø—Ä–æ—á–∏—Ç–∞—Ç—å –µ—ë –≤ –≠—Ñ–∏—Ä –¥–∞–Ω–Ω—ã—Ö. –ï—Å–ª–∏ –õ–µ—Ç–æ–ø–∏—Å—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –•–∞–æ—Å —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –æ—à–∏–±–∫—É –∏ —Ä–∏—Ç—É–∞–ª –ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç –ø–æ–ø—ã—Ç–∫—É. –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –∏–∑ –≠—Ñ–∏—Ä–∞ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –¢–æ–ºa, —Ö—Ä–∞–Ω—è—â–∏–µ—Å—è –≤ –ø–æ–ª–µ chunks. –ï—Å–ª–∏ –¢–æ–º–æ–≤ –º–µ–Ω—å—à–µ –¥–≤—É—Ö, —Ä–∏—Ç—É–∞–ª –≥–æ–≤–æ—Ä–∏—Ç –æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–∞—Ä–∞–¥–æ–∫—Å–æ–≤ –∏ –ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç. –î–∞–ª–µ–µ –¥–≤–µ –ø—É—Å—Ç—ã–µ —á–∞—à–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –¥–ª—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Ñ–∞–π–ª–æ–≤ –∏–∑ —á–∞—Å—Ç–∏ 1 –∏ –∏–∑ –∂–∏–≤–æ–≥–æ —Ç–æ–º–∞. –ü—Ä–æ—Ö–æ–¥—è –ø–æ –∫–∞–∂–¥–æ–º—É —á–∞—Ç—É-—Ç–æ–º, –†–∏—Ç—É–∞–ª –∑–∞–Ω–æ—Å–∏—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ —Ç–æ–º–∞ –≤ —Å–≤–æ–∏ —á–∞—à–∏: part_1.pdf –∑–∞–ø–æ–ª–Ω—è–µ—Ç —á–∞—Å—Ç—å_1_sources, living_chronicle.pdf –∑–∞–ø–æ–ª–Ω—è–µ—Ç living_chronicle_sources, –Ω–∞—á–∏–Ω–∞—è —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–∞–π–¥–µ–Ω–Ω–æ–º —Ç–æ–º–µ –∏ —á–∏—Å–ª–µ —Ñ–∞–π–ª–æ–≤. –ü–æ—Å–ª–µ —Å–±–æ—Ä–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ –æ–±–æ–∏—Ö —Ç–æ–º–æ–≤; –µ—Å–ª–∏ –∫–∞–∫–æ–π-–ª–∏–±–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –≤—ã–≤–æ–¥–∏—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –Ω–∞–π—Ç–∏ –æ–±–∞ —Ç–æ–º–∞ –∏ —Ä–∏—Ç—É–∞–ª –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è. –ó–∞—Ç–µ–º –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ –¥–≤—É—Ö –º–Ω–æ–∂–µ—Å—Ç–≤ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ ‚Äî –ø–∞—Ä–∞–¥–æ–∫—Å—ã, —Ç–æ –µ—Å—Ç—å —Ñ–∞–π–ª—ã, –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –≤ –æ–±–µ–∏—Ö –≤–µ—Ä—Å–∏—è—Ö. –ï—Å–ª–∏ –ø–∞—Ä–∞–¥–æ–∫—Å—ã –Ω–∞–π–¥–µ–Ω—ã, –æ–Ω–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –ø–æ —Å–ø–∏—Å–∫—É –≤ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ –∏ —Å–æ–æ–±—â–∞–µ—Ç—Å—è –æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –û—Ä–∞–∫—É–ª–∞. –ï—Å–ª–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π –Ω–µ—Ç, –≤—ã–≤–æ–¥–∏—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π —á–∏—Å—Ç–æ—Ç–µ –ª–µ—Ç–æ–ø–∏—Å–∏ –∏ –ø–æ—è—Å–Ω—è–µ—Ç—Å—è —Å–º—ã—Å–ª. –í –∫–æ–Ω—Ü–µ —Å–∫—Ä–∏–ø—Ç –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ä–∞–±–æ—Ç—É, –∏ –µ—Å–ª–∏ –æ–Ω –±—ã–ª –∑–∞–ø—É—â–µ–Ω –Ω–∞–ø—Ä—è–º—É—é, –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç—Å—è –≤—ã–∑–æ–≤ –≥–ª–∞–≤–Ω–æ–≥–æ —Ä–∏—Ç—É–∞–ª–∞.

### 4.2. Declarative Content (–î–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –∏ –¥–∞–Ω–Ω—ã—Ö)

- üè∞ manifest.json ‚Äî –°–∫—Ä–∏–∂–∞–ª—å –õ–µ—Ç–æ–ø–∏—Å–∏, —Ö—Ä–∞–Ω–∏—Ç —Ö—Ä–æ–Ω–∏–∫–∏ –∏ –∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–∏ (–ø–æ–ª—è chunks, –≥–¥–µ –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –∏–º–µ–µ—Ç file –∏ sources).
- üõ°Ô∏è part_1.pdf ‚Äî –ü–µ—Ä–≤—ã–π —Ç–æ–º, –∏—Å—Ç–æ—á–Ω–∏–∫ —Ñ–∞–π–ª–æ–≤
- üõ°Ô∏è living_chronicle.pdf ‚Äî –ñ–∏–≤–æ–π —Ç–æ–º, –∏—Å—Ç–æ—á–Ω–∏–∫ —Ñ–∞–π–ª–æ–≤
- üóùÔ∏è –†–∏—Ç—É–∞–ª find_version_paradox ‚Äî –ì–ª–∞–≤–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–∏—Å–∫–∞ –ø–∞—Ä–∞–¥–æ–∫—Å–æ–≤ –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏
- üó∫Ô∏è –≠—Ñ–∏—Ä –¥–∞–Ω–Ω—ã—Ö ‚Äî –¥–∞–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ manifest.json, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ –∫–ª—é—á chunks –∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —Ñ–∞–π–ª–æ–≤
- ‚ö†Ô∏è –•–∞–æ—Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è ‚Äî –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–æ–Ω—Å–æ–ª–∏ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è, –≤–æ–∑–Ω–∏–∫–∞—é—â–∏–µ –≤ —Ö–æ–¥–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

## 5. Structural Decomposition (–î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã)

- –§—É–Ω–∫—Ü–∏–∏/–°—É—â–Ω–æ—Å—Ç–∏:
  - find_version_paradox ‚Äî –≥–ª–∞–≤–Ω—ã–π —Ä–∏—Ç—É–∞–ª –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–≥–∏–∫–∏ –∞–Ω–∞–ª–∏–∑–∞ –∏ –≤—ã–≤–æ–¥–∞
- –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –±–ª–æ–∫–∏:
  - if **name** == "**main**": –≤—ã–∑–æ–≤ find_version_paradox

## 6. System Context & Constraints (–°–∏—Å—Ç–µ–º–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)

### 6.1. Technical Constraints

- **Performance:** Standard CPU
- **Concurrency:** –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ä–µ–∂–∏–º –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è
- **Dependencies:** –õ–∏—à—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ Python (json)

### 6.2. Prohibited Actions (Negative Constraints)

- –ù–ï —Ö—Ä–∞–Ω–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å—Ç—Ä–æ–∫–∏ –≤ manifest.json, –±–µ–∑ —Å–µ–∫—Ä–µ—Ç–æ–≤)
- –ù–ï –ø–µ—á–∞—Ç–∞—Ç—å —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Å–æ–ª—å –≤ –ø—Ä–æ–¥–∞–∫—à–Ω-—Ä–µ–∂–∏–º–µ –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Å–µ—Ç–µ–≤—ã–µ –≤—ã–∑–æ–≤—ã –≤ –≥–ª–∞–≤–Ω–æ–º —Ü–∏–∫–ª–µ —Ä–∏—Ç—É–∞–ª–∞
- –ù–ï –æ–±–æ—Ä–∞—á–∏–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (.yaml, .json) –≤ —Å–∫—Ä–∏–ø—Ç—ã
- –ù–ï –º–µ–Ω—è—Ç—å –≤–µ—Ä—Å–∏–∏ –∏–ª–∏ –ø—É—Ç–∏ –≤–æ –≤—Ä–µ–º—è —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

## 7. Verification & Testing (–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è)

### 7.1. Gherkin scenarios

```gherkin
Feature: Script Functionality
  Scenario: Successful paradox detection
    Given manifest.json contains chunks with part_1.pdf sources ["src/a.pdf", "src/b.pdf", "shared.pdf"]
      and living_chronicle.pdf sources ["src/b.pdf", "src/c.pdf", "shared.pdf"]
    When the script is executed
    Then the output reports –û–ë–ù–ê–†–£–ñ–ï–ù–´ –í–†–ï–ú–ï–ù–ù–´–ï –ü–ê–†–ê–î–û–ö–°–´ –∏ –ø–µ—Ä–µ—á–∏—Å–ª—è–µ—Ç —Ñ–∞–π–ª—ã, —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≤ –æ–±–µ–∏—Ö –≤–µ—Ä—Å–∏—è—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä "shared.pdf" –∏ "src/b.pdf"

```

```gherkin
Feature: Script Functionality
  Scenario: Manifest not found
    Given manifest.json does not exist
    When the script is executed
    Then the output includes an error message indicating that manifest.json not found and the ritual terminates
```

–ö–∞–∂–¥—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å—á–∞—Å—Ç–ª–∏–≤—ã–π –ø—É—Ç—å –∏ –æ–¥–∏–Ω —Ä–µ–∂–∏–º –æ—à–∏–±–∫–∏, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –°–∫—Ä–∏–∂–∞–ª–∏ manifest.json.
