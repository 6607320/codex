# validation_data.py Specification

1. Meta Information

- Domain: Scripting
- Complexity: Low
- Language: Python
- Frameworks: Нет (Стандартная библиотека)
- Context: Independent Artifact

2. Goal & Purpose (Цель и Назначение)
   Context for Creator: Это священный хранилище эталонных свитков под названием Кристалл Истины, предназначенное для проверки точности Говорящего Амулета. Оно образует мини-эталонный набор, который ритуально применяется главным Свитком main.py для измерения текущей точности модели.
   Instruction for AI: Этот раздел поясняет зачем нужен файл и почему он существует в виде Скрижали данных.

Описание на русском языке: В этом модуле скрыт небольшой, но репрезентативный эфирный набор текстов и их истинных сутей, служащий jako валидатор точности голосового амулета. Он не исполняется сам по себе; роль его — быть эталоном для самопроверки.

3. Interface Contract (Интерфейсный Контракт)

3.1 Inputs (Входы)

- Source: CLI Args
- Format: JSON
- Schema: InputData состоит из двух полей:
  - text: строка, руна текста
  - label: строка, валидная суте POSITIVE или NEGATIVE

    3.2 Outputs (Выходы)

- Destination: STDOUT
- Format: JSON
- Success Criteria: Exit code 0
- Schema: OutputResult содержит рецепты метрик для отчета:
  - total: число элементов в наборе
  - correct: число верных предсказаний
  - accuracy: число в диапазоне 0–1
  - details: массив объектов со сведениями по каждому примеру, например текст, предсказанный ярлык, фактический ярлык и признак совпадения

4. Implementation Details (The Source DNA / Исходный Код)

4.1 Algorithmic Logic (Для исполняемого кода)
Шаг 1: Загрузить внешний артефакт по имени validation_data.py и обратиться к константе VALIDATION_SET, которая хранит попарно тексты и истинные ярлыки.
Шаг 2: Для каждого свитка из VALIDATION_SET выполнить ритуал само‑проверки Говорящего Амулета: прогнать текст через механизм предсказания ярлыка и получить предполагаемую метку.
Шаг 3: Сверить предсказанную метку с истинной меткой из свитка.
Шаг 4: Накопить статистику: общее число, число верных предсказаний и долю точности.
Шаг 5: Собрать детальный журнал по каждому элементу: текст, фактическая метка, предсказанная метка, факт соответствия.
Шаг 6: Вывести резюме в STDOUT в формате JSON и завершиться с кодом 0.
Шаг 7: В случае пустого набора или ошибок доступа — вывести понятное предупреждение и завершиться этим же кодом 0, чтобы не разбудить хаос.

4.2 Declarative Content (Для конфигураций и данных)
Данные хранятся в VALIDATION_SET как десять рунических записей, каждая из которых содержит текст и истинную сут - POSITIVE или NEGATIVE. Это набор тестовых эталонов, использующийся главной Скриажей для оценки точности артефакта. Ритуал опирается на точные пары текст → ярлык и не допускает изменений эталонных значений во время проверки.

5. Structural Decomposition (Декомпозиция структуры)

- Входные данные:
  - VALIDATION_SET: массив объектов с полями text и label
- Основные блоки:
  - DataLoader или загрузчик эфирной скрижали: извлекает VALIDATION_SET
  - Evaluator: запускает механизм предсказания для каждого текста и выдает predicted_label
  - MetricsCollector: считает total, correct, accuracy
  - Reporter: формирует и выводит детальный журнал и сводку на STDOUT
- Основные элементы интерфейсов:
  - InputData: текст и истинная метка
  - OutputResult: итоговая статистика и детальные результаты

6. System Context & Constraints (Системный контекст и Ограничения)

6.1 Technical Constraints

- Performance: Стандартный CPU
- Concurrency: Синхронный режим обработки
- Dependencies: Python 3.x (без сторонних тяжёлых зависимостей; ограничиться стандартной библиотекой)

  6.2 Prohibited Actions (Negative Constraints)

- DO NOT хранить секреты в открытом виде (используйте .env при необходимости)
- DO NOT выводить сырые данные в консоль в продакшене
- DO NOT выполнять синхронные сетевые вызовы в критических местах цикла
- DO NOT оборачивать конфигурационные файлы .yaml или .json в скрипты
- DO NOT менять версии или пути во время реконструкции артефакта

7. Verification & Testing (Верификация)

1. Гиркни-грань счастья (Happy Path)
   Feature: Validation data ritual
   Scenario: Successful self-check
   Given the VALIDATION_SET is loaded from validation_data.py
   When the evaluation ritual runs
   Then an accuracy metric and a detailed per-item report are emitted to STDOUT with exit code 0

1. Падение хаоса (Error Case)
   Feature: Validation data ritual
   Scenario: Empty dataset
   Given VALIDATION_SET is empty
   When the evaluation ritual runs
   Then the system exits gracefully with exit code 0 and prints a warning about the empty dataset

ИССЛЕДУЕМЫЙ АРТЕФАКТ: validation_data.py

ИСХОДНЫЙ КОД (описание лора без копирования):
Это священный пергамент под названием Кристалл Истины, где хранится эталонный набор свитков, содержащий пары текст — истинная суте. Эталон служит главной «Скрижалью» для измерения точности говорящего амулета: каждое сопоставление текста с его правильной меткой собирается, чтобы затем вычислить точность и привести итоговый отчет. Сам набор не предназначен для исполнения как ритуал; он лишь хранит эталон и поддерживает ритуал самопроверки главной ордена. В Кристалле истины лежат десять свитков с текстами и метками POSITIVE или NEGATIVE, которые главная руна main.py будет использовать для проверки своей текущей силы распознавания.
