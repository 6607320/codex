"""Квест 28.2: Свиток "Предварительного Призыва Знаний".

Этот пергамент — это одноразовый ритуал, исполняемый **во время ковки**
"души" Голема (`docker build`). Его главная цель (МАКРО-контекст) —
решить проблему "холодного старта", заставив гримуар `transformers`
призвать и запечатать "мозг" модели (`distilbert...`) непосредственно
в слои Docker-образа.

После этого ритуала Голем становится **истинно самодостаточным**.
При пробуждении в Cloud Run ему больше не нужно обращаться к внешней
"Великой Библиотеке" (`Hugging Face Hub`), что гарантирует
молниеносный и предсказуемый запуск.
"""

# Мы призываем из великой библиотеки `transformers` могущественное заклинание `pipeline`,
# которое является нашим главным инструментом для сотворения "Духов".
from transformers import pipeline

# Мы оглашаем в кристалл сборки (консоль), что главный ритуал начинается.
# Это сообщение будет видно в логах во время исполнения `docker build`.
print("Начинаю ритуал 'Предварительного Призыва Знаний'...")

# Мы произносим само заклинание, обращаясь к `pipeline` с теми же параметрами,
# что и в основном пергаменте `main.py`.
# Именно в этот момент гримуар `transformers` видит, что "мозга" модели нет
# в его кеше, обращается к "Великой Библиотеке" (`Hugging Face Hub`) и скачивает
# его, сохраняя в файловой системе строящегося Docker-образа.
pipeline(
    # Мы указываем специализацию "Духа".
    "sentiment-analysis",
    # Мы указываем его точное имя, чтобы гримуар знал, какое знание призывать.
    model="distilbert-base-uncased-finetuned-sst-2-english"
)

# Мы оглашаем об успешном завершении ритуала, подтверждая, что "мозг" модели
# теперь является неотъемлемой частью "души" Голема.
print("Знания успешно призваны и запечатаны.")
