# locustfile.py Specification

## 1. Meta Information

- Domain: Scripting
- Complexity: Medium
- Language: Python
- Frameworks: Locust
- Context: Independent Artifact

## 2. Goal & Purpose (–¶–µ–ª—å –∏ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ)

Context for Creator: –û–ø–∏—à–∏—Ç–µ –±–∏–∑–Ω–µ—Å-–∑–∞–¥–∞—á—É –∫—Ä–∞—Ç–∫–æ. –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç –º–æ–¥—É–ª—å?
Instruction for AI: This section provides high-level intent. Use it to understand the "WHY" of the code.

–õ–µ–≥–µ–Ω–¥–∞: –≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–ª—É–∂–∏—Ç –ü–ª–∞–Ω–æ–º –û—Å–∞–¥ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –≤–µ–±-–ø–æ—Ä—Ç–∞–ª–æ–≤. –ß–µ—Ä–µ–∑ –∏–ª–ª—é–∑–æ—Ä–Ω–æ–≥–æ –≤–æ–∏–Ω–∞ AmuletUser, –≤—ã—Ä–∞—Å—Ç–∞—é—â–µ–≥–æ –∏–∑ —á–µ—Ä—Ç–æ–≥–∞ HttpUser, —Ä–∏—Ç—É–∞–ª—ã Locust –ø–æ—Ä–æ–∂–¥–∞—é—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –±–æ–µ–≤—ã—Ö –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫–∞–∫ –ø–æ—Ä—Ç–∞–ª –¥–µ—Ä–∂–∏—Ç—Å—è –ø–æ–¥ –¥–∞–≤–ª–µ–Ω–∏–µ–º. –û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å –∏ –ø—Ä–æ—á–Ω–æ—Å—Ç—å –¥–≤—É—Ö –∫—Ä–∞–µ–≤ –≤—Ä–∞—Ç: –∞–Ω–∞–ª–∏–∑–∞ –∏ —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∏.

–û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ: –≠—Ç–æ —Å–∫—Ä–∏–ø—Ç –¥–ª—è –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–¥–∞—ë—Ç —Ç–∏–ø–æ–≤—ã—Ö –≤–æ—è–∫ –∏ –¥–≤–∞ –±–æ–µ–≤—ã—Ö –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è, —á—Ç–æ–±—ã —Å–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –∫–æ–Ω–µ—á–Ω–æ–π —Ç–æ—á–∫–µ –∞–Ω–∞–ª–∏–∑–∞ –∏ –∫ —Å–ª—É–∂–µ–±–Ω–æ–π –≤—Ä–∞—Çe –ø—Ä–æ–≤–µ—Ä–∫–∏.

## 3. Interface Contract (–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω—ã–π –ö–æ–Ω—Ç—Ä–∞–∫—Ç)

### 3.1. Inputs (–í—Ö–æ–¥—ã)

- Source: CLI Args
- Format: JSON
- Schema:

```typescript
// Define input interfaces here
interface InputData {
  // ...
}
```

### 3.2. Outputs (–í—ã—Ö–æ–¥—ã)

- Destination: STDOUT
- Format: JSON
- Success Criteria: Exit Code 0
- Schema:

```typescript
// Define output interfaces here
interface OutputResult {
  // ...
}
```

## 4. Implementation Details (The Source DNA / –ò—Å—Ö–æ–¥–Ω—ã–π –ö–æ–¥)

### 4.1. Algorithmic Logic (–î–ª—è –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ –∫–æ–¥–∞)

–®–∞–≥–∏ —Ä–∏—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø–ª–µ—Ç–µ–Ω–∏—è:

1. –ü—Ä–∏–∑–≤–∞–≤ –∏–∑ –≥—Ä–∏–º—É–∞—Ä–∞ Locust —Ç—Ä–∏ —Å—É—â–Ω–æ—Å—Ç–∏: HttpUser, task –∏ between, –º—ã –æ–∫—Ä–æ–ø–ª—è–µ–º –ø–æ–ª–µ –ø–∞–º—è—Ç–∏ –∏–º–µ–Ω–µ–º –∏ —Å—É—â–Ω–æ—Å—Ç—è–º–∏, —á—Ç–æ–±—ã –æ–Ω–∏ –º–æ–≥–ª–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –ø–æ—Ä—Ç–∞–ª–æ–º.
2. –°–æ–∑–¥–∞—ë–º —á–µ—Ä—Ç–µ–∂ –≤–æ–∏–Ω–∞ AmuletUser, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç HttpUser. –ï–º—É –∑–∞–¥–∞—ë–º –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –ø–∞—É–∑—É –º–µ–∂–¥—É –∞—Ç–∞–∫–∞–º–∏ —á–µ—Ä–µ–∑ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–µ –º–µ–∂–¥—É, —á—Ç–æ–±—ã –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –∞—Ç–∞–∫–∏ –≤—ã–ø–∞–¥–∞–ª–∞ —Å–ª—É—á–∞–π–Ω–∞—è –ø–∞—É–∑–∞ –º–µ–∂–¥—É 1 –∏ 5 —Å–µ–∫—É–Ω–¥–∞–º–∏.
3. –ü—Ä–∏–∫–∞–∑ –ü–µ—Ä–≤—ã–π ‚Äî –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–µ analyze_sentiment. –≠—Ç–æ—Ç —É–¥–∞—Ä –Ω–∞–Ω–æ—Å–∏—Ç—Å—è –º–µ—Ç–æ–¥–æ–º POST –∫ –≤–æ—Ä–æ—Ç–∞–º /analyze –∏ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ—Ç—Å—è JSON-–ø–æ—Å—ã–ª–∫–æ–π, —Å–æ–¥–µ—Ä–∂–∞—â–µ–π —Ç–µ–∫—Å—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞.
4. –ü—Ä–∏–∫–∞–∑ –í—Ç–æ—Ä–æ–π ‚Äî –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–µ validate_model. –≠—Ç–æ—Ç —É–¥–∞—Ä –Ω–∞–Ω–æ—Å–∏—Ç—Å—è –º–µ—Ç–æ–¥–æ–º POST –∫ –≤–æ—Ä–æ—Ç–∞–º /validate –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
5. –û—Å–∞–¥–Ω–∞—è –º–∞—à–∏–Ω–∞ Locust –±—É–¥–µ—Ç —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç–∞–∫–∏—Ö –≤–æ–∏–Ω–æ–≤ –∏ –Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –∏—Ö –∫ –≤—Ä–∞—Ç–∞–º, —Ñ–æ—Ä–º–∏—Ä—É—è —Ö–∞–æ—Å –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ –∏ —Å–æ–±–∏—Ä–∞—è —Ä–µ–ø–æ—Ä—Ç –ø–æ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –ø–æ—Ä—Ç–∞–ª–∞.

### 4.2. Declarative Content (–î–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –∏ –¥–∞–Ω–Ω—ã—Ö)

Inventory –∑–¥–µ—Å—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∏ –ø—Ä–æ–∫–ª—è—Ç–∏—è, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è —Ä–∏—Ç—É–∞–ª–∞:

- üè∞ AmuletUser ‚Äî –ß–µ—Ä—Ç–µ–∂ –≤–æ–∏–Ω–∞, –Ω–∞—Å–ª–µ–¥—É—é—â–∏–π HttpUser
- üõ°Ô∏è HttpUser ‚Äî –ë–∞–∑–æ–≤—ã–π –ø—Ä–æ—Ç–æ—Ç–∏–ø –≤–æ–∏–Ω–∞, –¥–µ—Ä–∂–∞—â–∏–π –º–∞–≥–∏—á–µ—Å–∫—É—é –ª–µ–π–∫—É –∫–ª–∏–µ–Ω—Ç–∞
- üó°Ô∏è task ‚Äî –†—É–Ω–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏—Å–≤–æ–µ–Ω–∏–µ –±–æ–µ–≤–æ–≥–æ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è
- ‚è≥ between ‚Äî –ó–∞–∫–ª–∏–Ω–∞–Ω–∏–µ, –∑–∞–¥–∞—é—â–µ–µ –ø–∞—É–∑—É –º–µ–∂–¥—É –≤—ã—Ö–æ–¥–∞–º–∏ –∞—Ç–∞–∫
- üó∫Ô∏è –í—Ä–∞—Ç–∞ –ê–Ω–∞–ª–∏–∑–∞ ‚Äî –ø—É—Ç—å POST /analyze
- üó∫Ô∏è –í—Ä–∞—Ç–∞ –°–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∏ ‚Äî –ø—É—Ç—å POST /validate
- üí¨ json payload ‚Äî –°–æ–æ–±—â–µ–Ω–∏–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
- üî• –õ–µ–≥–∏–æ–Ω ‚Äî –º–Ω–æ–∂–µ—Å—Ç–≤–æ AmuletUser, –ø–æ—Ä–æ–∂–¥–∞–µ–º—ã—Ö Locust –¥–ª—è –Ω–∞–≥—Ä—É–∑–∫–∏

## 5. Structural Decomposition (–î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã)

- –ö–ª–∞—Å—Å AmuletUser(HttpUser)
  - –°–≤–æ–π—Å—Ç–≤–æ wait_time: –º–µ–∂–¥—É(1, 5)
  - –ú–µ—Ç–æ–¥ analyze_sentiment: –∞—Ç–∞–∫–∞ –Ω–∞ "/analyze" —Å POST –∏ payload JSON
  - –ú–µ—Ç–æ–¥ validate_model: –∞—Ç–∞–∫–∞ –Ω–∞ "/validate" —Å POST –±–µ–∑ payload
- –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã: HttpUser, task, between –∏–∑ Locust
- –ö–æ–Ω—Ü–µ–ø—Ü–∏–∏: –¥–≤–µ –±–æ–µ–≤—ã–µ —Ç–∞–∫—Ç–∏–∫–∏, —á–µ—Ä–µ–¥–æ–≤–∞–Ω–∏–µ –∞—Ç–∞–∫, —ç—Ö–æ –ø–∞—É–∑ –≤ –±–æ—é

## 6. System Context & Constraints (–°–∏—Å—Ç–µ–º–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)

### 6.1. Technical Constraints

- Performance: –û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ —Å–µ—Ç—å; —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –±–æ–ª—å—à–æ–≥–æ —á–∏—Å–ª–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –≤–æ–∏–Ω–æ–≤ –∑–∞ —Å—á—ë—Ç –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ concurrency Locust.
- Concurrency: Async / –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è –±–ª–∞–≥–æ–¥–∞—Ä—è Locust (eventlet/gevent-–ø–æ–¥—Ö–æ–¥—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏).
- Dependencies: Locust, Python 3.x, —Å–µ—Ç–µ–≤—ã–µ —Ä–µ—Å—É—Ä—Å—ã —Ü–µ–ª–µ–≤–æ–≥–æ –ø–æ—Ä—Ç–∞–ª–∞.

### 6.2. Prohibited Actions (Negative Constraints)

- –ù–ï —Ö—Ä–∞–Ω–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (.env) –∏–ª–∏ —Å–µ–∫—Ä–µ—Ç—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
- –ù–ï –≤—ã–≤–æ–¥–∏—Ç—å –æ–±–∏–ª—å–Ω—É—é –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–Ω-—Ä–µ–∂–∏–º–µ (–∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –ª–æ–≥–∏).
- –ù–ï –≤—ã–ø–æ–ª–Ω—è—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Å–µ—Ç–µ–≤—ã–µ –≤—ã–∑–æ–≤—ã –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø–µ—Ç–ª—è—Ö –±–µ–∑ –Ω—É–∂–¥—ã (–∏–∑–±–µ–≥–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏).
- –ù–ï –æ–±–æ—Ä–∞—á–∏–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (yaml/json) –≤ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Å–∫—Ä–∏–ø—Ç—ã.
- –ù–ï –º–µ–Ω—è—Ç—å –≤–µ—Ä—Å–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫ –∏–ª–∏ –ø—É—Ç–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞.

## 7. Verification & Testing (–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è)

### –ì–µ—Ä–µ–¥–∫–∏ —Å—Ü–µ–Ω–∞—Ä–∏–∏ (Gherkin)

Feature: [Script Functionality]
Scenario: Successful execution
Given Locust is configured to target the API host
When thousands of AmuletUser beings are spawned and execute attacks on /analyze and /validate
Then The endpoints respond with successful status codes and the load test completes

Scenario: Endpoint failure during load
Given the /analyze endpoint intermittently returns an error (e.g., 500)
When the load test runs
Then The system reports errors and continues to simulate load according to the configured strategy

–ò–ó–ù–ê–ß–ê–ï–ú–´–ô –ê–†–¢–ï–§–ê–ö–¢: locustfile.py

–ò–°–¢–û–ö–ò –î–ï–ô–°–¢–í–ò–Ø (–õ–æ—Ä): –ú—É–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–ª–∞–Ω –æ—Å–∞–¥—ã, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –∏–∑ —Ä—É–Ω–∏–∫ Locust, –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –∫–æ–¥ –≤ —Ä–∏—Ç—É–∞–ª —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –≠—Ñ–∏—Ä ◊î◊ï◊ì–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫—Ä—É–∂–∏—Ç—Å—è –≤–æ–∫—Ä—É–≥ –≤—Ä–∞—Ç, –∞ —Ö–∞–æ—Å —Ö–∞–æ—Ç–∏—á–µ—Å–∫–∏—Ö –ø–∞—É–∑ —Ä–æ–∂–¥–∞–µ—Ç —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
