# prometheus.yml Specification

1. Meta Information

- Domain: Infrastructure
- Complexity: Low
- Language: Go
- Frameworks: Docker, Kubernetes, Prometheus
- Context: ../AGENTS.md

2. Goal & Purpose (–¶–µ–ª—å –∏ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ)
   Context for Creator: –≠—Ç–æ—Ç –†–∏—Ç—É–∞–ª –æ–ø–∏—Å—ã–≤–∞–µ—Ç –°–∫—Ä–∏–∂–∞–ª—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∑–∞–¥–∞–≤–∞—è –≥–ª–æ–±–∞–ª—å–Ω—É—é —á–∞—Å—Ç–æ—Ç—É —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫ –∏ –æ–¥–Ω—É –∑–∞–¥–∞—á—É (job) –¥–ª—è –º–∏—Ä–∞ –º–µ—Ç—Ä–∏–∫, –æ–±—Ä–∞—â–∞—é—â–∏—Ö—Å—è –∫ FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –ø–æ –∞–¥—Ä–µ—Å—É app:8000. –≠—Ç–æ—Ç –º–æ–¥—É–ª—å —Å–ª—É–∂–∏—Ç —Ç–µ–º —Å–∞–º—ã–º —Å—Ç—Ä–∞–∂–µ–º, –∫–æ—Ç–æ—Ä—ã–π —Å–ª–µ–¥–∏—Ç –∑–∞ –∑–¥–æ—Ä–æ–≤—å–µ–º –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é —Å–µ—Ä–≤–∏—Å–æ–≤, –ø—Ä–µ–æ–±—Ä–∞–∑—É—è —Ö–∞–æ—Å –æ—à–∏–±–æ–∫ –≤ —è—Å–Ω—É—é symfon–∏—é –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç–∏.
   Instruction for AI: –≠—Ç–æ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∑–∞–º—ã—Å–µ–ª. –ó–∞—á–µ–º –Ω—É–∂–Ω–∞ —ç—Ç–∞ –°–∫—Ä–∏–∂–∞–ª—å –∏ —á—Ç–æ –æ–Ω–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–µ.

–û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ:
–°–∫—Ä–∏–∂–∞–ª—å prometheus.yml –∑–∞–¥–∞—ë—Ç –ø—Ä–∞–≤–∏–ª–∞ —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª —Å–±–æ—Ä–∞ –∏ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ü–µ–ª–µ–≤–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞, —á—Ç–æ–±—ã –∫–æ–º–∞–Ω–¥–∞ –º–æ–≥–ª–∞ –≤–∏–¥–µ—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

3. Interface Contract (–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω—ã–π –ö–æ–Ω—Ç—Ä–∞–∫—Ç)
   Instruction for AI: Strictly implement these data structures. Do not hallucinate fields. Use TypeScript interfaces to define shapes.

3.1. Inputs (–í—Ö–æ–¥—ã)

- Source: STDIN
- Format: Text
- Schema: –í—Ö–æ–¥–Ω–æ–π —ç—Ñ–∏—Ä –¥–ª—è –†–∏—Ç—É–∞–ª–∞ –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –°–∫—Ä–∏–∂–∞–ª–∏ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –µ—ë –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è. –í —Ä–∞–º–∫–∞—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —ç—Ç–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∫–∞–∫ –æ–±—ä–µ–∫—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —Å—ã—Ä—É—é —Å—Ç—Ä–æ–∫—É –°–∫—Ä–∏–∂–∞–ª–∏ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ–± –∏—Å—Ç–æ—á–Ω–∏–∫–µ.

  –ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç –≤ —Ñ–æ—Ä–º–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –±–µ–∑ –∫–æ–¥–∞):
  - InputData —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –ø–æ–ª—è rawConfig —Ç–∏–ø–∞ string, –ø–æ–ª—è format —Ç–∏–ø–∞ "Text", –∏ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π sourceName –∏ origin, –≥–¥–µ sourceName –º–æ–∂–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫ –≤–≤–æ–¥–∞, –∞ origin ‚Äî –Ω–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

    3.2. Outputs (–í—ã—Ö–æ–¥—ã)

- Destination: STDOUT
- Format: JSON
- Success Criteria: Exit code 0
- Schema: –í—ã—Ö–æ–¥–Ω–æ–π —ç—Ñ–∏—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å —Ñ–ª–∞–≥–æ–º —É—Å–ø–µ—Ö–∞, —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –æ–± –æ—à–∏–±–∫–∞—Ö (–µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å) –∏ –∫—Ä–∞—Ç–∫–∏–º —Ä–µ–∑—é–º–µ —Ä–∞–∑–æ–±—Ä–∞–Ω–Ω–æ–π –°–∫—Ä–∏–∂–∞–ª–∏.

  –í —Ñ–æ—Ä–º–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω–æ:
  - OutputResult –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–ª—è: success (boolean), message (string, –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ), errors (–º–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫, –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π), data (any, –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π).

4. Implementation Details (The Source DNA / –ò—Å—Ö–æ–¥–Ω—ã–π –ö–æ–¥)

4.1. Algorithmic Logic (–î–ª—è –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ –∫–æ–¥–∞)

1. –ü—Ä–∏–º–∏—Ç–µ –≤—Ö–æ–¥–Ω–æ–π —ç—Ñ–∏—Ä: —Å—á–∏—Ç–∞–π—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤—É—é –°–∫—Ä–∏–∂–∞–ª—å –∏–∑ STDIN –∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫ (Origin) –∫–∞–∫ —á–∞—Å—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.
2. –†–∞–∑–±–µ—Ä–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –°–∫—Ä–∏–∂–∞–ª–∏ –∫–∞–∫ YAML-—Å—Ç—Ä—É–∫—Ç—É—Ä—É. –ï—Å–ª–∏ —Ä–∞–∑–±–æ—Ä –Ω–µ —É–¥–∞–ª—Å—è, –ø–æ—Ä–æ–¥–∏—Ç–µ –•–∞–æ—Å —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ–± –æ—à–∏–±–∫–µ –∏ –∑–∞–≤–µ—Ä—à–∏—Ç–µ —Å –∫–æ–¥–æ–º, –æ—Ç–ª–∏—á–Ω—ã–º –æ—Ç –Ω—É–ª—è.
3. –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –±–ª–æ–∫–∞. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≥–ª–æ–±–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä scrape_interval –∏ –æ–Ω –∏–º–µ–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –¥–æ–ø—É—Å–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 15s).
4. –í–æ–π–¥–∏—Ç–µ –≤ –±–ª–æ–∫ scrape_configs. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –∫–∞–∫ —Å–ø–∏—Å–æ–∫ –∏ —á—Ç–æ –≤ –∫–∞–∂–¥–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç —Ö–æ—Ç—è –±—ã:
   - job_name ‚Äî —Å—Ç—Ä–æ–∫–∞ —Å –∏–º–µ–Ω–µ–º –∑–∞–¥–∞–Ω–∏—è;
   - static_configs ‚Äî —Å–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ü–µ–ª–µ–π;
     –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –∫–æ—Ç–æ—Ä–æ–≥–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É–∫–∞–∑–∞–Ω–æ one –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ targets –≤ —Ñ–æ—Ä–º–∞—Ç–µ "host:port" (–Ω–∞–ø—Ä–∏–º–µ—Ä, "app:8000").
5. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ, —á—Ç–æ —Ü–µ–ª–∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤—ã–≥–ª—è–¥—è—Ç –∫–∞–∫ –¥–æ–ø—É—Å—Ç–∏–º—ã–µ —Å–µ—Ç–µ–≤—ã–µ –∞–¥—Ä–µ—Å–∞ –∏–ª–∏ –∏–º–µ–Ω–∞ —Ö–æ—Å—Ç–æ–≤ —Å –ø–æ—Ä—Ç–∞–º–∏, –∏ —á—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–∂–∏–¥–∞–Ω–∏—è–º.
6. –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å—Ñ–æ—Ä–º–∏—Ä—É–π—Ç–µ —Ä–µ–∑—é–º–µ: –∫–∞–∫–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–∏–Ω—è—Ç—ã, –∫–∞–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è –∏ —Ü–µ–ª–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω—ã, —Å–∫–æ–ª—å–∫–æ —Ü–µ–ª–µ–π –Ω–∞–π–¥–µ–Ω–æ –∏ —Ç. –ø.
7. –í—ã–≤–µ–¥–∏—Ç–µ –∏—Ç–æ–≥ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON –Ω–∞ STDOUT –∏ –∑–∞–≤–µ—Ä—à–∏—Ç–µ—Å—å —Å –∫–æ–¥–æ–º 0. –ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –æ—à–∏–±–æ–∫ ‚Äî –≤–µ—Ä–Ω–∏—Ç–µ –•–∞–æ—Å —Å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç—è–º–∏ –∏ –∑–∞–≤–µ—Ä—à–∏—Ç–µ—Å—å —Å –Ω–µ–Ω—É–ª–µ–≤—ã–º –∫–æ–¥–æ–º.

4.2. Declarative Content (–î–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –∏ –¥–∞–Ω–Ω—ã—Ö)
Inventory of —Å—É—â–Ω–æ—Å—Ç–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ (–≤ —Ñ–æ—Ä–º–∞—Ç–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ RPG, —Å —Ç–∞—Ç–∞–º–∏ üè∞ –∏ —â–∏—Ç–∞–º–∏ üõ°Ô∏è):

- üè∞ –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –∑–∞–∫–æ–Ω—ã –°–∫—Ä–∏–∂–∞–ª–∏: –≥–ª–æ–±–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ scrape_interval —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º 15s, –∑–∞–¥–∞—é—â–µ–µ —á–∞—Å—Ç–æ—Ç—É —Ä–∏—Ç—É–∞–ª–∞ —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫.
- üõ°Ô∏è –ó–∞–∫–∞–∑—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞: —Å–µ–∫—Ü–∏—è scrape_configs, –æ–ø–∏—Å—ã–≤–∞—é—â–∞—è –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫.
- üè∞ –ó–∞–¥–∞–Ω–∏–µ –∫–ª–µ–π–º–∞: job_name: fastapi-app ‚Äî –∏–º—è –∑–∞–¥–∞–Ω–∏—è, –≤—ã–≥—Ä–∞–≤–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –Ω–∞ —Å–≤–∏—Ç–∫–µ.
- üõ°Ô∏è –¶–µ–ª–∏ –ø—Ä–∏–∑—ã–≤–∞: static_configs —Å targets: ["app:8000"] ‚Äî —Ü–µ–ª—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, –¥–æ—Å—Ç—É–ø –∫ –∫–æ—Ç–æ—Ä–æ–π –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –º–∞–≥–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—Ç 8000.
- üè∞ –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏ —Ñ–æ—Ä–º–∞—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è: YAML-—Å–∫—Ä–∏–∂–∞–ª—å —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –≤–∏–¥–µ —Ç–µ–∫—Å—Ç–∞ –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–¥–∞–Ω–æ –Ω–∞ –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ STDIN/API, –ø–æ—Å–ª–µ —á–µ–≥–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –∏ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å.

5. Structural Decomposition (–î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã)
   Instruction for AI:

- –î–ª—è –∫–æ–¥–∞: –ø–µ—Ä–µ—á–∏—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∫–ª–∞—Å—Å—ã.
- –î–ª—è –∫–æ–Ω—Ñ–∏–≥–æ–≤: –ø–µ—Ä–µ—á–∏—Å–ª–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: repos, services, build_stages).

–í–æ–∑–º–æ–∂–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ –≤ –≤–∏–¥–µ –ª–æ–≥–∏—á–µ—Å–∫–æ–π —Ä–∞–∑–º–µ—Ç–∫–∏:

- –ì–ª–∞–≤–Ω—ã–π –º–æ–¥—É–ª—å –æ–±—Ä–∞–±–æ—Ç–∫–∏: parsePrometheusYaml, validateGlobalSection, validateScrapeConfigsSection, normalizeTargets, renderOutput.
- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –±–ª–æ–∫–∏ –°–∫—Ä–∏–∂–∞–ª–∏: global, scrape_configs, static_configs, targets.
- –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏: yamlParser, logger, validator, errorAggregator.

6. System Context & Constraints (–°–∏—Å—Ç–µ–º–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)

6.1. Technical Constraints

- Performance: Standard CPU
- Concurrency: –°–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ
- Dependencies: –Ø–º–ª—å-–ø–∞—Ä—Å–µ—Ä (–¥–ª—è JavaScript/TypeScript ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, YAML-–ø–∞—Ä—Å–µ—Ä), –º–æ–¥—É–ª—å –¥–ª—è –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞, –±–∞–∑–æ–≤—ã–µ —Ç–∏–ø—ã TypeScript.

  6.2. Prohibited Actions (Negative Constraints)

- DO NOT store secrets in plain text (use .env –∏–ª–∏ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞).
- DO NOT print raw data to console in production mode.
- DO NOT use synchronous network calls in the main loop.
- DO NOT wrap –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (.yaml, .json) –≤ —Å–∫—Ä–∏–ø—Ç—ã (–∫–∞–∫ Python/Bash).
- DO NOT change versions or paths during reconstruction.

7. Verification & Testing (–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è)

–ì–µ—Ä–∫–∏–Ω-—Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è —Å—á–∞—Å—Ç—å—è –∏ —Ö–∞–æ—Å–∞:

Feature: Prometheus configuration ritual validation
Scenario: Successful validation of prometheus.yml
Given a valid YAML configuration containing global.scrape_interval and a single scrape_configs with a proper job_name and static_configs targets
When the ritual processes the configuration
Then the output should be a JSON containing success true, a concise summary of parsed sections, and the ritual exits with code 0

Scenario: Invalid YAML or missing fields
Given an invalid YAML configuration or a configuration missing required fields
When the ritual processes the configuration
Then the output should be a JSON containing success false, a list of errors, and the ritual exits with a non-zero code

–ò–°–°–õ–ï–î–£–ï–ú–´–ô –ê–†–¢–ï–§–ê–ö–¢: prometheus.yml

–ò–°–•–û–î–ù–´–ô –ö–û–î:
–û–±—Ä–∞–∑–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞: –í–µ–ª–∏–∫–æ–µ –°–≤–∏—Ç–æ–∫ –ü—Ä–∞–≤–∏–ª –¥–ª—è –°—Ç—Ä–∞–∂–∞ –í—Ä–µ–º–µ–Ω–∏, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–¥–∞—ë—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∑–∞–∫–æ–Ω—ã –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö –∏ –º–∏—Å—Å–∏–∏ —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫. –°–≤–∏—Ç–æ–∫ —Ö—Ä–∞–Ω–∏—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ –≤—Ä–µ–º–µ–Ω–∏, –∞ —Ç–∞–∫–∂–µ –æ–¥–Ω—É –º–∏—Å—Å–∏—é, –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é –Ω–∞ –≤—ã–∑–æ–≤ –º–µ—Ç—Ä–∏–∫ –∏–∑ FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —É–∂–∞—Å–∞—é—â–µ–≥–æ –º–∞—Å—à—Ç–∞–±–∞.

–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ –≤ –≤–∏–¥–µ —Ä–∏—Ç—É–∞–ª—å–Ω–æ–≥–æ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä:

- –ì–ª–æ–±–∞–ª—å–Ω—ã–π –∑–∞–∫–æ–Ω: global.scrape_interval —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ 15s, —á—Ç–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —á–∞—Å—Ç–æ—Ç—É –≤—Ö–æ–∂–¥–µ–Ω–∏—è –Ω–∞–±–ª—é–¥–µ–Ω–∏–π –≤ —ç—Ñ–∏—Ä.
- –ú–∏—Å—Å–∏–∏: scrape_configs —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–¥–Ω—É –∑–∞–¥–∞—á—É —Å –∏–º–µ–Ω–µ–º fastapi-app.
- –¶–µ–ª–∏: static_configs –≤–∫–ª—é—á–∞–µ—Ç —Ü–µ–ª—å targets: ["app:8000"], —á—Ç–æ —Ç—Ä–∞–∫—Ç—É–µ—Ç—Å—è –∫–∞–∫ –ø—É—Ç—å —ç—Ñ–∏—Ä–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫.

–ó–∞–º–µ—á–∞–Ω–∏—è –ø–æ —Å—Ç–∏–ª—é:

- –í —Ç–µ–∫—Å—Ç–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –æ–±—Ä–∞–∑—ã –†–∏—Ç—É–∞–ª–∞ –∏ –°–∫—Ä–∏–∂–∞–ª–∏: –°–∫—Ä–∏–ø—Ç –ø—Ä–µ–≤—Ä–∞—â—ë–Ω –≤ –†–∏—Ç—É–∞–ª; –ö–æ–Ω—Ñ–∏–≥ ‚Äî –≤ –°–∫—Ä–∏–∂–∞–ª—å; –î–∞–Ω–Ω—ã–µ ‚Äî –≤ –≠—Ñ–∏—Ä; –û—à–∏–±–∫–∏ ‚Äî –≤ –•–∞–æ—Å.
- –ù–∏–∫–∞–∫–æ–π –∫–æ–ø–∏–∏ –∫–æ–¥–∞, —Ç–æ–ª—å–∫–æ –æ–ø–∏—Å–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä.
- –í –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ –Ω–µ—Ç —Å–∫—Ä—ã—Ç—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤; –ª—é–±–∞—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞—â–∏—â–µ–Ω–∞.
