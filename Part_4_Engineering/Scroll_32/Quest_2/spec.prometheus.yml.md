# prometheus.yml Specification

## 1. Meta Information

- Domain: Infrastructure
- Complexity: Medium
- Language: Go
- Frameworks: Prometheus, Docker, Kubernetes
- Context: Independent Artifact

## 2. Goal & Purpose (–¶–µ–ª—å –∏ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ)

Context for Creator: –≠—Ç–æ—Ç —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∑–∞ —Å—á—ë—Ç —Ä–∏—Ç—É–∞–ª–∞ –æ–ø—Ä–æ—Å–∞ (scrape) –∏ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –æ–¥–Ω—É –º–∏—Å—Å–∏—é –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–ª—è FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –û–Ω –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π –≥—Ä–∞—Ñ–∏–∫ —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫ –∏ —Ç–æ—á–Ω–æ–µ –º–µ—Å—Ç–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —Ü–µ–ª–µ–≤—ã—Ö –¥—É—Ö–æ–≤.
Instruction for AI: –≠—Ç–æ —Å–µ–∫—Ü–∏—è, –∑–∞–¥–∞—é—â–∞—è –≤—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –∑–∞–º—ã—Å–ª–∞. –ü–æ–π–º–∏ ¬´–ü–û–ß–ï–ú–£¬ª —ç—Ç–æ–≥–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä–∞.
–û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ: –§–∞–π–ª –æ–ø–∏—Å—ã–≤–∞–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–ø—Ä–æ—Å–∞ –∏ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫ –¥–ª—è –∑–∞–¥–∞—á–∏ fastapi-app, —Ü–µ–ª—å –∫–æ—Ç–æ—Ä–æ–π ‚Äî –¥–µ—Ä–∂–∞—Ç—å –ø–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –ø–æ –∞–¥—Ä–µ—Å—É app:8000.

## 3. Interface Contract (–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω—ã–π –ö–æ–Ω—Ç—Ä–∞–∫—Ç)

### 3.1. Inputs (–í—Ö–æ–¥—ã)

- Source: STDIN
- Format: Text
- Schema:
  interface InputData {
  global?: {
  scrape_interval: string;
  };
  scrape_configs?: Array<{
  job_name: string;
  static_configs: Array<{
  targets: string[];
  }>;
  }>;
  }

### 3.2. Outputs (–í—ã—Ö–æ–¥—ã)

- Destination: File
- Format: Text
- Success Criteria: Exit Code 0
- Schema:
  interface OutputResult {
  path: string;
  status: string;
  }

## 4. Implementation Details (The Source DNA / –ò—Å—Ö–æ–¥–Ω—ã–π –ö–æ–¥)

### 4.1. Algorithmic Logic (–î–ª—è –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ –∫–æ–¥–∞)

1. –í—Ö–æ–¥–Ω–æ–π –ø–æ—Ç–æ–∫ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è –∫–∞–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã–π –Ω–∞–±–æ—Ä YAML-–¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ STDIN. 2) –ú–æ–¥—É–ª—å –∞–Ω–∞–ª–∏–∑–∞ –ø–∞—Ä—Å–∏—Ç —Ç–µ–∫—Å—Ç–æ–≤—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —Å—Ç—Ä–æ–∏—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é –º–æ–¥–µ–ª—å, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º InputData. 3) –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ –∏ –ø–æ–ª—è scrape_interval –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ, –∞ —Ç–∞–∫–∂–µ –Ω–∞–ª–∏—á–∏–µ —Å–µ–∫—Ü–∏–∏ scrape_configs —Å –ø–æ –∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ –æ–¥–Ω–æ–π —Ü–µ–ª—å—é –∏ –µ—ë —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π. 4) –ó–Ω–∞—á–µ–Ω–∏—è –Ω–æ—Ä–º–∞–ª–∏–∑—É—é—Ç—Å—è: –∏–Ω—Ç–µ—Ä–≤–∞–ª —Å–±–æ—Ä–∞ –æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ —Å—Ç—Ä–æ–∫–æ–≤–æ–º –≤–∏–¥–µ, —Ü–µ–ª–µ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–≤–æ–¥—è—Ç—Å—è –∫ –µ–¥–∏–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É, —á—Ç–æ–±—ã –∑–∞–ø–∏—Å—å –≤ –≤—ã—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É Prometheus. 5) –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –æ—à–∏–±–æ–∫ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –≤—ã—Ö–æ–¥–Ω–æ–π –ø–æ—Ç–æ–∫ YAML –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –≤—Ö–æ–¥–Ω–æ–π –º–æ–¥–µ–ª—å—é –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –ø—É—Ç–∏ –∫–∞–∫ prometheus.yml. 6) –ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å, —Ä–∞–≤–Ω—ã–π —É—Å–ø–µ—à–Ω–æ–º—É (Exit Code 0). 7) –ü—Ä–∏ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è—Ö –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–µ—É—Å–ø–µ—à–Ω—ã–π –∫–æ–¥ –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ.

### 4.2. Declarative Content (–î–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –∏ –¥–∞–Ω–Ω—ã—Ö)

Inventory –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ prometheus.yml –ø—Ä–µ–≤—Ä–∞—â–µ–Ω –≤ –º–∞–≥–∏—á–µ—Å–∫–æ–µ —Å–Ω–∞—Ä—è–∂–µ–Ω–∏–µ:

- üè∞ –ì–ª–æ–±–∞–ª—å–Ω—ã–π –°–≤–∏—Ç–æ–∫ –ó–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞: —Ä–∞–∑–¥–µ–ª global —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —á–∞—Å—Ç–æ—Ç—É —Ä–∏—Ç—É–∞–ª–∞ —Å–æ—Å–∫–∞–±–ª–∏–≤–∞–Ω–∏—è (scrape_interval) –∏ –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –∑–∞–¥–∞—ë—Ç 15 —Å–µ–∫—É–Ω–¥ –º–µ–∂–¥—É –≤—ã–∑–æ–≤–∞–º–∏.
- üõ°Ô∏è –†—É–Ω–∞ –ú–∏—Å—Å–∏–π –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞: —Ä–∞–∑–¥–µ–ª scrape_configs —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–¥–Ω—É –º–∏—Å—Å–∏—é —Å –∏–º–µ–Ω–µ–º fastapi-app.
- üè∞ –ü–æ–ø–ª–∞–≤–æ–∫ –¶–µ–ª–µ–π: –≤–Ω—É—Ç—Ä–∏ –º–∏—Å—Å–∏–∏ –ø—Ä–æ–ø–∏—Å–∞–Ω–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, —É–∫–∞–∑—ã–≤–∞—é—â–∞—è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—É—é —Ü–µ–ª—å targets ‚Äî ["app:8000"].
- üè∞ –≠—Ñ–∏—Ä –°—Ö–µ–º—ã: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–∞ –¥–µ—Ä–∂–∏—Ç —Ñ–æ—Ä–º—É –∏ –ø–æ–ª—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –æ–∂–∏–¥–∞–Ω–∏—è–º–∏ Prometheus, —á—Ç–æ–±—ã —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –±—ã–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–≤—ã–º –∞–≥–µ–Ω—Ç–æ–º.
- üõ°Ô∏è –≠–ª–µ–º–µ–Ω—Ç –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: –≤—ã—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª prometheus.yml –±—É–¥–µ—Ç –∑–∞–ø–∏—Å–∞–Ω –≤ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É –∫–∞–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç.

(–ó–∞–º–µ—Ç—å—Ç–µ: –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –Ω–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è; –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ—á–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–∏–≤–µ–¥–µ–Ω–æ –≤ –≤–∏–¥–µ –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è –∏ –¥–∞–Ω–Ω—ã—Ö.)

## 5. Structural Decomposition (–î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã)

- global: —Ä–∞–∑–¥–µ–ª, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –ø–∏–∫—Ç–æ–≥—Ä–∞–º–º—ã —á–∞—Å—Ç–æ—Ç —Ä–∏—Ç—É–∞–ª–æ–≤ –∏ –¥—Ä—É–≥–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.
- scrape_configs: –º–∞—Å—Å–∏–≤ –º–∏—Å—Å–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞; –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç:
  - job_name: –∏–º—è –∑–∞–¥–∞–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä fastapi-app
  - static_configs: –º–∞—Å—Å–∏–≤ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ü–µ–ª–µ–π
- static_configs: –∫–∞–∂–¥–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç targets: –º–∞—Å—Å–∏–≤—ã —Å—Ç—Ä–æ–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä ["app:8000"]

## 6. System Context & Constraints (–°–∏—Å—Ç–µ–º–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)

### 6.1. Technical Constraints

- Performance: Standard CPU
- Concurrency: Sync
- Dependencies: Prometheus –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞; YAML-–ø–∞—Ä—Å–µ—Ä –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞

### 6.2. Prohibited Actions (Negative Constraints)

- DO NOT —Ö—Ä–∞–Ω–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å env –∏–ª–∏ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞).
- DO NOT –≤—ã–≤–æ–¥–∏—Ç—å —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Å–æ–ª—å –≤ –ø—Ä–æ–¥–∞–∫—à–Ω-—Ä–µ–∂–∏–º–µ.
- DO NOT –æ–±–æ—Ä–∞—á–∏–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (.yaml, .json) –≤ —Å–∫—Ä–∏–ø—Ç—ã.
- DO NOT –º–µ–Ω—è—Ç—å –≤–µ—Ä—Å–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏–ª–∏ –ø—É—Ç–∏ –≤–æ –≤—Ä–µ–º—è —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏.

## 7. Verification & Testing (–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è)

### –ì–µ—Ä—Ö–∏–Ω-—Å—Ü–µ–Ω–∞—Ä–∏–∏

Feature: Prometheus YAML Processor
Scenario: Successful execution
Given valid input YAML with global.scrape_interval set to "15s" and a single scrape_config for job_name "fastapi-app" with static_configs containing targets ["app:8000"]
When the processor validates input and writes to the file "prometheus.yml"
Then Exit code should be 0
And a file named "prometheus.yml" should be created with content matching the input structure

Scenario: Missing mandatory global.scrape_interval
Given input YAML lacking global.scrape_interval
When the processor runs
Then Exit code should be non-zero
And an error message describing the missing global.scrape_interval should be produced

–ò—Ç–æ–≥–æ–≤—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç: prometheus.yml
