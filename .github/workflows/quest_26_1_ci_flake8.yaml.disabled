# Имя нашего автоматизированного ритуала. Именно оно будет отображаться в летописях GitHub Actions,
# ясно указывая, что это "Клятва Стража", сфокусированная только на проверке чистоты кода (`Flake8 Only`).
name: "CI - Guardian's Oath (Flake8 Only)"

# "Заклинание Пробуждения". Эта секция описывает события, которые пробудят нашего Стража.
on:
  # Первое условие: пробуждаться при каждом внесении новых знаний (`push`).
  push:
    # "Избирательное Око": Страж пробудится, только если изменения коснулись пергаментов
    # внутри мастерской Квеста 26.1. Это делает ритуал модульным и экономит ресурсы.
    paths:
      - 'Part_4_Engineering/Scroll_26/Quest_1/**'
  # Второе условие: пробуждаться при каждой попытке внести знания (`pull_request`).
  pull_request:
    # "Избирательное Око" также работает и для pull request'ов.
    paths:
      - 'Part_4_Engineering/Scroll_26/Quest_1/**'

# "Скрижаль Заданий". Здесь начинается перечень великих дел, которые должен совершить Страж.
jobs:
  # Уникальное имя этого конкретного задания. Мы назвали его `linting` (проверка чистоты).
  linting:
    # "Алтарь для Ритуала". Мы указываем, в каком магическом окружении будет проводиться ритуал.
    # `ubuntu-latest` — это надежный и универсальный мир для нашего Стража.
    runs-on: ubuntu-latest
    # "Шаги Ритуала". Это сердце нашего заклинания — точная последовательность действий.
    steps:
      # Имя первого шага, для ясности в логах.
      - name: Checkout Code
        # Мы используем 'actions/checkout@v4' — могущественное, заранее созданное заклинание,
        # которое материализует на Алтаре точную копию нашей Летописи.
        uses: actions/checkout@v4

      # Имя второго шага.
      - name: Set up Python
        # Мы используем готовое заклинание 'actions/setup-python@v5',
        # которое чертит на Алтаре магический круг, готовый к работе с Python.
        uses: actions/setup-python@v5
        # "Компоненты Заклинания": Мы передаем ему точные инструкции.
        with:
          # Мы уточняем, что нам нужна сила Python именно версии '3.10'.
          python-version: '3.10'

      # Имя третьего шага.
      - name: Install Dependencies
        # 'run:' — это команда прямого действия. Страж выполнит следующее заклинание в своей командной строке.
        # Мы призываем духа `pip` для установки 'flake8' — нашего Стража Чистоты Кода.
        run: pip install flake8

      # Имя четвертого, кульминационного шага.
      - name: Lint with flake8
        # Прямой приказ: запустить 'flake8' и проверить все файлы ('.') в Летописи.
        # Если хоть одна руна написана не по правилам, ритуал на этом шаге прервется с ошибкой.
        run: flake8 .